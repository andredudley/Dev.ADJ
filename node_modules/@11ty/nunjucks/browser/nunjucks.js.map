{"version":3,"file":"nunjucks.js","mappings":"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","sources":["../webpack/universalModuleDefinition","../node_modules/events/events.js","../nunjucks/src/filters.js","../node_modules/a-sync-waterfall/index.js","../node_modules/asap/browser-asap.js","../nunjucks/src/transformer.js","../nunjucks/src/tests.js","../nunjucks/src/jinja-compat.js","../nunjucks/src/runtime.js","../nunjucks/src/lib.js","../nunjucks/src/precompile.js","../nunjucks/src/loader.js","../nunjucks/src/precompile-global.js","../nunjucks/src/web-loaders.js","../nunjucks/src/lexer.js","../nunjucks/index.js","../nunjucks/src/precompiled-loader.js","../nunjucks/src/globals.js","../node_modules/asap/browser-raw.js","../nunjucks/src/express-app.js","../nunjucks/src/nodes.js","../nunjucks/src/environment.js","../nunjucks/src/object.js","../nunjucks/src/compiler.js","../nunjucks/src/parser.js","../webpack/bootstrap","../webpack/runtime/global","../webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"nunjucks\"] = factory();\n\telse\n\t\troot[\"nunjucks\"] = factory();\n})(self, function() {\nreturn ","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","'use strict';\n\nvar lib = require('./lib');\nvar r = require('./runtime');\n\nvar exports = module.exports = {};\n\nfunction normalize(value, defaultValue) {\n  if (value === null || value === undefined || value === false) {\n    return defaultValue;\n  }\n  return value;\n}\n\nexports.abs = Math.abs;\n\nfunction isNaN(num) {\n  return num !== num; // eslint-disable-line no-self-compare\n}\n\nfunction batch(arr, linecount, fillWith) {\n  var i;\n  var res = [];\n  var tmp = [];\n\n  for (i = 0; i < arr.length; i++) {\n    if (i % linecount === 0 && tmp.length) {\n      res.push(tmp);\n      tmp = [];\n    }\n\n    tmp.push(arr[i]);\n  }\n\n  if (tmp.length) {\n    if (fillWith) {\n      for (i = tmp.length; i < linecount; i++) {\n        tmp.push(fillWith);\n      }\n    }\n\n    res.push(tmp);\n  }\n\n  return res;\n}\n\nexports.batch = batch;\n\nfunction capitalize(str) {\n  str = normalize(str, '');\n  const ret = str.toLowerCase();\n  return r.copySafeness(str, ret.charAt(0).toUpperCase() + ret.slice(1));\n}\n\nexports.capitalize = capitalize;\n\nfunction center(str, width) {\n  str = normalize(str, '');\n  width = width || 80;\n\n  if (str.length >= width) {\n    return str;\n  }\n\n  const spaces = width - str.length;\n  const pre = lib.repeat(' ', (spaces / 2) - (spaces % 2));\n  const post = lib.repeat(' ', spaces / 2);\n  return r.copySafeness(str, pre + str + post);\n}\n\nexports.center = center;\n\nfunction default_(val, def, bool) {\n  if (bool) {\n    return val || def;\n  } else {\n    return (val !== undefined) ? val : def;\n  }\n}\n\n// TODO: it is confusing to export something called 'default'\nexports['default'] = default_; // eslint-disable-line dot-notation\n\nfunction dictsort(val, caseSensitive, by) {\n  if (!lib.isObject(val)) {\n    throw new lib.TemplateError('dictsort filter: val must be an object');\n  }\n\n  let array = [];\n  // deliberately include properties from the object's prototype\n  for (let k in val) { // eslint-disable-line guard-for-in, no-restricted-syntax\n    array.push([k, val[k]]);\n  }\n\n  let si;\n  if (by === undefined || by === 'key') {\n    si = 0;\n  } else if (by === 'value') {\n    si = 1;\n  } else {\n    throw new lib.TemplateError(\n      'dictsort filter: You can only sort by either key or value');\n  }\n\n  array.sort((t1, t2) => {\n    var a = t1[si];\n    var b = t2[si];\n\n    if (!caseSensitive) {\n      if (lib.isString(a)) {\n        a = a.toUpperCase();\n      }\n      if (lib.isString(b)) {\n        b = b.toUpperCase();\n      }\n    }\n\n    return a > b ? 1 : (a === b ? 0 : -1); // eslint-disable-line no-nested-ternary\n  });\n\n  return array;\n}\n\nexports.dictsort = dictsort;\n\nfunction dump(obj, spaces) {\n  return JSON.stringify(obj, null, spaces);\n}\n\nexports.dump = dump;\n\nfunction escape(str) {\n  if (str instanceof r.SafeString) {\n    return str;\n  }\n  str = (str === null || str === undefined) ? '' : str;\n  return r.markSafe(lib.escape(str.toString()));\n}\n\nexports.escape = escape;\n\nfunction safe(str) {\n  if (str instanceof r.SafeString) {\n    return str;\n  }\n  str = (str === null || str === undefined) ? '' : str;\n  return r.markSafe(str.toString());\n}\n\nexports.safe = safe;\n\nfunction first(arr) {\n  return arr[0];\n}\n\nexports.first = first;\n\nfunction forceescape(str) {\n  str = (str === null || str === undefined) ? '' : str;\n  return r.markSafe(lib.escape(str.toString()));\n}\n\nexports.forceescape = forceescape;\n\nfunction groupby(arr, attr) {\n  return lib.groupBy(arr, attr, this.env.opts.throwOnUndefined);\n}\n\nexports.groupby = groupby;\n\nfunction indent(str, width, indentfirst) {\n  str = normalize(str, '');\n\n  if (str === '') {\n    return '';\n  }\n\n  width = width || 4;\n  // let res = '';\n  const lines = str.split('\\n');\n  const sp = lib.repeat(' ', width);\n\n  const res = lines.map((l, i) => {\n    return (i === 0 && !indentfirst) ? l : `${sp}${l}`;\n  }).join('\\n');\n\n  return r.copySafeness(str, res);\n}\n\nexports.indent = indent;\n\nfunction join(arr, del, attr) {\n  del = del || '';\n\n  if (attr) {\n    arr = lib.map(arr, (v) => v[attr]);\n  }\n\n  return arr.join(del);\n}\n\nexports.join = join;\n\nfunction last(arr) {\n  return arr[arr.length - 1];\n}\n\nexports.last = last;\n\nfunction lengthFilter(val) {\n  var value = normalize(val, '');\n\n  if (value !== undefined) {\n    if (\n      (typeof Map === 'function' && value instanceof Map) ||\n      (typeof Set === 'function' && value instanceof Set)\n    ) {\n      // ECMAScript 2015 Maps and Sets\n      return value.size;\n    }\n    if (lib.isObject(value) && !(value instanceof r.SafeString)) {\n      // Objects (besides SafeStrings), non-primative Arrays\n      return lib.keys(value).length;\n    }\n    return value.length;\n  }\n  return 0;\n}\n\nexports.length = lengthFilter;\n\nfunction list(val) {\n  if (lib.isString(val)) {\n    return val.split('');\n  } else if (lib.isObject(val)) {\n    return lib._entries(val || {}).map(([key, value]) => ({key, value}));\n  } else if (lib.isArray(val)) {\n    return val;\n  } else {\n    throw new lib.TemplateError('list filter: type not iterable');\n  }\n}\n\nexports.list = list;\n\nfunction lower(str) {\n  str = normalize(str, '');\n  return str.toLowerCase();\n}\n\nexports.lower = lower;\n\nfunction nl2br(str) {\n  if (str === null || str === undefined) {\n    return '';\n  }\n  return r.copySafeness(str, str.replace(/\\r\\n|\\n/g, '<br />\\n'));\n}\n\nexports.nl2br = nl2br;\n\nfunction random(arr) {\n  return arr[Math.floor(Math.random() * arr.length)];\n}\n\nexports.random = random;\n\n/**\n * Construct select or reject filter\n *\n * @param {boolean} expectedTestResult\n * @returns {function(array, string, *): array}\n */\nfunction getSelectOrReject(expectedTestResult) {\n  function filter(arr, testName = 'truthy', secondArg) {\n    const context = this;\n    const test = context.env.getTest(testName);\n\n    return lib.toArray(arr).filter(function examineTestResult(item) {\n      return test.call(context, item, secondArg) === expectedTestResult;\n    });\n  }\n\n  return filter;\n}\n\nexports.reject = getSelectOrReject(false);\n\nfunction rejectattr(arr, attr) {\n  return arr.filter((item) => !item[attr]);\n}\n\nexports.rejectattr = rejectattr;\n\nexports.select = getSelectOrReject(true);\n\nfunction selectattr(arr, attr) {\n  return arr.filter((item) => !!item[attr]);\n}\n\nexports.selectattr = selectattr;\n\nfunction replace(str, old, new_, maxCount) {\n  var originalStr = str;\n\n  if (old instanceof RegExp) {\n    return str.replace(old, new_);\n  }\n\n  if (typeof maxCount === 'undefined') {\n    maxCount = -1;\n  }\n\n  let res = ''; // Output\n\n  // Cast Numbers in the search term to string\n  if (typeof old === 'number') {\n    old = '' + old;\n  } else if (typeof old !== 'string') {\n    // If it is something other than number or string,\n    // return the original string\n    return str;\n  }\n\n  // Cast numbers in the replacement to string\n  if (typeof str === 'number') {\n    str = '' + str;\n  }\n\n  // If by now, we don't have a string, throw it back\n  if (typeof str !== 'string' && !(str instanceof r.SafeString)) {\n    return str;\n  }\n\n  // ShortCircuits\n  if (old === '') {\n    // Mimic the python behaviour: empty string is replaced\n    // by replacement e.g. \"abc\"|replace(\"\", \".\") -> .a.b.c.\n    res = new_ + str.split('').join(new_) + new_;\n    return r.copySafeness(str, res);\n  }\n\n  let nextIndex = str.indexOf(old);\n  // if # of replacements to perform is 0, or the string to does\n  // not contain the old value, return the string\n  if (maxCount === 0 || nextIndex === -1) {\n    return str;\n  }\n\n  let pos = 0;\n  let count = 0; // # of replacements made\n\n  while (nextIndex > -1 && (maxCount === -1 || count < maxCount)) {\n    // Grab the next chunk of src string and add it with the\n    // replacement, to the result\n    res += str.substring(pos, nextIndex) + new_;\n    // Increment our pointer in the src string\n    pos = nextIndex + old.length;\n    count++;\n    // See if there are any more replacements to be made\n    nextIndex = str.indexOf(old, pos);\n  }\n\n  // We've either reached the end, or done the max # of\n  // replacements, tack on any remaining string\n  if (pos < str.length) {\n    res += str.substring(pos);\n  }\n\n  return r.copySafeness(originalStr, res);\n}\n\nexports.replace = replace;\n\nfunction reverse(val) {\n  var arr;\n  if (lib.isString(val)) {\n    arr = list(val);\n  } else {\n    // Copy it\n    arr = lib.map(val, v => v);\n  }\n\n  arr.reverse();\n\n  if (lib.isString(val)) {\n    return r.copySafeness(val, arr.join(''));\n  }\n  return arr;\n}\n\nexports.reverse = reverse;\n\nfunction round(val, precision, method) {\n  precision = precision || 0;\n  const factor = Math.pow(10, precision);\n  let rounder;\n\n  if (method === 'ceil') {\n    rounder = Math.ceil;\n  } else if (method === 'floor') {\n    rounder = Math.floor;\n  } else {\n    rounder = Math.round;\n  }\n\n  return rounder(val * factor) / factor;\n}\n\nexports.round = round;\n\nfunction slice(arr, slices, fillWith) {\n  const sliceLength = Math.floor(arr.length / slices);\n  const extra = arr.length % slices;\n  const res = [];\n  let offset = 0;\n\n  for (let i = 0; i < slices; i++) {\n    const start = offset + (i * sliceLength);\n    if (i < extra) {\n      offset++;\n    }\n    const end = offset + ((i + 1) * sliceLength);\n\n    const currSlice = arr.slice(start, end);\n    if (fillWith && i >= extra) {\n      currSlice.push(fillWith);\n    }\n    res.push(currSlice);\n  }\n\n  return res;\n}\n\nexports.slice = slice;\n\nfunction sum(arr, attr, start = 0) {\n  if (attr) {\n    arr = lib.map(arr, (v) => v[attr]);\n  }\n\n  return start + arr.reduce((a, b) => a + b, 0);\n}\n\nexports.sum = sum;\n\nexports.sort = r.makeMacro(\n  ['value', 'reverse', 'case_sensitive', 'attribute'], [],\n  function sortFilter(arr, reversed, caseSens, attr) {\n    // Copy it\n    let array = lib.map(arr, v => v);\n    let getAttribute = lib.getAttrGetter(attr);\n\n    array.sort((a, b) => {\n      let x = (attr) ? getAttribute(a) : a;\n      let y = (attr) ? getAttribute(b) : b;\n\n      if (\n        this.env.opts.throwOnUndefined &&\n        attr && (x === undefined || y === undefined)\n      ) {\n        throw new TypeError(`sort: attribute \"${attr}\" resolved to undefined`);\n      }\n\n      if (!caseSens && lib.isString(x) && lib.isString(y)) {\n        x = x.toLowerCase();\n        y = y.toLowerCase();\n      }\n\n      if (x < y) {\n        return reversed ? 1 : -1;\n      } else if (x > y) {\n        return reversed ? -1 : 1;\n      } else {\n        return 0;\n      }\n    });\n\n    return array;\n  });\n\nfunction string(obj) {\n  return r.copySafeness(obj, obj);\n}\n\nexports.string = string;\n\nfunction striptags(input, preserveLinebreaks) {\n  input = normalize(input, '');\n  let tags = /<\\/?([a-z][a-z0-9]*)\\b[^>]*>|<!--[\\s\\S]*?-->/gi;\n  let trimmedInput = trim(input.replace(tags, ''));\n  let res = '';\n  if (preserveLinebreaks) {\n    res = trimmedInput\n      .replace(/^ +| +$/gm, '') // remove leading and trailing spaces\n      .replace(/ +/g, ' ') // squash adjacent spaces\n      .replace(/(\\r\\n)/g, '\\n') // normalize linebreaks (CRLF -> LF)\n      .replace(/\\n\\n\\n+/g, '\\n\\n'); // squash abnormal adjacent linebreaks\n  } else {\n    res = trimmedInput.replace(/\\s+/gi, ' ');\n  }\n  return r.copySafeness(input, res);\n}\n\nexports.striptags = striptags;\n\nfunction title(str) {\n  str = normalize(str, '');\n  let words = str.split(' ').map(word => capitalize(word));\n  return r.copySafeness(str, words.join(' '));\n}\n\nexports.title = title;\n\nfunction trim(str) {\n  return r.copySafeness(str, str.replace(/^\\s*|\\s*$/g, ''));\n}\n\nexports.trim = trim;\n\nfunction truncate(input, length, killwords, end) {\n  var orig = input;\n  input = normalize(input, '');\n  length = length || 255;\n\n  if (input.length <= length) {\n    return input;\n  }\n\n  if (killwords) {\n    input = input.substring(0, length);\n  } else {\n    let idx = input.lastIndexOf(' ', length);\n    if (idx === -1) {\n      idx = length;\n    }\n\n    input = input.substring(0, idx);\n  }\n\n  input += (end !== undefined && end !== null) ? end : '...';\n  return r.copySafeness(orig, input);\n}\n\nexports.truncate = truncate;\n\nfunction upper(str) {\n  str = normalize(str, '');\n  return str.toUpperCase();\n}\n\nexports.upper = upper;\n\nfunction urlencode(obj) {\n  var enc = encodeURIComponent;\n  if (lib.isString(obj)) {\n    return enc(obj);\n  } else {\n    let keyvals = (lib.isArray(obj)) ? obj : lib._entries(obj);\n    return keyvals.map(([k, v]) => `${enc(k)}=${enc(v)}`).join('&');\n  }\n}\n\nexports.urlencode = urlencode;\n\n// For the jinja regexp, see\n// https://github.com/mitsuhiko/jinja2/blob/f15b814dcba6aa12bc74d1f7d0c881d55f7126be/jinja2/utils.py#L20-L23\nconst puncRe = /^(?:\\(|<|&lt;)?(.*?)(?:\\.|,|\\)|\\n|&gt;)?$/;\n// from http://blog.gerv.net/2011/05/html5_email_address_regexp/\nconst emailRe = /^[\\w.!#$%&'*+\\-\\/=?\\^`{|}~]+@[a-z\\d\\-]+(\\.[a-z\\d\\-]+)+$/i;\nconst httpHttpsRe = /^https?:\\/\\/.*$/;\nconst wwwRe = /^www\\./;\nconst tldRe = /\\.(?:org|net|com)(?:\\:|\\/|$)/;\n\nfunction urlize(str, length, nofollow) {\n  if (isNaN(length)) {\n    length = Infinity;\n  }\n\n  const noFollowAttr = (nofollow === true ? ' rel=\"nofollow\"' : '');\n\n  const words = str.split(/(\\s+)/).filter((word) => {\n    // If the word has no length, bail. This can happen for str with\n    // trailing whitespace.\n    return word && word.length;\n  }).map((word) => {\n    var matches = word.match(puncRe);\n    var possibleUrl = (matches) ? matches[1] : word;\n    var shortUrl = possibleUrl.substr(0, length);\n\n    // url that starts with http or https\n    if (httpHttpsRe.test(possibleUrl)) {\n      return `<a href=\"${possibleUrl}\"${noFollowAttr}>${shortUrl}</a>`;\n    }\n\n    // url that starts with www.\n    if (wwwRe.test(possibleUrl)) {\n      return `<a href=\"http://${possibleUrl}\"${noFollowAttr}>${shortUrl}</a>`;\n    }\n\n    // an email address of the form username@domain.tld\n    if (emailRe.test(possibleUrl)) {\n      return `<a href=\"mailto:${possibleUrl}\">${possibleUrl}</a>`;\n    }\n\n    // url that ends in .com, .org or .net that is not an email address\n    if (tldRe.test(possibleUrl)) {\n      return `<a href=\"http://${possibleUrl}\"${noFollowAttr}>${shortUrl}</a>`;\n    }\n\n    return word;\n  });\n\n  return words.join('');\n}\n\nexports.urlize = urlize;\n\nfunction wordcount(str) {\n  str = normalize(str, '');\n  const words = (str) ? str.match(/\\w+/g) : null;\n  return (words) ? words.length : null;\n}\n\nexports.wordcount = wordcount;\n\nfunction float(val, def) {\n  var res = parseFloat(val);\n  return (isNaN(res)) ? def : res;\n}\n\nexports.float = float;\n\nconst intFilter = r.makeMacro(\n  ['value', 'default', 'base'],\n  [],\n  function doInt(value, defaultValue, base = 10) {\n    var res = parseInt(value, base);\n    return (isNaN(res)) ? defaultValue : res;\n  }\n);\n\nexports.int = intFilter;\n\n// Aliases\nexports.d = exports.default;\nexports.e = exports.escape;\n","// MIT license (by Elan Shanker).\n(function(globals) {\n  'use strict';\n\n  var executeSync = function(){\n    var args = Array.prototype.slice.call(arguments);\n    if (typeof args[0] === 'function'){\n      args[0].apply(null, args.splice(1));\n    }\n  };\n\n  var executeAsync = function(fn){\n    if (typeof setImmediate === 'function') {\n      setImmediate(fn);\n    } else if (typeof process !== 'undefined' && process.nextTick) {\n      process.nextTick(fn);\n    } else {\n      setTimeout(fn, 0);\n    }\n  };\n\n  var makeIterator = function (tasks) {\n    var makeCallback = function (index) {\n      var fn = function () {\n        if (tasks.length) {\n          tasks[index].apply(null, arguments);\n        }\n        return fn.next();\n      };\n      fn.next = function () {\n        return (index < tasks.length - 1) ? makeCallback(index + 1): null;\n      };\n      return fn;\n    };\n    return makeCallback(0);\n  };\n  \n  var _isArray = Array.isArray || function(maybeArray){\n    return Object.prototype.toString.call(maybeArray) === '[object Array]';\n  };\n\n  var waterfall = function (tasks, callback, forceAsync) {\n    var nextTick = forceAsync ? executeAsync : executeSync;\n    callback = callback || function () {};\n    if (!_isArray(tasks)) {\n      var err = new Error('First argument to waterfall must be an array of functions');\n      return callback(err);\n    }\n    if (!tasks.length) {\n      return callback();\n    }\n    var wrapIterator = function (iterator) {\n      return function (err) {\n        if (err) {\n          callback.apply(null, arguments);\n          callback = function () {};\n        } else {\n          var args = Array.prototype.slice.call(arguments, 1);\n          var next = iterator.next();\n          if (next) {\n            args.push(wrapIterator(next));\n          } else {\n            args.push(callback);\n          }\n          nextTick(function () {\n            iterator.apply(null, args);\n          });\n        }\n      };\n    };\n    wrapIterator(makeIterator(tasks))();\n  };\n\n  if (typeof define !== 'undefined' && define.amd) {\n    define([], function () {\n      return waterfall;\n    }); // RequireJS\n  } else if (typeof module !== 'undefined' && module.exports) {\n    module.exports = waterfall; // CommonJS\n  } else {\n    globals.waterfall = waterfall; // <script>\n  }\n})(this);\n","\"use strict\";\n\n// rawAsap provides everything we need except exception management.\nvar rawAsap = require(\"./raw\");\n// RawTasks are recycled to reduce GC churn.\nvar freeTasks = [];\n// We queue errors to ensure they are thrown in right order (FIFO).\n// Array-as-queue is good enough here, since we are just dealing with exceptions.\nvar pendingErrors = [];\nvar requestErrorThrow = rawAsap.makeRequestCallFromTimer(throwFirstError);\n\nfunction throwFirstError() {\n    if (pendingErrors.length) {\n        throw pendingErrors.shift();\n    }\n}\n\n/**\n * Calls a task as soon as possible after returning, in its own event, with priority\n * over other events like animation, reflow, and repaint. An error thrown from an\n * event will not interrupt, nor even substantially slow down the processing of\n * other events, but will be rather postponed to a lower priority event.\n * @param {{call}} task A callable object, typically a function that takes no\n * arguments.\n */\nmodule.exports = asap;\nfunction asap(task) {\n    var rawTask;\n    if (freeTasks.length) {\n        rawTask = freeTasks.pop();\n    } else {\n        rawTask = new RawTask();\n    }\n    rawTask.task = task;\n    rawAsap(rawTask);\n}\n\n// We wrap tasks with recyclable task objects.  A task object implements\n// `call`, just like a function.\nfunction RawTask() {\n    this.task = null;\n}\n\n// The sole purpose of wrapping the task is to catch the exception and recycle\n// the task object after its single use.\nRawTask.prototype.call = function () {\n    try {\n        this.task.call();\n    } catch (error) {\n        if (asap.onerror) {\n            // This hook exists purely for testing purposes.\n            // Its name will be periodically randomized to break any code that\n            // depends on its existence.\n            asap.onerror(error);\n        } else {\n            // In a web browser, exceptions are not fatal. However, to avoid\n            // slowing down the queue of pending tasks, we rethrow the error in a\n            // lower priority turn.\n            pendingErrors.push(error);\n            requestErrorThrow();\n        }\n    } finally {\n        this.task = null;\n        freeTasks[freeTasks.length] = this;\n    }\n};\n","'use strict';\n\nvar nodes = require('./nodes');\nvar lib = require('./lib');\n\nvar sym = 0;\nfunction gensym() {\n  return 'hole_' + sym++;\n}\n\n// copy-on-write version of map\nfunction mapCOW(arr, func) {\n  var res = null;\n  for (let i = 0; i < arr.length; i++) {\n    const item = func(arr[i]);\n\n    if (item !== arr[i]) {\n      if (!res) {\n        res = arr.slice();\n      }\n\n      res[i] = item;\n    }\n  }\n\n  return res || arr;\n}\n\nfunction walk(ast, func, depthFirst) {\n  if (!(ast instanceof nodes.Node)) {\n    return ast;\n  }\n\n  if (!depthFirst) {\n    const astT = func(ast);\n\n    if (astT && astT !== ast) {\n      return astT;\n    }\n  }\n\n  if (ast instanceof nodes.NodeList) {\n    const children = mapCOW(ast.children, (node) => walk(node, func, depthFirst));\n\n    if (children !== ast.children) {\n      ast = new nodes[ast.typename](ast.lineno, ast.colno, children);\n    }\n  } else if (ast instanceof nodes.CallExtension) {\n    const args = walk(ast.args, func, depthFirst);\n    const contentArgs = mapCOW(ast.contentArgs, (node) => walk(node, func, depthFirst));\n\n    if (args !== ast.args || contentArgs !== ast.contentArgs) {\n      ast = new nodes[ast.typename](ast.extName, ast.prop, args, contentArgs);\n    }\n  } else {\n    const props = ast.fields.map((field) => ast[field]);\n    const propsT = mapCOW(props, (prop) => walk(prop, func, depthFirst));\n\n    if (propsT !== props) {\n      ast = new nodes[ast.typename](ast.lineno, ast.colno);\n      propsT.forEach((prop, i) => {\n        ast[ast.fields[i]] = prop;\n      });\n    }\n  }\n\n  return depthFirst ? (func(ast) || ast) : ast;\n}\n\nfunction depthWalk(ast, func) {\n  return walk(ast, func, true);\n}\n\nfunction _liftFilters(node, asyncFilters, prop) {\n  var children = [];\n\n  var walked = depthWalk(prop ? node[prop] : node, (descNode) => {\n    let symbol;\n    if (descNode instanceof nodes.Block) {\n      return descNode;\n    } else if ((descNode instanceof nodes.Filter &&\n      lib.indexOf(asyncFilters, descNode.name.value) !== -1) ||\n      descNode instanceof nodes.CallExtensionAsync) {\n      symbol = new nodes.Symbol(descNode.lineno,\n        descNode.colno,\n        gensym());\n\n      children.push(new nodes.FilterAsync(descNode.lineno,\n        descNode.colno,\n        descNode.name,\n        descNode.args,\n        symbol));\n    }\n    return symbol;\n  });\n\n  if (prop) {\n    node[prop] = walked;\n  } else {\n    node = walked;\n  }\n\n  if (children.length) {\n    children.push(node);\n\n    return new nodes.NodeList(\n      node.lineno,\n      node.colno,\n      children\n    );\n  } else {\n    return node;\n  }\n}\n\nfunction liftFilters(ast, asyncFilters) {\n  return depthWalk(ast, (node) => {\n    if (node instanceof nodes.Output) {\n      return _liftFilters(node, asyncFilters);\n    } else if (node instanceof nodes.Set) {\n      return _liftFilters(node, asyncFilters, 'value');\n    } else if (node instanceof nodes.For) {\n      return _liftFilters(node, asyncFilters, 'arr');\n    } else if (node instanceof nodes.If) {\n      return _liftFilters(node, asyncFilters, 'cond');\n    } else if (node instanceof nodes.CallExtension) {\n      return _liftFilters(node, asyncFilters, 'args');\n    } else {\n      return undefined;\n    }\n  });\n}\n\nfunction liftSuper(ast) {\n  return walk(ast, (blockNode) => {\n    if (!(blockNode instanceof nodes.Block)) {\n      return;\n    }\n\n    let hasSuper = false;\n    const symbol = gensym();\n\n    blockNode.body = walk(blockNode.body, (node) => { // eslint-disable-line consistent-return\n      if (node instanceof nodes.FunCall && node.name.value === 'super') {\n        hasSuper = true;\n        return new nodes.Symbol(node.lineno, node.colno, symbol);\n      }\n    });\n\n    if (hasSuper) {\n      blockNode.body.children.unshift(new nodes.Super(\n        0, 0, blockNode.name, new nodes.Symbol(0, 0, symbol)\n      ));\n    }\n  });\n}\n\nfunction convertStatements(ast) {\n  return depthWalk(ast, (node) => {\n    if (!(node instanceof nodes.If) && !(node instanceof nodes.For)) {\n      return undefined;\n    }\n\n    let async = false;\n    walk(node, (child) => {\n      if (child instanceof nodes.FilterAsync ||\n        child instanceof nodes.IfAsync ||\n        child instanceof nodes.AsyncEach ||\n        child instanceof nodes.AsyncAll ||\n        child instanceof nodes.CallExtensionAsync) {\n        async = true;\n        // Stop iterating by returning the node\n        return child;\n      }\n      return undefined;\n    });\n\n    if (async) {\n      if (node instanceof nodes.If) {\n        return new nodes.IfAsync(\n          node.lineno,\n          node.colno,\n          node.cond,\n          node.body,\n          node.else_\n        );\n      } else if (node instanceof nodes.For && !(node instanceof nodes.AsyncAll)) {\n        return new nodes.AsyncEach(\n          node.lineno,\n          node.colno,\n          node.arr,\n          node.name,\n          node.body,\n          node.else_\n        );\n      }\n    }\n    return undefined;\n  });\n}\n\nfunction cps(ast, asyncFilters) {\n  return convertStatements(liftSuper(liftFilters(ast, asyncFilters)));\n}\n\nfunction transform(ast, asyncFilters) {\n  return cps(ast, asyncFilters || []);\n}\n\n// var parser = require('./parser');\n// var src = 'hello {% foo %}{% endfoo %} end';\n// var ast = transform(parser.parse(src, [new FooExtension()]), ['bar']);\n// nodes.printNodes(ast);\n\nmodule.exports = {\n  transform: transform\n};\n","'use strict';\n\nvar SafeString = require('./runtime').SafeString;\n\n/**\n * Returns `true` if the object is a function, otherwise `false`.\n * @param { any } value\n * @returns { boolean }\n */\nfunction callable(value) {\n  return typeof value === 'function';\n}\n\nexports.callable = callable;\n\n/**\n * Returns `true` if the object is strictly not `undefined`.\n * @param { any } value\n * @returns { boolean }\n */\nfunction defined(value) {\n  return value !== undefined;\n}\n\nexports.defined = defined;\n\n/**\n * Returns `true` if the operand (one) is divisble by the test's argument\n * (two).\n * @param { number } one\n * @param { number } two\n * @returns { boolean }\n */\nfunction divisibleby(one, two) {\n  return (one % two) === 0;\n}\n\nexports.divisibleby = divisibleby;\n\n/**\n * Returns true if the string has been escaped (i.e., is a SafeString).\n * @param { any } value\n * @returns { boolean }\n */\nfunction escaped(value) {\n  return value instanceof SafeString;\n}\n\nexports.escaped = escaped;\n\n/**\n * Returns `true` if the arguments are strictly equal.\n * @param { any } one\n * @param { any } two\n */\nfunction equalto(one, two) {\n  return one === two;\n}\n\nexports.equalto = equalto;\n\n// Aliases\nexports.eq = exports.equalto;\nexports.sameas = exports.equalto;\n\n/**\n * Returns `true` if the value is evenly divisible by 2.\n * @param { number } value\n * @returns { boolean }\n */\nfunction even(value) {\n  return value % 2 === 0;\n}\n\nexports.even = even;\n\n/**\n * Returns `true` if the value is falsy - if I recall correctly, '', 0, false,\n * undefined, NaN or null. I don't know if we should stick to the default JS\n * behavior or attempt to replicate what Python believes should be falsy (i.e.,\n * empty arrays, empty dicts, not 0...).\n * @param { any } value\n * @returns { boolean }\n */\nfunction falsy(value) {\n  return !value;\n}\n\nexports.falsy = falsy;\n\n/**\n * Returns `true` if the operand (one) is greater or equal to the test's\n * argument (two).\n * @param { number } one\n * @param { number } two\n * @returns { boolean }\n */\nfunction ge(one, two) {\n  return one >= two;\n}\n\nexports.ge = ge;\n\n/**\n * Returns `true` if the operand (one) is greater than the test's argument\n * (two).\n * @param { number } one\n * @param { number } two\n * @returns { boolean }\n */\nfunction greaterthan(one, two) {\n  return one > two;\n}\n\nexports.greaterthan = greaterthan;\n\n// alias\nexports.gt = exports.greaterthan;\n\n/**\n * Returns `true` if the operand (one) is less than or equal to the test's\n * argument (two).\n * @param { number } one\n * @param { number } two\n * @returns { boolean }\n */\nfunction le(one, two) {\n  return one <= two;\n}\n\nexports.le = le;\n\n/**\n * Returns `true` if the operand (one) is less than the test's passed argument\n * (two).\n * @param { number } one\n * @param { number } two\n * @returns { boolean }\n */\nfunction lessthan(one, two) {\n  return one < two;\n}\n\nexports.lessthan = lessthan;\n\n// alias\nexports.lt = exports.lessthan;\n\n/**\n * Returns `true` if the string is lowercased.\n * @param { string } value\n * @returns { boolean }\n */\nfunction lower(value) {\n  return value.toLowerCase() === value;\n}\n\nexports.lower = lower;\n\n/**\n * Returns `true` if the operand (one) is less than or equal to the test's\n * argument (two).\n * @param { number } one\n * @param { number } two\n * @returns { boolean }\n */\nfunction ne(one, two) {\n  return one !== two;\n}\n\nexports.ne = ne;\n\n/**\n * Returns true if the value is strictly equal to `null`.\n * @param { any }\n * @returns { boolean }\n */\nfunction nullTest(value) {\n  return value === null;\n}\n\nexports.null = nullTest;\n\n/**\n * Returns true if value is a number.\n * @param { any }\n * @returns { boolean }\n */\nfunction number(value) {\n  return typeof value === 'number';\n}\n\nexports.number = number;\n\n/**\n * Returns `true` if the value is *not* evenly divisible by 2.\n * @param { number } value\n * @returns { boolean }\n */\nfunction odd(value) {\n  return value % 2 === 1;\n}\n\nexports.odd = odd;\n\n/**\n * Returns `true` if the value is a string, `false` if not.\n * @param { any } value\n * @returns { boolean }\n */\nfunction string(value) {\n  return typeof value === 'string';\n}\n\nexports.string = string;\n\n/**\n * Returns `true` if the value is not in the list of things considered falsy:\n * '', null, undefined, 0, NaN and false.\n * @param { any } value\n * @returns { boolean }\n */\nfunction truthy(value) {\n  return !!value;\n}\n\nexports.truthy = truthy;\n\n/**\n * Returns `true` if the value is undefined.\n * @param { any } value\n * @returns { boolean }\n */\nfunction undefinedTest(value) {\n  return value === undefined;\n}\n\nexports.undefined = undefinedTest;\n\n/**\n * Returns `true` if the string is uppercased.\n * @param { string } value\n * @returns { boolean }\n */\nfunction upper(value) {\n  return value.toUpperCase() === value;\n}\n\nexports.upper = upper;\n\n/**\n * If ES6 features are available, returns `true` if the value implements the\n * `Symbol.iterator` method. If not, it's a string or Array.\n *\n * Could potentially cause issues if a browser exists that has Set and Map but\n * not Symbol.\n *\n * @param { any } value\n * @returns { boolean }\n */\nfunction iterable(value) {\n  if (typeof Symbol !== 'undefined') {\n    return !!value[Symbol.iterator];\n  } else {\n    return Array.isArray(value) || typeof value === 'string';\n  }\n}\n\nexports.iterable = iterable;\n\n/**\n * If ES6 features are available, returns `true` if the value is an object hash\n * or an ES6 Map. Otherwise just return if it's an object hash.\n * @param { any } value\n * @returns { boolean }\n */\nfunction mapping(value) {\n  // only maps and object hashes\n  var bool = value !== null\n    && value !== undefined\n    && typeof value === 'object'\n    && !Array.isArray(value);\n  if (Set) {\n    return bool && !(value instanceof Set);\n  } else {\n    return bool;\n  }\n}\n\nexports.mapping = mapping;\n","function installCompat() {\n  'use strict';\n\n  /* eslint-disable camelcase */\n\n  // This must be called like `nunjucks.installCompat` so that `this`\n  // references the nunjucks instance\n  var runtime = this.runtime;\n  var lib = this.lib;\n  // Handle slim case where these 'modules' are excluded from the built source\n  var Compiler = this.compiler.Compiler;\n  var Parser = this.parser.Parser;\n  var nodes = this.nodes;\n  var lexer = this.lexer;\n\n  var orig_contextOrFrameLookup = runtime.contextOrFrameLookup;\n  var orig_memberLookup = runtime.memberLookup;\n  var orig_Compiler_assertType;\n  var orig_Parser_parseAggregate;\n  if (Compiler) {\n    orig_Compiler_assertType = Compiler.prototype.assertType;\n  }\n  if (Parser) {\n    orig_Parser_parseAggregate = Parser.prototype.parseAggregate;\n  }\n\n  function uninstall() {\n    runtime.contextOrFrameLookup = orig_contextOrFrameLookup;\n    runtime.memberLookup = orig_memberLookup;\n    if (Compiler) {\n      Compiler.prototype.assertType = orig_Compiler_assertType;\n    }\n    if (Parser) {\n      Parser.prototype.parseAggregate = orig_Parser_parseAggregate;\n    }\n  }\n\n  runtime.contextOrFrameLookup = function contextOrFrameLookup(context, frame, key) {\n    var val = orig_contextOrFrameLookup.apply(this, arguments);\n    if (val !== undefined) {\n      return val;\n    }\n    switch (key) {\n      case 'True':\n        return true;\n      case 'False':\n        return false;\n      case 'None':\n        return null;\n      default:\n        return undefined;\n    }\n  };\n\n  function getTokensState(tokens) {\n    return {\n      index: tokens.index,\n      lineno: tokens.lineno,\n      colno: tokens.colno\n    };\n  }\n\n  if (process.env.BUILD_TYPE !== 'SLIM' && nodes && Compiler && Parser) { // i.e., not slim mode\n    const Slice = nodes.Node.extend('Slice', {\n      fields: ['start', 'stop', 'step'],\n      init(lineno, colno, start, stop, step) {\n        start = start || new nodes.Literal(lineno, colno, null);\n        stop = stop || new nodes.Literal(lineno, colno, null);\n        step = step || new nodes.Literal(lineno, colno, 1);\n        this.parent(lineno, colno, start, stop, step);\n      }\n    });\n\n    Compiler.prototype.assertType = function assertType(node) {\n      if (node instanceof Slice) {\n        return;\n      }\n      orig_Compiler_assertType.apply(this, arguments);\n    };\n    Compiler.prototype.compileSlice = function compileSlice(node, frame) {\n      this._emit('(');\n      this._compileExpression(node.start, frame);\n      this._emit('),(');\n      this._compileExpression(node.stop, frame);\n      this._emit('),(');\n      this._compileExpression(node.step, frame);\n      this._emit(')');\n    };\n\n    Parser.prototype.parseAggregate = function parseAggregate() {\n      var origState = getTokensState(this.tokens);\n      // Set back one accounting for opening bracket/parens\n      origState.colno--;\n      origState.index--;\n      try {\n        return orig_Parser_parseAggregate.apply(this);\n      } catch (e) {\n        const errState = getTokensState(this.tokens);\n        const rethrow = () => {\n          lib._assign(this.tokens, errState);\n          return e;\n        };\n\n        // Reset to state before original parseAggregate called\n        lib._assign(this.tokens, origState);\n        this.peeked = false;\n\n        const tok = this.peekToken();\n        if (tok.type !== lexer.TOKEN_LEFT_BRACKET) {\n          throw rethrow();\n        } else {\n          this.nextToken();\n        }\n\n        const node = new Slice(tok.lineno, tok.colno);\n\n        // If we don't encounter a colon while parsing, this is not a slice,\n        // so re-raise the original exception.\n        let isSlice = false;\n\n        for (let i = 0; i <= node.fields.length; i++) {\n          if (this.skip(lexer.TOKEN_RIGHT_BRACKET)) {\n            break;\n          }\n          if (i === node.fields.length) {\n            if (isSlice) {\n              this.fail('parseSlice: too many slice components', tok.lineno, tok.colno);\n            } else {\n              break;\n            }\n          }\n          if (this.skip(lexer.TOKEN_COLON)) {\n            isSlice = true;\n          } else {\n            const field = node.fields[i];\n            node[field] = this.parseExpression();\n            isSlice = this.skip(lexer.TOKEN_COLON) || isSlice;\n          }\n        }\n        if (!isSlice) {\n          throw rethrow();\n        }\n        return new nodes.Array(tok.lineno, tok.colno, [node]);\n      }\n    };\n  }\n\n  function sliceLookup(obj, start, stop, step) {\n    obj = obj || [];\n    if (start === null) {\n      start = (step < 0) ? (obj.length - 1) : 0;\n    }\n    if (stop === null) {\n      stop = (step < 0) ? -1 : obj.length;\n    } else if (stop < 0) {\n      stop += obj.length;\n    }\n\n    if (start < 0) {\n      start += obj.length;\n    }\n\n    const results = [];\n\n    for (let i = start; ; i += step) {\n      if (i < 0 || i > obj.length) {\n        break;\n      }\n      if (step > 0 && i >= stop) {\n        break;\n      }\n      if (step < 0 && i <= stop) {\n        break;\n      }\n      results.push(runtime.memberLookup(obj, i));\n    }\n    return results;\n  }\n\n  function hasOwnProp(obj, key) {\n    return Object.prototype.hasOwnProperty.call(obj, key);\n  }\n\n  const ARRAY_MEMBERS = {\n    pop(index) {\n      if (index === undefined) {\n        return this.pop();\n      }\n      if (index >= this.length || index < 0) {\n        throw new Error('KeyError');\n      }\n      return this.splice(index, 1);\n    },\n    append(element) {\n      return this.push(element);\n    },\n    remove(element) {\n      for (let i = 0; i < this.length; i++) {\n        if (this[i] === element) {\n          return this.splice(i, 1);\n        }\n      }\n      throw new Error('ValueError');\n    },\n    count(element) {\n      var count = 0;\n      for (let i = 0; i < this.length; i++) {\n        if (this[i] === element) {\n          count++;\n        }\n      }\n      return count;\n    },\n    index(element) {\n      var i;\n      if ((i = this.indexOf(element)) === -1) {\n        throw new Error('ValueError');\n      }\n      return i;\n    },\n    find(element) {\n      return this.indexOf(element);\n    },\n    insert(index, elem) {\n      return this.splice(index, 0, elem);\n    }\n  };\n  const OBJECT_MEMBERS = {\n    items() {\n      return lib._entries(this);\n    },\n    values() {\n      return lib._values(this);\n    },\n    keys() {\n      return lib.keys(this);\n    },\n    get(key, def) {\n      var output = this[key];\n      if (output === undefined) {\n        output = def;\n      }\n      return output;\n    },\n    has_key(key) {\n      return hasOwnProp(this, key);\n    },\n    pop(key, def) {\n      var output = this[key];\n      if (output === undefined && def !== undefined) {\n        output = def;\n      } else if (output === undefined) {\n        throw new Error('KeyError');\n      } else {\n        delete this[key];\n      }\n      return output;\n    },\n    popitem() {\n      const keys = lib.keys(this);\n      if (!keys.length) {\n        throw new Error('KeyError');\n      }\n      const k = keys[0];\n      const val = this[k];\n      delete this[k];\n      return [k, val];\n    },\n    setdefault(key, def = null) {\n      if (!(key in this)) {\n        this[key] = def;\n      }\n      return this[key];\n    },\n    update(kwargs) {\n      lib._assign(this, kwargs);\n      return null; // Always returns None\n    }\n  };\n  OBJECT_MEMBERS.iteritems = OBJECT_MEMBERS.items;\n  OBJECT_MEMBERS.itervalues = OBJECT_MEMBERS.values;\n  OBJECT_MEMBERS.iterkeys = OBJECT_MEMBERS.keys;\n\n  runtime.memberLookup = function memberLookup(obj, val, autoescape) {\n    if (arguments.length === 4) {\n      return sliceLookup.apply(this, arguments);\n    }\n    obj = obj || {};\n\n    // If the object is an object, return any of the methods that Python would\n    // otherwise provide.\n    if (lib.isArray(obj) && hasOwnProp(ARRAY_MEMBERS, val)) {\n      return ARRAY_MEMBERS[val].bind(obj);\n    }\n    if (lib.isObject(obj) && hasOwnProp(OBJECT_MEMBERS, val)) {\n      return OBJECT_MEMBERS[val].bind(obj);\n    }\n\n    return orig_memberLookup.apply(this, arguments);\n  };\n\n  return uninstall;\n}\n\nmodule.exports = installCompat;\n","'use strict';\n\nvar lib = require('./lib');\nvar arrayFrom = Array.from;\nvar supportsIterators = (\n  typeof Symbol === 'function' && Symbol.iterator && typeof arrayFrom === 'function'\n);\n\n\n// Frames keep track of scoping both at compile-time and run-time so\n// we know how to access variables. Block tags can introduce special\n// variables, for example.\nclass Frame {\n  constructor(parent, isolateWrites) {\n    this.variables = Object.create(null);\n    this.parent = parent;\n    this.topLevel = false;\n    // if this is true, writes (set) should never propagate upwards past\n    // this frame to its parent (though reads may).\n    this.isolateWrites = isolateWrites;\n  }\n\n  set(name, val, resolveUp) {\n    // Allow variables with dots by automatically creating the\n    // nested structure\n    var parts = name.split('.');\n    var obj = this.variables;\n    var frame = this;\n\n    if (resolveUp) {\n      if ((frame = this.resolve(parts[0], true))) {\n        frame.set(name, val);\n        return;\n      }\n    }\n\n    for (let i = 0; i < parts.length - 1; i++) {\n      const id = parts[i];\n\n      if (!obj[id]) {\n        obj[id] = {};\n      }\n      obj = obj[id];\n    }\n\n    obj[parts[parts.length - 1]] = val;\n  }\n\n  get(name) {\n    var val = this.variables[name];\n    if (val !== undefined) {\n      return val;\n    }\n    return null;\n  }\n\n  lookup(name) {\n    var p = this.parent;\n    var val = this.variables[name];\n    if (val !== undefined) {\n      return val;\n    }\n    return p && p.lookup(name);\n  }\n\n  resolve(name, forWrite) {\n    var p = (forWrite && this.isolateWrites) ? undefined : this.parent;\n    var val = this.variables[name];\n    if (val !== undefined) {\n      return this;\n    }\n    return p && p.resolve(name);\n  }\n\n  push(isolateWrites) {\n    return new Frame(this, isolateWrites);\n  }\n\n  pop() {\n    return this.parent;\n  }\n}\n\nfunction makeMacro(argNames, kwargNames, func) {\n  return function macro(...macroArgs) {\n    var argCount = numArgs(macroArgs);\n    var args;\n    var kwargs = getKeywordArgs(macroArgs);\n\n    if (argCount > argNames.length) {\n      args = macroArgs.slice(0, argNames.length);\n\n      // Positional arguments that should be passed in as\n      // keyword arguments (essentially default values)\n      macroArgs.slice(args.length, argCount).forEach((val, i) => {\n        if (i < kwargNames.length) {\n          kwargs[kwargNames[i]] = val;\n        }\n      });\n      args.push(kwargs);\n    } else if (argCount < argNames.length) {\n      args = macroArgs.slice(0, argCount);\n\n      for (let i = argCount; i < argNames.length; i++) {\n        const arg = argNames[i];\n\n        // Keyword arguments that should be passed as\n        // positional arguments, i.e. the caller explicitly\n        // used the name of a positional arg\n        args.push(kwargs[arg]);\n        delete kwargs[arg];\n      }\n      args.push(kwargs);\n    } else {\n      args = macroArgs;\n    }\n\n    return func.apply(this, args);\n  };\n}\n\nfunction makeKeywordArgs(obj) {\n  obj.__keywords = true;\n  return obj;\n}\n\nfunction isKeywordArgs(obj) {\n  return obj && Object.prototype.hasOwnProperty.call(obj, '__keywords');\n}\n\nfunction getKeywordArgs(args) {\n  var len = args.length;\n  if (len) {\n    const lastArg = args[len - 1];\n    if (isKeywordArgs(lastArg)) {\n      return lastArg;\n    }\n  }\n  return {};\n}\n\nfunction numArgs(args) {\n  var len = args.length;\n  if (len === 0) {\n    return 0;\n  }\n\n  const lastArg = args[len - 1];\n  if (isKeywordArgs(lastArg)) {\n    return len - 1;\n  } else {\n    return len;\n  }\n}\n\n// A SafeString object indicates that the string should not be\n// autoescaped. This happens magically because autoescaping only\n// occurs on primitive string objects.\nfunction SafeString(val) {\n  if (typeof val !== 'string') {\n    return val;\n  }\n\n  this.val = val;\n  this.length = val.length;\n}\n\nSafeString.prototype = Object.create(String.prototype, {\n  length: {\n    writable: true,\n    configurable: true,\n    value: 0\n  }\n});\nSafeString.prototype.valueOf = function valueOf() {\n  return this.val;\n};\nSafeString.prototype.toString = function toString() {\n  return this.val;\n};\n\nfunction copySafeness(dest, target) {\n  if (dest instanceof SafeString) {\n    return new SafeString(target);\n  }\n  return target.toString();\n}\n\nfunction markSafe(val) {\n  var type = typeof val;\n\n  if (type === 'string') {\n    return new SafeString(val);\n  } else if (type !== 'function') {\n    return val;\n  } else {\n    return function wrapSafe(args) {\n      var ret = val.apply(this, arguments);\n\n      if (typeof ret === 'string') {\n        return new SafeString(ret);\n      }\n\n      return ret;\n    };\n  }\n}\n\nfunction suppressValue(val, autoescape) {\n  val = (val !== undefined && val !== null) ? val : '';\n\n  if (autoescape && !(val instanceof SafeString)) {\n    val = lib.escape(val.toString());\n  }\n\n  return val;\n}\n\nfunction ensureDefined(val, lineno, colno) {\n  if (val === null || val === undefined) {\n    throw new lib.TemplateError(\n      'attempted to output null or undefined value',\n      lineno + 1,\n      colno + 1\n    );\n  }\n  return val;\n}\n\nfunction memberLookup(obj, val) {\n  if (obj === undefined || obj === null) {\n    return undefined;\n  }\n\n  if (typeof obj[val] === 'function') {\n    return (...args) => obj[val].apply(obj, args);\n  }\n\n  return obj[val];\n}\n\nfunction callWrap(obj, name, context, args) {\n  if (!obj) {\n    throw new Error('Unable to call `' + name + '`, which is undefined or falsey');\n  } else if (typeof obj !== 'function') {\n    throw new Error('Unable to call `' + name + '`, which is not a function');\n  }\n\n  return obj.apply(context, args);\n}\n\nfunction contextOrFrameLookup(context, frame, name) {\n  var val = frame.lookup(name);\n  return (val !== undefined) ?\n    val :\n    context.lookup(name);\n}\n\nfunction handleError(error, lineno, colno) {\n  if (error.lineno) {\n    return error;\n  } else {\n    return new lib.TemplateError(error, lineno, colno);\n  }\n}\n\nfunction asyncEach(arr, dimen, iter, cb) {\n  if (lib.isArray(arr)) {\n    const len = arr.length;\n\n    lib.asyncIter(arr, function iterCallback(item, i, next) {\n      switch (dimen) {\n        case 1:\n          iter(item, i, len, next);\n          break;\n        case 2:\n          iter(item[0], item[1], i, len, next);\n          break;\n        case 3:\n          iter(item[0], item[1], item[2], i, len, next);\n          break;\n        default:\n          item.push(i, len, next);\n          iter.apply(this, item);\n      }\n    }, cb);\n  } else {\n    lib.asyncFor(arr, function iterCallback(key, val, i, len, next) {\n      iter(key, val, i, len, next);\n    }, cb);\n  }\n}\n\nfunction asyncAll(arr, dimen, func, cb) {\n  var finished = 0;\n  var len;\n  var outputArr;\n\n  function done(i, output) {\n    finished++;\n    outputArr[i] = output;\n\n    if (finished === len) {\n      cb(null, outputArr.join(''));\n    }\n  }\n\n  if (lib.isArray(arr)) {\n    len = arr.length;\n    outputArr = new Array(len);\n\n    if (len === 0) {\n      cb(null, '');\n    } else {\n      for (let i = 0; i < arr.length; i++) {\n        const item = arr[i];\n\n        switch (dimen) {\n          case 1:\n            func(item, i, len, done);\n            break;\n          case 2:\n            func(item[0], item[1], i, len, done);\n            break;\n          case 3:\n            func(item[0], item[1], item[2], i, len, done);\n            break;\n          default:\n            item.push(i, len, done);\n            func.apply(this, item);\n        }\n      }\n    }\n  } else {\n    const keys = lib.keys(arr || {});\n    len = keys.length;\n    outputArr = new Array(len);\n\n    if (len === 0) {\n      cb(null, '');\n    } else {\n      for (let i = 0; i < keys.length; i++) {\n        const k = keys[i];\n        func(k, arr[k], i, len, done);\n      }\n    }\n  }\n}\n\nfunction fromIterator(arr) {\n  if (typeof arr !== 'object' || arr === null || lib.isArray(arr)) {\n    return arr;\n  } else if (supportsIterators && Symbol.iterator in arr) {\n    return arrayFrom(arr);\n  } else {\n    return arr;\n  }\n}\n\nmodule.exports = {\n  Frame: Frame,\n  makeMacro: makeMacro,\n  makeKeywordArgs: makeKeywordArgs,\n  numArgs: numArgs,\n  suppressValue: suppressValue,\n  ensureDefined: ensureDefined,\n  memberLookup: memberLookup,\n  contextOrFrameLookup: contextOrFrameLookup,\n  callWrap: callWrap,\n  handleError: handleError,\n  isArray: lib.isArray,\n  keys: lib.keys,\n  SafeString: SafeString,\n  copySafeness: copySafeness,\n  markSafe: markSafe,\n  asyncEach: asyncEach,\n  asyncAll: asyncAll,\n  inOperator: lib.inOperator,\n  fromIterator: fromIterator\n};\n","'use strict';\n\nvar ArrayProto = Array.prototype;\nvar ObjProto = Object.prototype;\n\nvar escapeMap = {\n  '&': '&amp;',\n  '\"': '&quot;',\n  '\\'': '&#39;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\\\\': '&#92;',\n};\n\nvar escapeRegex = /[&\"'<>\\\\]/g;\n\nvar exports = module.exports = {};\n\nfunction hasOwnProp(obj, k) {\n  return ObjProto.hasOwnProperty.call(obj, k);\n}\n\nexports.hasOwnProp = hasOwnProp;\n\nfunction lookupEscape(ch) {\n  return escapeMap[ch];\n}\n\nfunction _prettifyError(path, withInternals, err) {\n  if (!err.Update) {\n    // not one of ours, cast it\n    err = new exports.TemplateError(err);\n  }\n  err.Update(path);\n\n  // Unless they marked the dev flag, show them a trace from here\n  if (!withInternals) {\n    const old = err;\n    err = new Error(old.message);\n    err.name = old.name;\n  }\n\n  return err;\n}\n\nexports._prettifyError = _prettifyError;\n\nfunction TemplateError(message, lineno, colno) {\n  var err;\n  var cause;\n\n  if (message instanceof Error) {\n    cause = message;\n    message = `${cause.name}: ${cause.message}`;\n  }\n\n  if (Object.setPrototypeOf) {\n    err = new Error(message);\n    Object.setPrototypeOf(err, TemplateError.prototype);\n  } else {\n    err = this;\n    Object.defineProperty(err, 'message', {\n      enumerable: false,\n      writable: true,\n      value: message,\n    });\n  }\n\n  Object.defineProperty(err, 'name', {\n    value: 'Template render error',\n  });\n\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(err, this.constructor);\n  }\n\n  let getStack;\n\n  if (cause) {\n    const stackDescriptor = Object.getOwnPropertyDescriptor(cause, 'stack');\n    getStack = stackDescriptor && (stackDescriptor.get || (() => stackDescriptor.value));\n    if (!getStack) {\n      getStack = () => cause.stack;\n    }\n  } else {\n    const stack = (new Error(message)).stack;\n    getStack = (() => stack);\n  }\n\n  Object.defineProperty(err, 'stack', {\n    get: () => getStack.call(err),\n  });\n\n  Object.defineProperty(err, 'cause', {\n    value: cause\n  });\n\n  err.lineno = lineno;\n  err.colno = colno;\n  err.firstUpdate = true;\n\n  err.Update = function Update(path) {\n    let msg = '(' + (path || 'unknown path') + ')';\n\n    // only show lineno + colno next to path of template\n    // where error occurred\n    if (this.firstUpdate) {\n      if (this.lineno && this.colno) {\n        msg += ` [Line ${this.lineno}, Column ${this.colno}]`;\n      } else if (this.lineno) {\n        msg += ` [Line ${this.lineno}]`;\n      }\n    }\n\n    msg += '\\n ';\n    if (this.firstUpdate) {\n      msg += ' ';\n    }\n\n    this.message = msg + (this.message || '');\n    this.firstUpdate = false;\n    return this;\n  };\n\n  return err;\n}\n\n\nif (Object.setPrototypeOf) {\n  Object.setPrototypeOf(TemplateError.prototype, Error.prototype);\n} else {\n  TemplateError.prototype = Object.create(Error.prototype, {\n    constructor: {\n      value: TemplateError,\n    },\n  });\n}\n\nexports.TemplateError = TemplateError;\n\nfunction escape(val) {\n  return val.replace(escapeRegex, lookupEscape);\n}\n\nexports.escape = escape;\n\nfunction isFunction(obj) {\n  return ObjProto.toString.call(obj) === '[object Function]';\n}\n\nexports.isFunction = isFunction;\n\nfunction isArray(obj) {\n  return ObjProto.toString.call(obj) === '[object Array]';\n}\n\nexports.isArray = isArray;\n\nfunction isString(obj) {\n  return ObjProto.toString.call(obj) === '[object String]';\n}\n\nexports.isString = isString;\n\nfunction isObject(obj) {\n  return ObjProto.toString.call(obj) === '[object Object]';\n}\n\nexports.isObject = isObject;\n\n/**\n * @param {string|number} attr\n * @returns {(string|number)[]}\n * @private\n */\nfunction _prepareAttributeParts(attr) {\n  if (!attr) {\n    return [];\n  }\n\n  if (typeof attr === 'string') {\n    return attr.split('.');\n  }\n\n  return [attr];\n}\n\n/**\n * @param {string}   attribute      Attribute value. Dots allowed.\n * @returns {function(Object): *}\n */\nfunction getAttrGetter(attribute) {\n  const parts = _prepareAttributeParts(attribute);\n\n  return function attrGetter(item) {\n    let _item = item;\n\n    for (let i = 0; i < parts.length; i++) {\n      const part = parts[i];\n\n      // If item is not an object, and we still got parts to handle, it means\n      // that something goes wrong. Just roll out to undefined in that case.\n      if (hasOwnProp(_item, part)) {\n        _item = _item[part];\n      } else {\n        return undefined;\n      }\n    }\n\n    return _item;\n  };\n}\n\nexports.getAttrGetter = getAttrGetter;\n\nfunction groupBy(obj, val, throwOnUndefined) {\n  const result = {};\n  const iterator = isFunction(val) ? val : getAttrGetter(val);\n  for (let i = 0; i < obj.length; i++) {\n    const value = obj[i];\n    const key = iterator(value, i);\n    if (key === undefined && throwOnUndefined === true) {\n      throw new TypeError(`groupby: attribute \"${val}\" resolved to undefined`);\n    }\n    (result[key] || (result[key] = [])).push(value);\n  }\n  return result;\n}\n\nexports.groupBy = groupBy;\n\nfunction toArray(obj) {\n  return Array.prototype.slice.call(obj);\n}\n\nexports.toArray = toArray;\n\nfunction without(array) {\n  const result = [];\n  if (!array) {\n    return result;\n  }\n  const length = array.length;\n  const contains = toArray(arguments).slice(1);\n  let index = -1;\n\n  while (++index < length) {\n    if (indexOf(contains, array[index]) === -1) {\n      result.push(array[index]);\n    }\n  }\n  return result;\n}\n\nexports.without = without;\n\nfunction repeat(char_, n) {\n  var str = '';\n  for (let i = 0; i < n; i++) {\n    str += char_;\n  }\n  return str;\n}\n\nexports.repeat = repeat;\n\nfunction each(obj, func, context) {\n  if (obj == null) {\n    return;\n  }\n\n  if (ArrayProto.forEach && obj.forEach === ArrayProto.forEach) {\n    obj.forEach(func, context);\n  } else if (obj.length === +obj.length) {\n    for (let i = 0, l = obj.length; i < l; i++) {\n      func.call(context, obj[i], i, obj);\n    }\n  }\n}\n\nexports.each = each;\n\nfunction map(obj, func) {\n  var results = [];\n  if (obj == null) {\n    return results;\n  }\n\n  if (ArrayProto.map && obj.map === ArrayProto.map) {\n    return obj.map(func);\n  }\n\n  for (let i = 0; i < obj.length; i++) {\n    results[results.length] = func(obj[i], i);\n  }\n\n  if (obj.length === +obj.length) {\n    results.length = obj.length;\n  }\n\n  return results;\n}\n\nexports.map = map;\n\nfunction asyncIter(arr, iter, cb) {\n  let i = -1;\n\n  function next() {\n    i++;\n\n    if (i < arr.length) {\n      iter(arr[i], i, next, cb);\n    } else {\n      cb();\n    }\n  }\n\n  next();\n}\n\nexports.asyncIter = asyncIter;\n\nfunction asyncFor(obj, iter, cb) {\n  const keys = keys_(obj || {});\n  const len = keys.length;\n  let i = -1;\n\n  function next() {\n    i++;\n    const k = keys[i];\n\n    if (i < len) {\n      iter(k, obj[k], i, len, next);\n    } else {\n      cb();\n    }\n  }\n\n  next();\n}\n\nexports.asyncFor = asyncFor;\n\nfunction indexOf(arr, searchElement, fromIndex) {\n  return Array.prototype.indexOf.call(arr || [], searchElement, fromIndex);\n}\n\nexports.indexOf = indexOf;\n\nfunction keys_(obj) {\n  /* eslint-disable no-restricted-syntax */\n  const arr = [];\n  for (let k in obj) {\n    if (hasOwnProp(obj, k)) {\n      arr.push(k);\n    }\n  }\n  return arr;\n}\n\nexports.keys = keys_;\n\nfunction _entries(obj) {\n  return keys_(obj).map((k) => [k, obj[k]]);\n}\n\nexports._entries = _entries;\n\nfunction _values(obj) {\n  return keys_(obj).map((k) => obj[k]);\n}\n\nexports._values = _values;\n\nfunction extend(obj1, obj2) {\n  obj1 = obj1 || {};\n  keys_(obj2).forEach(k => {\n    obj1[k] = obj2[k];\n  });\n  return obj1;\n}\n\nexports._assign = exports.extend = extend;\n\nfunction inOperator(key, val) {\n  if (isArray(val) || isString(val)) {\n    return val.indexOf(key) !== -1;\n  } else if (isObject(val)) {\n    return key in val;\n  }\n  throw new Error('Cannot use \"in\" operator to search for \"'\n    + key + '\" in unexpected types.');\n}\n\nexports.inOperator = inOperator;\n","'use strict';\n\nconst fs = require('fs');\nconst path = require('path');\nconst {_prettifyError} = require('./lib');\nconst compiler = require('./compiler');\nconst {Environment} = require('./environment');\nconst precompileGlobal = require('./precompile-global');\n\nfunction match(filename, patterns) {\n  if (!Array.isArray(patterns)) {\n    return false;\n  }\n  return patterns.some((pattern) => filename.match(pattern));\n}\n\nfunction precompileString(str, opts) {\n  opts = opts || {};\n  opts.isString = true;\n  const env = opts.env || new Environment([]);\n  const wrapper = opts.wrapper || precompileGlobal;\n\n  if (!opts.name) {\n    throw new Error('the \"name\" option is required when compiling a string');\n  }\n  return wrapper([_precompile(str, opts.name, env)], opts);\n}\n\nfunction precompile(input, opts) {\n  // The following options are available:\n  //\n  // * name: name of the template (auto-generated when compiling a directory)\n  // * isString: input is a string, not a file path\n  // * asFunction: generate a callable function\n  // * force: keep compiling on error\n  // * env: the Environment to use (gets extensions and async filters from it)\n  // * include: which file/folders to include (folders are auto-included, files are auto-excluded)\n  // * exclude: which file/folders to exclude (folders are auto-included, files are auto-excluded)\n  // * wrapper: function(templates, opts) {...}\n  //       Customize the output format to store the compiled template.\n  //       By default, templates are stored in a global variable used by the runtime.\n  //       A custom loader will be necessary to load your custom wrapper.\n\n  opts = opts || {};\n  const env = opts.env || new Environment([]);\n  const wrapper = opts.wrapper || precompileGlobal;\n\n  if (opts.isString) {\n    return precompileString(input, opts);\n  }\n\n  const pathStats = fs.existsSync(input) && fs.statSync(input);\n  const precompiled = [];\n  const templates = [];\n\n  function addTemplates(dir) {\n    fs.readdirSync(dir).forEach((file) => {\n      const filepath = path.join(dir, file);\n      let subpath = filepath.substr(path.join(input, '/').length);\n      const stat = fs.statSync(filepath);\n\n      if (stat && stat.isDirectory()) {\n        subpath += '/';\n        if (!match(subpath, opts.exclude)) {\n          addTemplates(filepath);\n        }\n      } else if (match(subpath, opts.include)) {\n        templates.push(filepath);\n      }\n    });\n  }\n\n  if (pathStats.isFile()) {\n    precompiled.push(_precompile(\n      fs.readFileSync(input, 'utf-8'),\n      opts.name || input,\n      env\n    ));\n  } else if (pathStats.isDirectory()) {\n    addTemplates(input);\n\n    for (let i = 0; i < templates.length; i++) {\n      const name = templates[i].replace(path.join(input, '/'), '');\n\n      try {\n        precompiled.push(_precompile(\n          fs.readFileSync(templates[i], 'utf-8'),\n          name,\n          env\n        ));\n      } catch (e) {\n        if (opts.force) {\n          // Don't stop generating the output if we're\n          // forcing compilation.\n          console.error(e); // eslint-disable-line no-console\n        } else {\n          throw e;\n        }\n      }\n    }\n  }\n\n  return wrapper(precompiled, opts);\n}\n\nfunction _precompile(str, name, env) {\n  env = env || new Environment([]);\n\n  const asyncFilters = env.asyncFilters;\n  const extensions = env.extensionsList;\n  let template;\n\n  name = name.replace(/\\\\/g, '/');\n\n  try {\n    template = compiler.compile(str,\n      asyncFilters,\n      extensions,\n      name,\n      env.opts);\n  } catch (err) {\n    throw _prettifyError(name, false, err);\n  }\n\n  return {\n    name: name,\n    template: template\n  };\n}\n\nmodule.exports = {\n  precompile: precompile,\n  precompileString: precompileString\n};\n","'use strict';\n\nconst path = require('path');\nconst {EmitterObj} = require('./object');\n\nmodule.exports = class Loader extends EmitterObj {\n  resolve(from, to) {\n    return path.resolve(path.dirname(from), to);\n  }\n\n  isRelative(filename) {\n    return (filename.indexOf('./') === 0 || filename.indexOf('../') === 0);\n  }\n};\n","'use strict';\n\nfunction precompileGlobal(templates, opts) {\n  var out = '';\n  opts = opts || {};\n\n  for (let i = 0; i < templates.length; i++) {\n    const name = JSON.stringify(templates[i].name);\n    const template = templates[i].template;\n\n    out += '(function() {' +\n      '(window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})' +\n      '[' + name + '] = (function() {\\n' + template + '\\n})();\\n';\n\n    if (opts.asFunction) {\n      out += 'return function(ctx, cb) { return nunjucks.render(' + name + ', ctx, cb); }\\n';\n    }\n\n    out += '})();\\n';\n  }\n  return out;\n}\n\nmodule.exports = precompileGlobal;\n","'use strict';\n\nconst Loader = require('./loader');\nconst {PrecompiledLoader} = require('./precompiled-loader.js');\n\nclass WebLoader extends Loader {\n  constructor(baseURL, opts) {\n    super();\n    this.baseURL = baseURL || '.';\n    opts = opts || {};\n\n    // By default, the cache is turned off because there's no way\n    // to \"watch\" templates over HTTP, so they are re-downloaded\n    // and compiled each time. (Remember, PRECOMPILE YOUR\n    // TEMPLATES in production!)\n    this.useCache = !!opts.useCache;\n\n    // We default `async` to false so that the simple synchronous\n    // API can be used when you aren't doing anything async in\n    // your templates (which is most of the time). This performs a\n    // sync ajax request, but that's ok because it should *only*\n    // happen in development. PRECOMPILE YOUR TEMPLATES.\n    this.async = !!opts.async;\n  }\n\n  resolve(from, to) {\n    throw new Error('relative templates not support in the browser yet');\n  }\n\n  getSource(name, cb) {\n    var useCache = this.useCache;\n    var result;\n    this.fetch(this.baseURL + '/' + name, (err, src) => {\n      if (err) {\n        if (cb) {\n          cb(err.content);\n        } else if (err.status === 404) {\n          result = null;\n        } else {\n          throw err.content;\n        }\n      } else {\n        result = {\n          src: src,\n          path: name,\n          noCache: !useCache\n        };\n        this.emit('load', name, result);\n        if (cb) {\n          cb(null, result);\n        }\n      }\n    });\n\n    // if this WebLoader isn't running asynchronously, the\n    // fetch above would actually run sync and we'll have a\n    // result here\n    return result;\n  }\n\n  fetch(url, cb) {\n    // Only in the browser please\n    if (typeof window === 'undefined') {\n      throw new Error('WebLoader can only by used in a browser');\n    }\n\n    const ajax = new XMLHttpRequest();\n    let loading = true;\n\n    ajax.onreadystatechange = () => {\n      if (ajax.readyState === 4 && loading) {\n        loading = false;\n        if (ajax.status === 0 || ajax.status === 200) {\n          cb(null, ajax.responseText);\n        } else {\n          cb({\n            status: ajax.status,\n            content: ajax.responseText\n          });\n        }\n      }\n    };\n\n    url += (url.indexOf('?') === -1 ? '?' : '&') + 's=' +\n    (new Date().getTime());\n\n    ajax.open('GET', url, this.async);\n    ajax.send();\n  }\n}\n\nmodule.exports = {\n  WebLoader: WebLoader,\n  PrecompiledLoader: PrecompiledLoader\n};\n","'use strict';\n\nconst lib = require('./lib');\n\nlet whitespaceChars = ' \\n\\t\\r\\u00A0';\nlet delimChars = '()[]{}%*-+~/#,:|.<>=!';\nlet intChars = '0123456789';\n\nlet BLOCK_START = '{%';\nlet BLOCK_END = '%}';\nlet VARIABLE_START = '{{';\nlet VARIABLE_END = '}}';\nlet COMMENT_START = '{#';\nlet COMMENT_END = '#}';\n\nlet TOKEN_STRING = 'string';\nlet TOKEN_WHITESPACE = 'whitespace';\nlet TOKEN_DATA = 'data';\nlet TOKEN_BLOCK_START = 'block-start';\nlet TOKEN_BLOCK_END = 'block-end';\nlet TOKEN_VARIABLE_START = 'variable-start';\nlet TOKEN_VARIABLE_END = 'variable-end';\nlet TOKEN_COMMENT = 'comment';\nlet TOKEN_LEFT_PAREN = 'left-paren';\nlet TOKEN_RIGHT_PAREN = 'right-paren';\nlet TOKEN_LEFT_BRACKET = 'left-bracket';\nlet TOKEN_RIGHT_BRACKET = 'right-bracket';\nlet TOKEN_LEFT_CURLY = 'left-curly';\nlet TOKEN_RIGHT_CURLY = 'right-curly';\nlet TOKEN_OPERATOR = 'operator';\nlet TOKEN_COMMA = 'comma';\nlet TOKEN_COLON = 'colon';\nlet TOKEN_TILDE = 'tilde';\nlet TOKEN_PIPE = 'pipe';\nlet TOKEN_INT = 'int';\nlet TOKEN_FLOAT = 'float';\nlet TOKEN_BOOLEAN = 'boolean';\nlet TOKEN_NONE = 'none';\nlet TOKEN_SYMBOL = 'symbol';\nlet TOKEN_SPECIAL = 'special';\nlet TOKEN_REGEX = 'regex';\n\nfunction token(type, value, lineno, colno) {\n  return {\n    type: type,\n    value: value,\n    lineno: lineno,\n    colno: colno\n  };\n}\n\nclass Tokenizer {\n  constructor(str, opts) {\n    this.str = str;\n    this.index = 0;\n    this.len = str.length;\n    this.lineno = 0;\n    this.colno = 0;\n\n    this.in_code = false;\n\n    opts = opts || {};\n\n    let tags = opts.tags || {};\n    this.tags = {\n      BLOCK_START: tags.blockStart || BLOCK_START,\n      BLOCK_END: tags.blockEnd || BLOCK_END,\n      VARIABLE_START: tags.variableStart || VARIABLE_START,\n      VARIABLE_END: tags.variableEnd || VARIABLE_END,\n      COMMENT_START: tags.commentStart || COMMENT_START,\n      COMMENT_END: tags.commentEnd || COMMENT_END\n    };\n\n    this.trimBlocks = !!opts.trimBlocks;\n    this.lstripBlocks = !!opts.lstripBlocks;\n  }\n\n  nextToken() {\n    let lineno = this.lineno;\n    let colno = this.colno;\n    let tok;\n\n    if (this.in_code) {\n      // Otherwise, if we are in a block parse it as code\n      let cur = this.current();\n\n      if (this.isFinished()) {\n        // We have nothing else to parse\n        return null;\n      } else if (cur === '\"' || cur === '\\'') {\n        // We've hit a string\n        return token(TOKEN_STRING, this._parseString(cur), lineno, colno);\n      } else if ((tok = this._extract(whitespaceChars))) {\n        // We hit some whitespace\n        return token(TOKEN_WHITESPACE, tok, lineno, colno);\n      } else if ((tok = this._extractString(this.tags.BLOCK_END)) ||\n        (tok = this._extractString('-' + this.tags.BLOCK_END))) {\n        // Special check for the block end tag\n        //\n        // It is a requirement that start and end tags are composed of\n        // delimiter characters (%{}[] etc), and our code always\n        // breaks on delimiters so we can assume the token parsing\n        // doesn't consume these elsewhere\n        this.in_code = false;\n        if (this.trimBlocks) {\n          cur = this.current();\n          if (cur === '\\n') {\n            // Skip newline\n            this.forward();\n          } else if (cur === '\\r') {\n            // Skip CRLF newline\n            this.forward();\n            cur = this.current();\n            if (cur === '\\n') {\n              this.forward();\n            } else {\n              // Was not a CRLF, so go back\n              this.back();\n            }\n          }\n        }\n        return token(TOKEN_BLOCK_END, tok, lineno, colno);\n      } else if ((tok = this._extractString(this.tags.VARIABLE_END)) ||\n        (tok = this._extractString('-' + this.tags.VARIABLE_END))) {\n        // Special check for variable end tag (see above)\n        this.in_code = false;\n        return token(TOKEN_VARIABLE_END, tok, lineno, colno);\n      } else if (cur === 'r' && this.str.charAt(this.index + 1) === '/') {\n        // Skip past 'r/'.\n        this.forwardN(2);\n\n        // Extract until the end of the regex -- / ends it, \\/ does not.\n        let regexBody = '';\n        while (!this.isFinished()) {\n          if (this.current() === '/' && this.previous() !== '\\\\') {\n            this.forward();\n            break;\n          } else {\n            regexBody += this.current();\n            this.forward();\n          }\n        }\n\n        // Check for flags.\n        // The possible flags are according to https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/RegExp)\n        let POSSIBLE_FLAGS = ['g', 'i', 'm', 'y'];\n        let regexFlags = '';\n        while (!this.isFinished()) {\n          let isCurrentAFlag = POSSIBLE_FLAGS.indexOf(this.current()) !== -1;\n          if (isCurrentAFlag) {\n            regexFlags += this.current();\n            this.forward();\n          } else {\n            break;\n          }\n        }\n\n        return token(TOKEN_REGEX, {\n          body: regexBody,\n          flags: regexFlags\n        }, lineno, colno);\n      } else if (delimChars.indexOf(cur) !== -1) {\n        // We've hit a delimiter (a special char like a bracket)\n        this.forward();\n        let complexOps = ['==', '===', '!=', '!==', '<=', '>=', '//', '**'];\n        let curComplex = cur + this.current();\n        let type;\n\n        if (lib.indexOf(complexOps, curComplex) !== -1) {\n          this.forward();\n          cur = curComplex;\n\n          // See if this is a strict equality/inequality comparator\n          if (lib.indexOf(complexOps, curComplex + this.current()) !== -1) {\n            cur = curComplex + this.current();\n            this.forward();\n          }\n        }\n\n        switch (cur) {\n          case '(':\n            type = TOKEN_LEFT_PAREN;\n            break;\n          case ')':\n            type = TOKEN_RIGHT_PAREN;\n            break;\n          case '[':\n            type = TOKEN_LEFT_BRACKET;\n            break;\n          case ']':\n            type = TOKEN_RIGHT_BRACKET;\n            break;\n          case '{':\n            type = TOKEN_LEFT_CURLY;\n            break;\n          case '}':\n            type = TOKEN_RIGHT_CURLY;\n            break;\n          case ',':\n            type = TOKEN_COMMA;\n            break;\n          case ':':\n            type = TOKEN_COLON;\n            break;\n          case '~':\n            type = TOKEN_TILDE;\n            break;\n          case '|':\n            type = TOKEN_PIPE;\n            break;\n          default:\n            type = TOKEN_OPERATOR;\n        }\n\n        return token(type, cur, lineno, colno);\n      } else {\n        // We are not at whitespace or a delimiter, so extract the\n        // text and parse it\n        tok = this._extractUntil(whitespaceChars + delimChars);\n\n        if (tok.match(/^[-+]?[0-9]+$/)) {\n          if (this.current() === '.') {\n            this.forward();\n            let dec = this._extract(intChars);\n            return token(TOKEN_FLOAT, tok + '.' + dec, lineno, colno);\n          } else {\n            return token(TOKEN_INT, tok, lineno, colno);\n          }\n        } else if (tok.match(/^(true|false)$/)) {\n          return token(TOKEN_BOOLEAN, tok, lineno, colno);\n        } else if (tok === 'none') {\n          return token(TOKEN_NONE, tok, lineno, colno);\n        /*\n         * Added to make the test `null is null` evaluate truthily.\n         * Otherwise, Nunjucks will look up null in the context and\n         * return `undefined`, which is not what we want. This *may* have\n         * consequences is someone is using null in their templates as a\n         * variable.\n         */\n        } else if (tok === 'null') {\n          return token(TOKEN_NONE, tok, lineno, colno);\n        } else if (tok) {\n          return token(TOKEN_SYMBOL, tok, lineno, colno);\n        } else {\n          throw new Error('Unexpected value while parsing: ' + tok);\n        }\n      }\n    } else {\n      // Parse out the template text, breaking on tag\n      // delimiters because we need to look for block/variable start\n      // tags (don't use the full delimChars for optimization)\n      let beginChars = (this.tags.BLOCK_START.charAt(0) +\n      this.tags.VARIABLE_START.charAt(0) +\n      this.tags.COMMENT_START.charAt(0) +\n      this.tags.COMMENT_END.charAt(0));\n\n      if (this.isFinished()) {\n        return null;\n      } else if ((tok = this._extractString(this.tags.BLOCK_START + '-')) ||\n        (tok = this._extractString(this.tags.BLOCK_START))) {\n        this.in_code = true;\n        return token(TOKEN_BLOCK_START, tok, lineno, colno);\n      } else if ((tok = this._extractString(this.tags.VARIABLE_START + '-')) ||\n        (tok = this._extractString(this.tags.VARIABLE_START))) {\n        this.in_code = true;\n        return token(TOKEN_VARIABLE_START, tok, lineno, colno);\n      } else {\n        tok = '';\n        let data;\n        let inComment = false;\n\n        if (this._matches(this.tags.COMMENT_START)) {\n          inComment = true;\n          tok = this._extractString(this.tags.COMMENT_START);\n        }\n\n        // Continually consume text, breaking on the tag delimiter\n        // characters and checking to see if it's a start tag.\n        //\n        // We could hit the end of the template in the middle of\n        // our looping, so check for the null return value from\n        // _extractUntil\n        while ((data = this._extractUntil(beginChars)) !== null) {\n          tok += data;\n\n          if ((this._matches(this.tags.BLOCK_START) ||\n            this._matches(this.tags.VARIABLE_START) ||\n            this._matches(this.tags.COMMENT_START)) &&\n            !inComment) {\n            if (this.lstripBlocks &&\n              this._matches(this.tags.BLOCK_START) &&\n              this.colno > 0 &&\n              this.colno <= tok.length) {\n              let lastLine = tok.slice(-this.colno);\n              if (/^\\s+$/.test(lastLine)) {\n                // Remove block leading whitespace from beginning of the string\n                tok = tok.slice(0, -this.colno);\n                if (!tok.length) {\n                  // All data removed, collapse to avoid unnecessary nodes\n                  // by returning next token (block start)\n                  return this.nextToken();\n                }\n              }\n            }\n            // If it is a start tag, stop looping\n            break;\n          } else if (this._matches(this.tags.COMMENT_END)) {\n            if (!inComment) {\n              throw new Error('unexpected end of comment');\n            }\n            tok += this._extractString(this.tags.COMMENT_END);\n            break;\n          } else {\n            // It does not match any tag, so add the character and\n            // carry on\n            tok += this.current();\n            this.forward();\n          }\n        }\n\n        if (data === null && inComment) {\n          throw new Error('expected end of comment, got end of file');\n        }\n\n        return token(inComment ? TOKEN_COMMENT : TOKEN_DATA,\n          tok,\n          lineno,\n          colno);\n      }\n    }\n  }\n\n  _parseString(delimiter) {\n    this.forward();\n\n    let str = '';\n\n    while (!this.isFinished() && this.current() !== delimiter) {\n      let cur = this.current();\n\n      if (cur === '\\\\') {\n        this.forward();\n        switch (this.current()) {\n          case 'n':\n            str += '\\n';\n            break;\n          case 't':\n            str += '\\t';\n            break;\n          case 'r':\n            str += '\\r';\n            break;\n          default:\n            str += this.current();\n        }\n        this.forward();\n      } else {\n        str += cur;\n        this.forward();\n      }\n    }\n\n    this.forward();\n    return str;\n  }\n\n  _matches(str) {\n    if (this.index + str.length > this.len) {\n      return null;\n    }\n\n    let m = this.str.slice(this.index, this.index + str.length);\n    return m === str;\n  }\n\n  _extractString(str) {\n    if (this._matches(str)) {\n      this.forwardN(str.length);\n      return str;\n    }\n    return null;\n  }\n\n  _extractUntil(charString) {\n    // Extract all non-matching chars, with the default matching set\n    // to everything\n    return this._extractMatching(true, charString || '');\n  }\n\n  _extract(charString) {\n    // Extract all matching chars (no default, so charString must be\n    // explicit)\n    return this._extractMatching(false, charString);\n  }\n\n  _extractMatching(breakOnMatch, charString) {\n    // Pull out characters until a breaking char is hit.\n    // If breakOnMatch is false, a non-matching char stops it.\n    // If breakOnMatch is true, a matching char stops it.\n\n    if (this.isFinished()) {\n      return null;\n    }\n\n    let first = charString.indexOf(this.current());\n\n    // Only proceed if the first character doesn't meet our condition\n    if ((breakOnMatch && first === -1) ||\n      (!breakOnMatch && first !== -1)) {\n      let t = this.current();\n      this.forward();\n\n      // And pull out all the chars one at a time until we hit a\n      // breaking char\n      let idx = charString.indexOf(this.current());\n\n      while (((breakOnMatch && idx === -1) ||\n        (!breakOnMatch && idx !== -1)) && !this.isFinished()) {\n        t += this.current();\n        this.forward();\n\n        idx = charString.indexOf(this.current());\n      }\n\n      return t;\n    }\n\n    return '';\n  }\n\n  _extractRegex(regex) {\n    let matches = this.currentStr().match(regex);\n    if (!matches) {\n      return null;\n    }\n\n    // Move forward whatever was matched\n    this.forwardN(matches[0].length);\n\n    return matches;\n  }\n\n  isFinished() {\n    return this.index >= this.len;\n  }\n\n  forwardN(n) {\n    for (let i = 0; i < n; i++) {\n      this.forward();\n    }\n  }\n\n  forward() {\n    this.index++;\n\n    if (this.previous() === '\\n') {\n      this.lineno++;\n      this.colno = 0;\n    } else {\n      this.colno++;\n    }\n  }\n\n  backN(n) {\n    for (let i = 0; i < n; i++) {\n      this.back();\n    }\n  }\n\n  back() {\n    this.index--;\n\n    if (this.current() === '\\n') {\n      this.lineno--;\n\n      let idx = this.src.lastIndexOf('\\n', this.index - 1);\n      if (idx === -1) {\n        this.colno = this.index;\n      } else {\n        this.colno = this.index - idx;\n      }\n    } else {\n      this.colno--;\n    }\n  }\n\n  // current returns current character\n  current() {\n    if (!this.isFinished()) {\n      return this.str.charAt(this.index);\n    }\n    return '';\n  }\n\n  // currentStr returns what's left of the unparsed string\n  currentStr() {\n    if (!this.isFinished()) {\n      return this.str.substr(this.index);\n    }\n    return '';\n  }\n\n  previous() {\n    return this.str.charAt(this.index - 1);\n  }\n}\n\nmodule.exports = {\n  lex(src, opts) {\n    return new Tokenizer(src, opts);\n  },\n\n  TOKEN_STRING: TOKEN_STRING,\n  TOKEN_WHITESPACE: TOKEN_WHITESPACE,\n  TOKEN_DATA: TOKEN_DATA,\n  TOKEN_BLOCK_START: TOKEN_BLOCK_START,\n  TOKEN_BLOCK_END: TOKEN_BLOCK_END,\n  TOKEN_VARIABLE_START: TOKEN_VARIABLE_START,\n  TOKEN_VARIABLE_END: TOKEN_VARIABLE_END,\n  TOKEN_COMMENT: TOKEN_COMMENT,\n  TOKEN_LEFT_PAREN: TOKEN_LEFT_PAREN,\n  TOKEN_RIGHT_PAREN: TOKEN_RIGHT_PAREN,\n  TOKEN_LEFT_BRACKET: TOKEN_LEFT_BRACKET,\n  TOKEN_RIGHT_BRACKET: TOKEN_RIGHT_BRACKET,\n  TOKEN_LEFT_CURLY: TOKEN_LEFT_CURLY,\n  TOKEN_RIGHT_CURLY: TOKEN_RIGHT_CURLY,\n  TOKEN_OPERATOR: TOKEN_OPERATOR,\n  TOKEN_COMMA: TOKEN_COMMA,\n  TOKEN_COLON: TOKEN_COLON,\n  TOKEN_TILDE: TOKEN_TILDE,\n  TOKEN_PIPE: TOKEN_PIPE,\n  TOKEN_INT: TOKEN_INT,\n  TOKEN_FLOAT: TOKEN_FLOAT,\n  TOKEN_BOOLEAN: TOKEN_BOOLEAN,\n  TOKEN_NONE: TOKEN_NONE,\n  TOKEN_SYMBOL: TOKEN_SYMBOL,\n  TOKEN_SPECIAL: TOKEN_SPECIAL,\n  TOKEN_REGEX: TOKEN_REGEX\n};\n","'use strict';\n\nconst lib = require('./src/lib');\nconst {Environment, Template} = require('./src/environment');\nconst Loader = require('./src/loader');\nconst loaders = require('./src/loaders');\nconst precompile = require('./src/precompile');\nconst compiler = require('./src/compiler');\nconst parser = require('./src/parser');\nconst lexer = require('./src/lexer');\nconst runtime = require('./src/runtime');\nconst nodes = require('./src/nodes');\nconst installJinjaCompat = require('./src/jinja-compat');\n\n// A single instance of an environment, since this is so commonly used\nlet e;\n\nfunction configure(templatesPath, opts) {\n  opts = opts || {};\n  if (lib.isObject(templatesPath)) {\n    opts = templatesPath;\n    templatesPath = null;\n  }\n\n  let TemplateLoader;\n  if (loaders.FileSystemLoader) {\n    TemplateLoader = new loaders.FileSystemLoader(templatesPath, {\n      watch: opts.watch,\n      noCache: opts.noCache\n    });\n  } else if (loaders.WebLoader) {\n    TemplateLoader = new loaders.WebLoader(templatesPath, {\n      useCache: opts.web && opts.web.useCache,\n      async: opts.web && opts.web.async\n    });\n  }\n\n  e = new Environment(TemplateLoader, opts);\n\n  if (opts && opts.express) {\n    e.express(opts.express);\n  }\n\n  return e;\n}\n\nmodule.exports = {\n  Environment: Environment,\n  Template: Template,\n  Loader: Loader,\n  FileSystemLoader: loaders.FileSystemLoader,\n  NodeResolveLoader: loaders.NodeResolveLoader,\n  PrecompiledLoader: loaders.PrecompiledLoader,\n  WebLoader: loaders.WebLoader,\n  compiler: compiler,\n  parser: parser,\n  lexer: lexer,\n  runtime: runtime,\n  lib: lib,\n  nodes: nodes,\n  installJinjaCompat: installJinjaCompat,\n  configure: configure,\n  reset() {\n    e = undefined;\n  },\n  compile(src, env, path, eagerCompile) {\n    if (!e) {\n      configure();\n    }\n    return new Template(src, env, path, eagerCompile);\n  },\n  render(name, ctx, cb) {\n    if (!e) {\n      configure();\n    }\n\n    return e.render(name, ctx, cb);\n  },\n  renderString(src, ctx, cb) {\n    if (!e) {\n      configure();\n    }\n\n    return e.renderString(src, ctx, cb);\n  },\n  precompile: (precompile) ? precompile.precompile : undefined,\n  precompileString: (precompile) ? precompile.precompileString : undefined,\n};\n","'use strict';\n\nconst Loader = require('./loader');\n\nclass PrecompiledLoader extends Loader {\n  constructor(compiledTemplates) {\n    super();\n    this.precompiled = compiledTemplates || {};\n  }\n\n  getSource(name) {\n    if (this.precompiled[name]) {\n      return {\n        src: {\n          type: 'code',\n          obj: this.precompiled[name]\n        },\n        path: name\n      };\n    }\n    return null;\n  }\n}\n\nmodule.exports = {\n  PrecompiledLoader: PrecompiledLoader,\n};\n","'use strict';\n\nfunction cycler(items) {\n  var index = -1;\n\n  return {\n    current: null,\n    reset() {\n      index = -1;\n      this.current = null;\n    },\n\n    next() {\n      index++;\n      if (index >= items.length) {\n        index = 0;\n      }\n\n      this.current = items[index];\n      return this.current;\n    },\n  };\n}\n\nfunction joiner(sep) {\n  sep = sep || ',';\n  let first = true;\n\n  return () => {\n    const val = first ? '' : sep;\n    first = false;\n    return val;\n  };\n}\n\n// Making this a function instead so it returns a new object\n// each time it's called. That way, if something like an environment\n// uses it, they will each have their own copy.\nfunction globals() {\n  return {\n    range(start, stop, step) {\n      if (typeof stop === 'undefined') {\n        stop = start;\n        start = 0;\n        step = 1;\n      } else if (!step) {\n        step = 1;\n      }\n\n      const arr = [];\n      if (step > 0) {\n        for (let i = start; i < stop; i += step) {\n          arr.push(i);\n        }\n      } else {\n        for (let i = start; i > stop; i += step) { // eslint-disable-line for-direction\n          arr.push(i);\n        }\n      }\n      return arr;\n    },\n\n    cycler() {\n      return cycler(Array.prototype.slice.call(arguments));\n    },\n\n    joiner(sep) {\n      return joiner(sep);\n    }\n  };\n}\n\nmodule.exports = globals;\n","\"use strict\";\n\n// Use the fastest means possible to execute a task in its own turn, with\n// priority over other events including IO, animation, reflow, and redraw\n// events in browsers.\n//\n// An exception thrown by a task will permanently interrupt the processing of\n// subsequent tasks. The higher level `asap` function ensures that if an\n// exception is thrown by a task, that the task queue will continue flushing as\n// soon as possible, but if you use `rawAsap` directly, you are responsible to\n// either ensure that no exceptions are thrown from your task, or to manually\n// call `rawAsap.requestFlush` if an exception is thrown.\nmodule.exports = rawAsap;\nfunction rawAsap(task) {\n    if (!queue.length) {\n        requestFlush();\n        flushing = true;\n    }\n    // Equivalent to push, but avoids a function call.\n    queue[queue.length] = task;\n}\n\nvar queue = [];\n// Once a flush has been requested, no further calls to `requestFlush` are\n// necessary until the next `flush` completes.\nvar flushing = false;\n// `requestFlush` is an implementation-specific method that attempts to kick\n// off a `flush` event as quickly as possible. `flush` will attempt to exhaust\n// the event queue before yielding to the browser's own event loop.\nvar requestFlush;\n// The position of the next task to execute in the task queue. This is\n// preserved between calls to `flush` so that it can be resumed if\n// a task throws an exception.\nvar index = 0;\n// If a task schedules additional tasks recursively, the task queue can grow\n// unbounded. To prevent memory exhaustion, the task queue will periodically\n// truncate already-completed tasks.\nvar capacity = 1024;\n\n// The flush function processes all tasks that have been scheduled with\n// `rawAsap` unless and until one of those tasks throws an exception.\n// If a task throws an exception, `flush` ensures that its state will remain\n// consistent and will resume where it left off when called again.\n// However, `flush` does not make any arrangements to be called again if an\n// exception is thrown.\nfunction flush() {\n    while (index < queue.length) {\n        var currentIndex = index;\n        // Advance the index before calling the task. This ensures that we will\n        // begin flushing on the next task the task throws an error.\n        index = index + 1;\n        queue[currentIndex].call();\n        // Prevent leaking memory for long chains of recursive calls to `asap`.\n        // If we call `asap` within tasks scheduled by `asap`, the queue will\n        // grow, but to avoid an O(n) walk for every task we execute, we don't\n        // shift tasks off the queue after they have been executed.\n        // Instead, we periodically shift 1024 tasks off the queue.\n        if (index > capacity) {\n            // Manually shift all values starting at the index back to the\n            // beginning of the queue.\n            for (var scan = 0, newLength = queue.length - index; scan < newLength; scan++) {\n                queue[scan] = queue[scan + index];\n            }\n            queue.length -= index;\n            index = 0;\n        }\n    }\n    queue.length = 0;\n    index = 0;\n    flushing = false;\n}\n\n// `requestFlush` is implemented using a strategy based on data collected from\n// every available SauceLabs Selenium web driver worker at time of writing.\n// https://docs.google.com/spreadsheets/d/1mG-5UYGup5qxGdEMWkhP6BWCz053NUb2E1QoUTU16uA/edit#gid=783724593\n\n// Safari 6 and 6.1 for desktop, iPad, and iPhone are the only browsers that\n// have WebKitMutationObserver but not un-prefixed MutationObserver.\n// Must use `global` or `self` instead of `window` to work in both frames and web\n// workers. `global` is a provision of Browserify, Mr, Mrs, or Mop.\n\n/* globals self */\nvar scope = typeof global !== \"undefined\" ? global : self;\nvar BrowserMutationObserver = scope.MutationObserver || scope.WebKitMutationObserver;\n\n// MutationObservers are desirable because they have high priority and work\n// reliably everywhere they are implemented.\n// They are implemented in all modern browsers.\n//\n// - Android 4-4.3\n// - Chrome 26-34\n// - Firefox 14-29\n// - Internet Explorer 11\n// - iPad Safari 6-7.1\n// - iPhone Safari 7-7.1\n// - Safari 6-7\nif (typeof BrowserMutationObserver === \"function\") {\n    requestFlush = makeRequestCallFromMutationObserver(flush);\n\n// MessageChannels are desirable because they give direct access to the HTML\n// task queue, are implemented in Internet Explorer 10, Safari 5.0-1, and Opera\n// 11-12, and in web workers in many engines.\n// Although message channels yield to any queued rendering and IO tasks, they\n// would be better than imposing the 4ms delay of timers.\n// However, they do not work reliably in Internet Explorer or Safari.\n\n// Internet Explorer 10 is the only browser that has setImmediate but does\n// not have MutationObservers.\n// Although setImmediate yields to the browser's renderer, it would be\n// preferrable to falling back to setTimeout since it does not have\n// the minimum 4ms penalty.\n// Unfortunately there appears to be a bug in Internet Explorer 10 Mobile (and\n// Desktop to a lesser extent) that renders both setImmediate and\n// MessageChannel useless for the purposes of ASAP.\n// https://github.com/kriskowal/q/issues/396\n\n// Timers are implemented universally.\n// We fall back to timers in workers in most engines, and in foreground\n// contexts in the following browsers.\n// However, note that even this simple case requires nuances to operate in a\n// broad spectrum of browsers.\n//\n// - Firefox 3-13\n// - Internet Explorer 6-9\n// - iPad Safari 4.3\n// - Lynx 2.8.7\n} else {\n    requestFlush = makeRequestCallFromTimer(flush);\n}\n\n// `requestFlush` requests that the high priority event queue be flushed as\n// soon as possible.\n// This is useful to prevent an error thrown in a task from stalling the event\n// queue if the exception handled by Node.jss\n// `process.on(\"uncaughtException\")` or by a domain.\nrawAsap.requestFlush = requestFlush;\n\n// To request a high priority event, we induce a mutation observer by toggling\n// the text of a text node between \"1\" and \"-1\".\nfunction makeRequestCallFromMutationObserver(callback) {\n    var toggle = 1;\n    var observer = new BrowserMutationObserver(callback);\n    var node = document.createTextNode(\"\");\n    observer.observe(node, {characterData: true});\n    return function requestCall() {\n        toggle = -toggle;\n        node.data = toggle;\n    };\n}\n\n// The message channel technique was discovered by Malte Ubl and was the\n// original foundation for this library.\n// http://www.nonblocking.io/2011/06/windownexttick.html\n\n// Safari 6.0.5 (at least) intermittently fails to create message ports on a\n// page's first load. Thankfully, this version of Safari supports\n// MutationObservers, so we don't need to fall back in that case.\n\n// function makeRequestCallFromMessageChannel(callback) {\n//     var channel = new MessageChannel();\n//     channel.port1.onmessage = callback;\n//     return function requestCall() {\n//         channel.port2.postMessage(0);\n//     };\n// }\n\n// For reasons explained above, we are also unable to use `setImmediate`\n// under any circumstances.\n// Even if we were, there is another bug in Internet Explorer 10.\n// It is not sufficient to assign `setImmediate` to `requestFlush` because\n// `setImmediate` must be called *by name* and therefore must be wrapped in a\n// closure.\n// Never forget.\n\n// function makeRequestCallFromSetImmediate(callback) {\n//     return function requestCall() {\n//         setImmediate(callback);\n//     };\n// }\n\n// Safari 6.0 has a problem where timers will get lost while the user is\n// scrolling. This problem does not impact ASAP because Safari 6.0 supports\n// mutation observers, so that implementation is used instead.\n// However, if we ever elect to use timers in Safari, the prevalent work-around\n// is to add a scroll event listener that calls for a flush.\n\n// `setTimeout` does not call the passed callback if the delay is less than\n// approximately 7 in web workers in Firefox 8 through 18, and sometimes not\n// even then.\n\nfunction makeRequestCallFromTimer(callback) {\n    return function requestCall() {\n        // We dispatch a timeout with a specified delay of 0 for engines that\n        // can reliably accommodate that request. This will usually be snapped\n        // to a 4 milisecond delay, but once we're flushing, there's no delay\n        // between events.\n        var timeoutHandle = setTimeout(handleTimer, 0);\n        // However, since this timer gets frequently dropped in Firefox\n        // workers, we enlist an interval handle that will try to fire\n        // an event 20 times per second until it succeeds.\n        var intervalHandle = setInterval(handleTimer, 50);\n\n        function handleTimer() {\n            // Whichever timer succeeds will cancel both timers and\n            // execute the callback.\n            clearTimeout(timeoutHandle);\n            clearInterval(intervalHandle);\n            callback();\n        }\n    };\n}\n\n// This is for `asap.js` only.\n// Its name will be periodically randomized to break any code that depends on\n// its existence.\nrawAsap.makeRequestCallFromTimer = makeRequestCallFromTimer;\n\n// ASAP was originally a nextTick shim included in Q. This was factored out\n// into this ASAP package. It was later adapted to RSVP which made further\n// amendments. These decisions, particularly to marginalize MessageChannel and\n// to capture the MutationObserver implementation in a closure, were integrated\n// back into ASAP proper.\n// https://github.com/tildeio/rsvp.js/blob/cddf7232546a9cf858524b75cde6f9edf72620a7/lib/rsvp/asap.js\n","const path = require('path');\n\nmodule.exports = function express(env, app) {\n  function NunjucksView(name, opts) {\n    this.name = name;\n    this.path = name;\n    this.defaultEngine = opts.defaultEngine;\n    this.ext = path.extname(name);\n    if (!this.ext && !this.defaultEngine) {\n      throw new Error('No default engine was specified and no extension was provided.');\n    }\n    if (!this.ext) {\n      this.name += (this.ext = (this.defaultEngine[0] !== '.' ? '.' : '') + this.defaultEngine);\n    }\n  }\n\n  NunjucksView.prototype.render = function render(opts, cb) {\n    env.render(this.name, opts, cb);\n  };\n\n  app.set('view', NunjucksView);\n  app.set('nunjucksEnv', env);\n  return env;\n};\n","'use strict';\n\nconst {Obj} = require('./object');\n\nfunction traverseAndCheck(obj, type, results) {\n  if (obj instanceof type) {\n    results.push(obj);\n  }\n\n  if (obj instanceof Node) {\n    obj.findAll(type, results);\n  }\n}\n\nclass Node extends Obj {\n  init(lineno, colno, ...args) {\n    this.lineno = lineno;\n    this.colno = colno;\n\n    this.fields.forEach((field, i) => {\n      // The first two args are line/col numbers, so offset by 2\n      var val = arguments[i + 2];\n\n      // Fields should never be undefined, but null. It makes\n      // testing easier to normalize values.\n      if (val === undefined) {\n        val = null;\n      }\n\n      this[field] = val;\n    });\n  }\n\n  findAll(type, results) {\n    results = results || [];\n\n    if (this instanceof NodeList) {\n      this.children.forEach(child => traverseAndCheck(child, type, results));\n    } else {\n      this.fields.forEach(field => traverseAndCheck(this[field], type, results));\n    }\n\n    return results;\n  }\n\n  iterFields(func) {\n    this.fields.forEach((field) => {\n      func(this[field], field);\n    });\n  }\n}\n\n// Abstract nodes\nclass Value extends Node {\n  get typename() { return 'Value'; }\n  get fields() {\n    return ['value'];\n  }\n}\n\n// Concrete nodes\nclass NodeList extends Node {\n  get typename() { return 'NodeList'; }\n  get fields() { return ['children']; }\n\n  init(lineno, colno, nodes) {\n    super.init(lineno, colno, nodes || []);\n  }\n\n  addChild(node) {\n    this.children.push(node);\n  }\n}\n\nconst Root = NodeList.extend('Root');\nconst Literal = Value.extend('Literal');\nconst Symbol = Value.extend('Symbol');\nconst Group = NodeList.extend('Group');\nconst ArrayNode = NodeList.extend('Array');\nconst Pair = Node.extend('Pair', { fields: ['key', 'value'] });\nconst Dict = NodeList.extend('Dict');\nconst LookupVal = Node.extend('LookupVal', { fields: ['target', 'val'] });\nconst If = Node.extend('If', { fields: ['cond', 'body', 'else_'] });\nconst IfAsync = If.extend('IfAsync');\nconst InlineIf = Node.extend('InlineIf', { fields: ['cond', 'body', 'else_'] });\nconst For = Node.extend('For', { fields: ['arr', 'name', 'body', 'else_'] });\nconst AsyncEach = For.extend('AsyncEach');\nconst AsyncAll = For.extend('AsyncAll');\nconst Macro = Node.extend('Macro', { fields: ['name', 'args', 'body'] });\nconst Caller = Macro.extend('Caller');\nconst Import = Node.extend('Import', { fields: ['template', 'target', 'withContext'] });\n\nclass FromImport extends Node {\n  get typename() { return 'FromImport'; }\n  get fields() { return ['template', 'names', 'withContext']; }\n\n  init(lineno, colno, template, names, withContext) {\n    super.init(lineno, colno, template, names || new NodeList(), withContext);\n  }\n}\n\nconst FunCall = Node.extend('FunCall', { fields: ['name', 'args'] });\nconst Filter = FunCall.extend('Filter');\nconst FilterAsync = Filter.extend('FilterAsync', { fields: ['name', 'args', 'symbol'] });\nconst KeywordArgs = Dict.extend('KeywordArgs');\nconst Block = Node.extend('Block', { fields: ['name', 'body'] });\nconst Super = Node.extend('Super', { fields: ['blockName', 'symbol'] });\nconst TemplateRef = Node.extend('TemplateRef', { fields: ['template'] });\nconst Extends = TemplateRef.extend('Extends');\nconst Include = Node.extend('Include', { fields: ['template', 'ignoreMissing'] });\nconst Set = Node.extend('Set', { fields: ['targets', 'value'] });\nconst Switch = Node.extend('Switch', { fields: ['expr', 'cases', 'default'] });\nconst Case = Node.extend('Case', { fields: ['cond', 'body'] });\nconst Output = NodeList.extend('Output');\nconst Capture = Node.extend('Capture', { fields: ['body'] });\nconst TemplateData = Literal.extend('TemplateData');\nconst UnaryOp = Node.extend('UnaryOp', { fields: ['target'] });\nconst BinOp = Node.extend('BinOp', { fields: ['left', 'right'] });\nconst In = BinOp.extend('In');\nconst Is = BinOp.extend('Is');\nconst Or = BinOp.extend('Or');\nconst And = BinOp.extend('And');\nconst Not = UnaryOp.extend('Not');\nconst Add = BinOp.extend('Add');\nconst Concat = BinOp.extend('Concat');\nconst Sub = BinOp.extend('Sub');\nconst Mul = BinOp.extend('Mul');\nconst Div = BinOp.extend('Div');\nconst FloorDiv = BinOp.extend('FloorDiv');\nconst Mod = BinOp.extend('Mod');\nconst Pow = BinOp.extend('Pow');\nconst Neg = UnaryOp.extend('Neg');\nconst Pos = UnaryOp.extend('Pos');\nconst Compare = Node.extend('Compare', { fields: ['expr', 'ops'] });\nconst CompareOperand = Node.extend('CompareOperand', { fields: ['expr', 'type'] });\nconst CallExtension = Node.extend('CallExtension', {\n  init(ext, prop, args, contentArgs) {\n    this.parent();\n    this.extName = ext.__name || ext;\n    this.prop = prop;\n    this.args = args || new NodeList();\n    this.contentArgs = contentArgs || [];\n    this.autoescape = ext.autoescape;\n  },\n  fields: ['extName', 'prop', 'args', 'contentArgs']\n});\nconst CallExtensionAsync = CallExtension.extend('CallExtensionAsync');\n\n// This is hacky, but this is just a debugging function anyway\nfunction print(str, indent, inline) {\n  var lines = str.split('\\n');\n\n  lines.forEach((line, i) => {\n    if (line && ((inline && i > 0) || !inline)) {\n      process.stdout.write((' ').repeat(indent));\n    }\n    const nl = (i === lines.length - 1) ? '' : '\\n';\n    process.stdout.write(`${line}${nl}`);\n  });\n}\n\n// Print the AST in a nicely formatted tree format for debuggin\nfunction printNodes(node, indent) {\n  indent = indent || 0;\n\n  print(node.typename + ': ', indent);\n\n  if (node instanceof NodeList) {\n    print('\\n');\n    node.children.forEach((n) => {\n      printNodes(n, indent + 2);\n    });\n  } else if (node instanceof CallExtension) {\n    print(`${node.extName}.${node.prop}\\n`);\n\n    if (node.args) {\n      printNodes(node.args, indent + 2);\n    }\n\n    if (node.contentArgs) {\n      node.contentArgs.forEach((n) => {\n        printNodes(n, indent + 2);\n      });\n    }\n  } else {\n    let nodes = [];\n    let props = null;\n\n    node.iterFields((val, fieldName) => {\n      if (val instanceof Node) {\n        nodes.push([fieldName, val]);\n      } else {\n        props = props || {};\n        props[fieldName] = val;\n      }\n    });\n\n    if (props) {\n      print(JSON.stringify(props, null, 2) + '\\n', null, true);\n    } else {\n      print('\\n');\n    }\n\n    nodes.forEach(([fieldName, n]) => {\n      print(`[${fieldName}] =>`, indent + 2);\n      printNodes(n, indent + 4);\n    });\n  }\n}\n\nmodule.exports = {\n  Node: Node,\n  Root: Root,\n  NodeList: NodeList,\n  Value: Value,\n  Literal: Literal,\n  Symbol: Symbol,\n  Group: Group,\n  Array: ArrayNode,\n  Pair: Pair,\n  Dict: Dict,\n  Output: Output,\n  Capture: Capture,\n  TemplateData: TemplateData,\n  If: If,\n  IfAsync: IfAsync,\n  InlineIf: InlineIf,\n  For: For,\n  AsyncEach: AsyncEach,\n  AsyncAll: AsyncAll,\n  Macro: Macro,\n  Caller: Caller,\n  Import: Import,\n  FromImport: FromImport,\n  FunCall: FunCall,\n  Filter: Filter,\n  FilterAsync: FilterAsync,\n  KeywordArgs: KeywordArgs,\n  Block: Block,\n  Super: Super,\n  Extends: Extends,\n  Include: Include,\n  Set: Set,\n  Switch: Switch,\n  Case: Case,\n  LookupVal: LookupVal,\n  BinOp: BinOp,\n  In: In,\n  Is: Is,\n  Or: Or,\n  And: And,\n  Not: Not,\n  Add: Add,\n  Concat: Concat,\n  Sub: Sub,\n  Mul: Mul,\n  Div: Div,\n  FloorDiv: FloorDiv,\n  Mod: Mod,\n  Pow: Pow,\n  Neg: Neg,\n  Pos: Pos,\n  Compare: Compare,\n  CompareOperand: CompareOperand,\n\n  CallExtension: CallExtension,\n  CallExtensionAsync: CallExtensionAsync,\n\n  printNodes: printNodes\n};\n","'use strict';\n\nconst asap = require('asap');\nconst waterfall = require('a-sync-waterfall');\nconst lib = require('./lib');\nconst compiler = require('./compiler');\nconst filters = require('./filters');\nconst {FileSystemLoader, WebLoader, PrecompiledLoader} = require('./loaders');\nconst tests = require('./tests');\nconst globals = require('./globals');\nconst {Obj, EmitterObj} = require('./object');\nconst globalRuntime = require('./runtime');\nconst {handleError, Frame} = globalRuntime;\nconst expressApp = require('./express-app');\n\n// If the user is using the async API, *always* call it\n// asynchronously even if the template was synchronous.\nfunction callbackAsap(cb, err, res) {\n  asap(() => {\n    cb(err, res);\n  });\n}\n\n/**\n * A no-op template, for use with {% include ignore missing %}\n */\nconst noopTmplSrc = {\n  type: 'code',\n  obj: {\n    root(env, context, frame, runtime, cb) {\n      try {\n        cb(null, '');\n      } catch (e) {\n        cb(handleError(e, null, null));\n      }\n    }\n  }\n};\n\nclass Environment extends EmitterObj {\n  init(loaders, opts) {\n    // The dev flag determines the trace that'll be shown on errors.\n    // If set to true, returns the full trace from the error point,\n    // otherwise will return trace starting from Template.render\n    // (the full trace from within nunjucks may confuse developers using\n    //  the library)\n    // defaults to false\n    opts = this.opts = opts || {};\n    this.opts.dev = !!opts.dev;\n\n    // The autoescape flag sets global autoescaping. If true,\n    // every string variable will be escaped by default.\n    // If false, strings can be manually escaped using the `escape` filter.\n    // defaults to true\n    this.opts.autoescape = opts.autoescape != null ? opts.autoescape : true;\n\n    // If true, this will make the system throw errors if trying\n    // to output a null or undefined value\n    this.opts.throwOnUndefined = !!opts.throwOnUndefined;\n    this.opts.trimBlocks = !!opts.trimBlocks;\n    this.opts.lstripBlocks = !!opts.lstripBlocks;\n\n    this.loaders = [];\n\n    if (!loaders) {\n      // The filesystem loader is only available server-side\n      if (FileSystemLoader) {\n        this.loaders = [new FileSystemLoader('views')];\n      } else if (WebLoader) {\n        this.loaders = [new WebLoader('/views')];\n      }\n    } else {\n      this.loaders = lib.isArray(loaders) ? loaders : [loaders];\n    }\n\n    // It's easy to use precompiled templates: just include them\n    // before you configure nunjucks and this will automatically\n    // pick it up and use it\n    if (typeof window !== 'undefined' && window.nunjucksPrecompiled) {\n      this.loaders.unshift(\n        new PrecompiledLoader(window.nunjucksPrecompiled)\n      );\n    }\n\n    this._initLoaders();\n\n    this.globals = globals();\n    this.filters = {};\n    this.tests = {};\n    this.asyncFilters = [];\n    this.extensions = {};\n    this.extensionsList = [];\n\n    lib._entries(filters).forEach(([name, filter]) => this.addFilter(name, filter));\n    lib._entries(tests).forEach(([name, test]) => this.addTest(name, test));\n  }\n\n  _initLoaders() {\n    this.loaders.forEach((loader) => {\n      // Caching and cache busting\n      loader.cache = {};\n      if (typeof loader.on === 'function') {\n        loader.on('update', (name, fullname) => {\n          loader.cache[name] = null;\n          this.emit('update', name, fullname, loader);\n        });\n        loader.on('load', (name, source) => {\n          this.emit('load', name, source, loader);\n        });\n      }\n    });\n  }\n\n  invalidateCache() {\n    this.loaders.forEach((loader) => {\n      loader.cache = {};\n    });\n  }\n\n  addExtension(name, extension) {\n    extension.__name = name;\n    this.extensions[name] = extension;\n    this.extensionsList.push(extension);\n    return this;\n  }\n\n  removeExtension(name) {\n    var extension = this.getExtension(name);\n    if (!extension) {\n      return;\n    }\n\n    this.extensionsList = lib.without(this.extensionsList, extension);\n    delete this.extensions[name];\n  }\n\n  getExtension(name) {\n    return this.extensions[name];\n  }\n\n  hasExtension(name) {\n    return !!this.extensions[name];\n  }\n\n  addGlobal(name, value) {\n    this.globals[name] = value;\n    return this;\n  }\n\n  getGlobal(name) {\n    if (typeof this.globals[name] === 'undefined') {\n      throw new Error('global not found: ' + name);\n    }\n    return this.globals[name];\n  }\n\n  addFilter(name, func, async) {\n    var wrapped = func;\n\n    if (async) {\n      this.asyncFilters.push(name);\n    }\n    this.filters[name] = wrapped;\n    return this;\n  }\n\n  getFilter(name) {\n    if (!this.filters[name]) {\n      throw new Error('filter not found: ' + name);\n    }\n    return this.filters[name];\n  }\n\n  addTest(name, func) {\n    this.tests[name] = func;\n    return this;\n  }\n\n  getTest(name) {\n    if (!this.tests[name]) {\n      throw new Error('test not found: ' + name);\n    }\n    return this.tests[name];\n  }\n\n  resolveTemplate(loader, parentName, filename) {\n    var isRelative = (loader.isRelative && parentName) ? loader.isRelative(filename) : false;\n    return (isRelative && loader.resolve) ? loader.resolve(parentName, filename) : filename;\n  }\n\n  getTemplate(name, eagerCompile, parentName, ignoreMissing, cb) {\n    var that = this;\n    var tmpl = null;\n    if (name && name.raw) {\n      // this fixes autoescape for templates referenced in symbols\n      name = name.raw;\n    }\n\n    if (lib.isFunction(parentName)) {\n      cb = parentName;\n      parentName = null;\n      eagerCompile = eagerCompile || false;\n    }\n\n    if (lib.isFunction(eagerCompile)) {\n      cb = eagerCompile;\n      eagerCompile = false;\n    }\n\n    if (name instanceof Template) {\n      tmpl = name;\n    } else if (typeof name !== 'string') {\n      throw new Error('template names must be a string: ' + name);\n    } else {\n      for (let i = 0; i < this.loaders.length; i++) {\n        const loader = this.loaders[i];\n        tmpl = loader.cache[this.resolveTemplate(loader, parentName, name)];\n        if (tmpl) {\n          break;\n        }\n      }\n    }\n\n    if (tmpl) {\n      if (eagerCompile) {\n        tmpl.compile();\n      }\n\n      if (cb) {\n        cb(null, tmpl);\n        return undefined;\n      } else {\n        return tmpl;\n      }\n    }\n    let syncResult;\n\n    const createTemplate = (err, info) => {\n      if (!info && !err && !ignoreMissing) {\n        err = new Error('template not found: ' + name);\n      }\n\n      if (err) {\n        if (cb) {\n          cb(err);\n          return;\n        } else {\n          throw err;\n        }\n      }\n      let newTmpl;\n      if (!info) {\n        newTmpl = new Template(noopTmplSrc, this, '', eagerCompile);\n      } else {\n        newTmpl = new Template(info.src, this, info.path, eagerCompile);\n        if (!info.noCache) {\n          info.loader.cache[name] = newTmpl;\n        }\n      }\n      if (cb) {\n        cb(null, newTmpl);\n      } else {\n        syncResult = newTmpl;\n      }\n    };\n\n    lib.asyncIter(this.loaders, (loader, i, next, done) => {\n      function handle(err, src) {\n        if (err) {\n          done(err);\n        } else if (src) {\n          src.loader = loader;\n          done(null, src);\n        } else {\n          next();\n        }\n      }\n\n      // Resolve name relative to parentName\n      name = that.resolveTemplate(loader, parentName, name);\n\n      if (loader.async) {\n        loader.getSource(name, handle);\n      } else {\n        handle(null, loader.getSource(name));\n      }\n    }, createTemplate);\n\n    return syncResult;\n  }\n\n  express(app) {\n    return expressApp(this, app);\n  }\n\n  render(name, ctx, cb) {\n    if (lib.isFunction(ctx)) {\n      cb = ctx;\n      ctx = null;\n    }\n\n    // We support a synchronous API to make it easier to migrate\n    // existing code to async. This works because if you don't do\n    // anything async work, the whole thing is actually run\n    // synchronously.\n    let syncResult = null;\n\n    this.getTemplate(name, (err, tmpl) => {\n      if (err && cb) {\n        callbackAsap(cb, err);\n      } else if (err) {\n        throw err;\n      } else {\n        syncResult = tmpl.render(ctx, cb);\n      }\n    });\n\n    return syncResult;\n  }\n\n  renderString(src, ctx, opts, cb) {\n    if (lib.isFunction(opts)) {\n      cb = opts;\n      opts = {};\n    }\n    opts = opts || {};\n\n    const tmpl = new Template(src, this, opts.path);\n    return tmpl.render(ctx, cb);\n  }\n\n  waterfall(tasks, callback, forceAsync) {\n    return waterfall(tasks, callback, forceAsync);\n  }\n}\n\nclass Context extends Obj {\n  init(ctx, blocks, env) {\n    // Has to be tied to an environment so we can tap into its globals.\n    this.env = env || new Environment();\n\n    // Make a duplicate of ctx\n    this.ctx = lib.extend({}, ctx);\n\n    this.blocks = {};\n    this.exported = [];\n\n    lib.keys(blocks).forEach(name => {\n      this.addBlock(name, blocks[name]);\n    });\n  }\n\n  lookup(name) {\n    // This is one of the most called functions, so optimize for\n    // the typical case where the name isn't in the globals\n    if (name in this.env.globals && !(name in this.ctx)) {\n      return this.env.globals[name];\n    } else {\n      return this.ctx[name];\n    }\n  }\n\n  setVariable(name, val) {\n    this.ctx[name] = val;\n  }\n\n  getVariables() {\n    return this.ctx;\n  }\n\n  addBlock(name, block) {\n    this.blocks[name] = this.blocks[name] || [];\n    this.blocks[name].push(block);\n    return this;\n  }\n\n  getBlock(name) {\n    if (!this.blocks[name]) {\n      throw new Error('unknown block \"' + name + '\"');\n    }\n\n    return this.blocks[name][0];\n  }\n\n  getSuper(env, name, block, frame, runtime, cb) {\n    var idx = lib.indexOf(this.blocks[name] || [], block);\n    var blk = this.blocks[name][idx + 1];\n    var context = this;\n\n    if (idx === -1 || !blk) {\n      throw new Error('no super block available for \"' + name + '\"');\n    }\n\n    blk(env, context, frame, runtime, cb);\n  }\n\n  addExport(name) {\n    this.exported.push(name);\n  }\n\n  getExported() {\n    var exported = {};\n    this.exported.forEach((name) => {\n      exported[name] = this.ctx[name];\n    });\n    return exported;\n  }\n}\n\nclass Template extends Obj {\n  init(src, env, path, eagerCompile) {\n    this.env = env || new Environment();\n\n    if (lib.isObject(src)) {\n      switch (src.type) {\n        case 'code':\n          this.tmplProps = src.obj;\n          break;\n        case 'string':\n          this.tmplStr = src.obj;\n          break;\n        default:\n          throw new Error(\n            `Unexpected template object type ${src.type}; expected 'code', or 'string'`);\n      }\n    } else if (lib.isString(src)) {\n      this.tmplStr = src;\n    } else {\n      throw new Error('src must be a string or an object describing the source');\n    }\n\n    this.path = path;\n\n    if (eagerCompile) {\n      try {\n        this._compile();\n      } catch (err) {\n        throw lib._prettifyError(this.path, this.env.opts.dev, err);\n      }\n    } else {\n      this.compiled = false;\n    }\n  }\n\n  render(ctx, parentFrame, cb) {\n    if (typeof ctx === 'function') {\n      cb = ctx;\n      ctx = {};\n    } else if (typeof parentFrame === 'function') {\n      cb = parentFrame;\n      parentFrame = null;\n    }\n\n    // If there is a parent frame, we are being called from internal\n    // code of another template, and the internal system\n    // depends on the sync/async nature of the parent template\n    // to be inherited, so force an async callback\n    const forceAsync = !parentFrame;\n\n    // Catch compile errors for async rendering\n    try {\n      this.compile();\n    } catch (e) {\n      const err = lib._prettifyError(this.path, this.env.opts.dev, e);\n      if (cb) {\n        return callbackAsap(cb, err);\n      } else {\n        throw err;\n      }\n    }\n\n    const context = new Context(ctx || {}, this.blocks, this.env);\n    const frame = parentFrame ? parentFrame.push(true) : new Frame();\n    frame.topLevel = true;\n    let syncResult = null;\n    let didError = false;\n\n    this.rootRenderFunc(this.env, context, frame, globalRuntime, (err, res) => {\n      // TODO: this is actually a bug in the compiled template (because waterfall\n      // tasks are both not passing errors up the chain of callbacks AND are not\n      // causing a return from the top-most render function). But fixing that\n      // will require a more substantial change to the compiler.\n      if (didError && cb && typeof res !== 'undefined') {\n        // prevent multiple calls to cb\n        return;\n      }\n\n      if (err) {\n        err = lib._prettifyError(this.path, this.env.opts.dev, err);\n        didError = true;\n      }\n\n      if (cb) {\n        if (forceAsync) {\n          callbackAsap(cb, err, res);\n        } else {\n          cb(err, res);\n        }\n      } else {\n        if (err) {\n          throw err;\n        }\n        syncResult = res;\n      }\n    });\n\n    return syncResult;\n  }\n\n\n  getExported(ctx, parentFrame, cb) { // eslint-disable-line consistent-return\n    if (typeof ctx === 'function') {\n      cb = ctx;\n      ctx = {};\n    }\n\n    if (typeof parentFrame === 'function') {\n      cb = parentFrame;\n      parentFrame = null;\n    }\n\n    // Catch compile errors for async rendering\n    try {\n      this.compile();\n    } catch (e) {\n      if (cb) {\n        return cb(e);\n      } else {\n        throw e;\n      }\n    }\n\n    const frame = parentFrame ? parentFrame.push() : new Frame();\n    frame.topLevel = true;\n\n    // Run the rootRenderFunc to populate the context with exported vars\n    const context = new Context(ctx || {}, this.blocks, this.env);\n    this.rootRenderFunc(this.env, context, frame, globalRuntime, (err) => {\n      if (err) {\n        cb(err, null);\n      } else {\n        cb(null, context.getExported());\n      }\n    });\n  }\n\n  compile() {\n    if (!this.compiled) {\n      this._compile();\n    }\n  }\n\n  _compile() {\n    var props;\n\n    if (this.tmplProps) {\n      props = this.tmplProps;\n    } else {\n      const source = compiler.compile(this.tmplStr,\n        this.env.asyncFilters,\n        this.env.extensionsList,\n        this.path,\n        this.env.opts);\n\n      const func = new Function(source); // eslint-disable-line no-new-func\n      props = func();\n    }\n\n    this.blocks = this._getBlocks(props);\n    this.rootRenderFunc = props.root;\n    this.compiled = true;\n  }\n\n  _getBlocks(props) {\n    var blocks = {};\n\n    lib.keys(props).forEach((k) => {\n      if (k.slice(0, 2) === 'b_') {\n        blocks[k.slice(2)] = props[k];\n      }\n    });\n\n    return blocks;\n  }\n}\n\nmodule.exports = {\n  Environment: Environment,\n  Template: Template\n};\n","'use strict';\n\n// A simple class system, more documentation to come\nconst EventEmitter = require('events');\nconst lib = require('./lib');\n\nfunction parentWrap(parent, prop) {\n  if (typeof parent !== 'function' || typeof prop !== 'function') {\n    return prop;\n  }\n  return function wrap() {\n    // Save the current parent method\n    const tmp = this.parent;\n\n    // Set parent to the previous method, call, and restore\n    this.parent = parent;\n    const res = prop.apply(this, arguments);\n    this.parent = tmp;\n\n    return res;\n  };\n}\n\nfunction extendClass(cls, name, props) {\n  props = props || {};\n\n  lib.keys(props).forEach(k => {\n    props[k] = parentWrap(cls.prototype[k], props[k]);\n  });\n\n  class subclass extends cls {\n    get typename() {\n      return name;\n    }\n  }\n\n  lib._assign(subclass.prototype, props);\n\n  return subclass;\n}\n\nclass Obj {\n  constructor(...args) {\n    // Unfortunately necessary for backwards compatibility\n    this.init(...args);\n  }\n\n  init() {}\n\n  get typename() {\n    return this.constructor.name;\n  }\n\n  static extend(name, props) {\n    if (typeof name === 'object') {\n      props = name;\n      name = 'anonymous';\n    }\n    return extendClass(this, name, props);\n  }\n}\n\nclass EmitterObj extends EventEmitter {\n  constructor(...args) {\n    super();\n    // Unfortunately necessary for backwards compatibility\n    this.init(...args);\n  }\n\n  init() {}\n\n  get typename() {\n    return this.constructor.name;\n  }\n\n  static extend(name, props) {\n    if (typeof name === 'object') {\n      props = name;\n      name = 'anonymous';\n    }\n    return extendClass(this, name, props);\n  }\n}\n\nmodule.exports = { Obj, EmitterObj };\n","'use strict';\n\nconst parser = require('./parser');\nconst transformer = require('./transformer');\nconst nodes = require('./nodes');\nconst {TemplateError} = require('./lib');\nconst {Frame} = require('./runtime');\nconst {Obj} = require('./object');\n\n// These are all the same for now, but shouldn't be passed straight\n// through\nconst compareOps = {\n  '==': '==',\n  '===': '===',\n  '!=': '!=',\n  '!==': '!==',\n  '<': '<',\n  '>': '>',\n  '<=': '<=',\n  '>=': '>='\n};\n\nclass Compiler extends Obj {\n  init(templateName, throwOnUndefined) {\n    this.templateName = templateName;\n    this.codebuf = [];\n    this.lastId = 0;\n    this.buffer = null;\n    this.bufferStack = [];\n    this._scopeClosers = '';\n    this.inBlock = false;\n    this.throwOnUndefined = throwOnUndefined;\n  }\n\n  fail(msg, lineno, colno) {\n    if (lineno !== undefined) {\n      lineno += 1;\n    }\n    if (colno !== undefined) {\n      colno += 1;\n    }\n\n    throw new TemplateError(msg, lineno, colno);\n  }\n\n  _pushBuffer() {\n    const id = this._tmpid();\n    this.bufferStack.push(this.buffer);\n    this.buffer = id;\n    this._emit(`var ${this.buffer} = \"\";`);\n    return id;\n  }\n\n  _popBuffer() {\n    this.buffer = this.bufferStack.pop();\n  }\n\n  _emit(code) {\n    this.codebuf.push(code);\n  }\n\n  _emitLine(code) {\n    this._emit(code + '\\n');\n  }\n\n  _emitLines(...lines) {\n    lines.forEach((line) => this._emitLine(line));\n  }\n\n  _emitFuncBegin(node, name) {\n    this.buffer = 'output';\n    this._scopeClosers = '';\n    this._emitLine(`function ${name}(env, context, frame, runtime, cb) {`);\n    this._emitLine(`var lineno = ${node.lineno};`);\n    this._emitLine(`var colno = ${node.colno};`);\n    this._emitLine(`var ${this.buffer} = \"\";`);\n    this._emitLine('try {');\n  }\n\n  _emitFuncEnd(noReturn) {\n    if (!noReturn) {\n      this._emitLine('cb(null, ' + this.buffer + ');');\n    }\n\n    this._closeScopeLevels();\n    this._emitLine('} catch (e) {');\n    this._emitLine('  cb(runtime.handleError(e, lineno, colno));');\n    this._emitLine('}');\n    this._emitLine('}');\n    this.buffer = null;\n  }\n\n  _addScopeLevel() {\n    this._scopeClosers += '})';\n  }\n\n  _closeScopeLevels() {\n    this._emitLine(this._scopeClosers + ';');\n    this._scopeClosers = '';\n  }\n\n  _withScopedSyntax(func) {\n    var _scopeClosers = this._scopeClosers;\n    this._scopeClosers = '';\n\n    func.call(this);\n\n    this._closeScopeLevels();\n    this._scopeClosers = _scopeClosers;\n  }\n\n  _makeCallback(res) {\n    var err = this._tmpid();\n\n    return 'function(' + err + (res ? ',' + res : '') + ') {\\n' +\n      'if(' + err + ') { cb(' + err + '); return; }';\n  }\n\n  _tmpid() {\n    this.lastId++;\n    return 't_' + this.lastId;\n  }\n\n  _templateName() {\n    return this.templateName == null ? 'undefined' : JSON.stringify(this.templateName);\n  }\n\n  _compileChildren(node, frame) {\n    node.children.forEach((child) => {\n      this.compile(child, frame);\n    });\n  }\n\n  _compileAggregate(node, frame, startChar, endChar) {\n    if (startChar) {\n      this._emit(startChar);\n    }\n\n    node.children.forEach((child, i) => {\n      if (i > 0) {\n        this._emit(',');\n      }\n\n      this.compile(child, frame);\n    });\n\n    if (endChar) {\n      this._emit(endChar);\n    }\n  }\n\n  _compileExpression(node, frame) {\n    // TODO: I'm not really sure if this type check is worth it or\n    // not.\n    this.assertType(\n      node,\n      nodes.Literal,\n      nodes.Symbol,\n      nodes.Group,\n      nodes.Array,\n      nodes.Dict,\n      nodes.FunCall,\n      nodes.Caller,\n      nodes.Filter,\n      nodes.LookupVal,\n      nodes.Compare,\n      nodes.InlineIf,\n      nodes.In,\n      nodes.Is,\n      nodes.And,\n      nodes.Or,\n      nodes.Not,\n      nodes.Add,\n      nodes.Concat,\n      nodes.Sub,\n      nodes.Mul,\n      nodes.Div,\n      nodes.FloorDiv,\n      nodes.Mod,\n      nodes.Pow,\n      nodes.Neg,\n      nodes.Pos,\n      nodes.Compare,\n      nodes.NodeList\n    );\n    this.compile(node, frame);\n  }\n\n  assertType(node, ...types) {\n    if (!types.some(t => node instanceof t)) {\n      this.fail(`assertType: invalid type: ${node.typename}`, node.lineno, node.colno);\n    }\n  }\n\n  compileCallExtension(node, frame, async) {\n    var args = node.args;\n    var contentArgs = node.contentArgs;\n    var autoescape = typeof node.autoescape === 'boolean' ? node.autoescape : true;\n\n    if (!async) {\n      this._emit(`${this.buffer} += runtime.suppressValue(`);\n    }\n\n    this._emit(`env.getExtension(\"${node.extName}\")[\"${node.prop}\"](`);\n    this._emit('context');\n\n    if (args || contentArgs) {\n      this._emit(',');\n    }\n\n    if (args) {\n      if (!(args instanceof nodes.NodeList)) {\n        this.fail('compileCallExtension: arguments must be a NodeList, ' +\n          'use `parser.parseSignature`');\n      }\n\n      args.children.forEach((arg, i) => {\n        // Tag arguments are passed normally to the call. Note\n        // that keyword arguments are turned into a single js\n        // object as the last argument, if they exist.\n        this._compileExpression(arg, frame);\n\n        if (i !== args.children.length - 1 || contentArgs.length) {\n          this._emit(',');\n        }\n      });\n    }\n\n    if (contentArgs.length) {\n      contentArgs.forEach((arg, i) => {\n        if (i > 0) {\n          this._emit(',');\n        }\n\n        if (arg) {\n          this._emitLine('function(cb) {');\n          this._emitLine('if(!cb) { cb = function(err) { if(err) { throw err; }}}');\n          const id = this._pushBuffer();\n\n          this._withScopedSyntax(() => {\n            this.compile(arg, frame);\n            this._emitLine(`cb(null, ${id});`);\n          });\n\n          this._popBuffer();\n          this._emitLine(`return ${id};`);\n          this._emitLine('}');\n        } else {\n          this._emit('null');\n        }\n      });\n    }\n\n    if (async) {\n      const res = this._tmpid();\n      this._emitLine(', ' + this._makeCallback(res));\n      this._emitLine(\n        `${this.buffer} += runtime.suppressValue(${res}, ${autoescape} && env.opts.autoescape);`);\n      this._addScopeLevel();\n    } else {\n      this._emit(')');\n      this._emit(`, ${autoescape} && env.opts.autoescape);\\n`);\n    }\n  }\n\n  compileCallExtensionAsync(node, frame) {\n    this.compileCallExtension(node, frame, true);\n  }\n\n  compileNodeList(node, frame) {\n    this._compileChildren(node, frame);\n  }\n\n  compileLiteral(node) {\n    if (typeof node.value === 'string') {\n      let val = node.value.replace(/\\\\/g, '\\\\\\\\');\n      val = val.replace(/\"/g, '\\\\\"');\n      val = val.replace(/\\n/g, '\\\\n');\n      val = val.replace(/\\r/g, '\\\\r');\n      val = val.replace(/\\t/g, '\\\\t');\n      val = val.replace(/\\u2028/g, '\\\\u2028');\n      this._emit(`\"${val}\"`);\n    } else if (node.value === null) {\n      this._emit('null');\n    } else {\n      this._emit(node.value.toString());\n    }\n  }\n\n  compileSymbol(node, frame) {\n    var name = node.value;\n    var v = frame.lookup(name);\n\n    if (v) {\n      this._emit(v);\n    } else {\n      this._emit('runtime.contextOrFrameLookup(' +\n        'context, frame, \"' + name + '\")');\n    }\n  }\n\n  compileGroup(node, frame) {\n    this._compileAggregate(node, frame, '(', ')');\n  }\n\n  compileArray(node, frame) {\n    this._compileAggregate(node, frame, '[', ']');\n  }\n\n  compileDict(node, frame) {\n    this._compileAggregate(node, frame, '{', '}');\n  }\n\n  compilePair(node, frame) {\n    var key = node.key;\n    var val = node.value;\n\n    if (key instanceof nodes.Symbol) {\n      key = new nodes.Literal(key.lineno, key.colno, key.value);\n    } else if (!(key instanceof nodes.Literal &&\n      typeof key.value === 'string')) {\n      this.fail('compilePair: Dict keys must be strings or names',\n        key.lineno,\n        key.colno);\n    }\n\n    this.compile(key, frame);\n    this._emit(': ');\n    this._compileExpression(val, frame);\n  }\n\n  compileInlineIf(node, frame) {\n    this._emit('(');\n    this.compile(node.cond, frame);\n    this._emit('?');\n    this.compile(node.body, frame);\n    this._emit(':');\n    if (node.else_ !== null) {\n      this.compile(node.else_, frame);\n    } else {\n      this._emit('\"\"');\n    }\n    this._emit(')');\n  }\n\n  compileIn(node, frame) {\n    this._emit('runtime.inOperator(');\n    this.compile(node.left, frame);\n    this._emit(',');\n    this.compile(node.right, frame);\n    this._emit(')');\n  }\n\n  compileIs(node, frame) {\n    // first, we need to try to get the name of the test function, if it's a\n    // callable (i.e., has args) and not a symbol.\n    var right = node.right.name\n      ? node.right.name.value\n      // otherwise go with the symbol value\n      : node.right.value;\n    this._emit('env.getTest(\"' + right + '\").call(context, ');\n    this.compile(node.left, frame);\n    // compile the arguments for the callable if they exist\n    if (node.right.args) {\n      this._emit(',');\n      this.compile(node.right.args, frame);\n    }\n    this._emit(') === true');\n  }\n\n  _binOpEmitter(node, frame, str) {\n    this.compile(node.left, frame);\n    this._emit(str);\n    this.compile(node.right, frame);\n  }\n\n  // ensure concatenation instead of addition\n  // by adding empty string in between\n  compileOr(node, frame) {\n    return this._binOpEmitter(node, frame, ' || ');\n  }\n\n  compileAnd(node, frame) {\n    return this._binOpEmitter(node, frame, ' && ');\n  }\n\n  compileAdd(node, frame) {\n    return this._binOpEmitter(node, frame, ' + ');\n  }\n\n  compileConcat(node, frame) {\n    return this._binOpEmitter(node, frame, ' + \"\" + ');\n  }\n\n  compileSub(node, frame) {\n    return this._binOpEmitter(node, frame, ' - ');\n  }\n\n  compileMul(node, frame) {\n    return this._binOpEmitter(node, frame, ' * ');\n  }\n\n  compileDiv(node, frame) {\n    return this._binOpEmitter(node, frame, ' / ');\n  }\n\n  compileMod(node, frame) {\n    return this._binOpEmitter(node, frame, ' % ');\n  }\n\n  compileNot(node, frame) {\n    this._emit('!');\n    this.compile(node.target, frame);\n  }\n\n  compileFloorDiv(node, frame) {\n    this._emit('Math.floor(');\n    this.compile(node.left, frame);\n    this._emit(' / ');\n    this.compile(node.right, frame);\n    this._emit(')');\n  }\n\n  compilePow(node, frame) {\n    this._emit('Math.pow(');\n    this.compile(node.left, frame);\n    this._emit(', ');\n    this.compile(node.right, frame);\n    this._emit(')');\n  }\n\n  compileNeg(node, frame) {\n    this._emit('-');\n    this.compile(node.target, frame);\n  }\n\n  compilePos(node, frame) {\n    this._emit('+');\n    this.compile(node.target, frame);\n  }\n\n  compileCompare(node, frame) {\n    this.compile(node.expr, frame);\n\n    node.ops.forEach((op) => {\n      this._emit(` ${compareOps[op.type]} `);\n      this.compile(op.expr, frame);\n    });\n  }\n\n  compileLookupVal(node, frame) {\n    this._emit('runtime.memberLookup((');\n    this._compileExpression(node.target, frame);\n    this._emit('),');\n    this._compileExpression(node.val, frame);\n    this._emit(')');\n  }\n\n  _getNodeName(node) {\n    switch (node.typename) {\n      case 'Symbol':\n        return node.value;\n      case 'FunCall':\n        return 'the return value of (' + this._getNodeName(node.name) + ')';\n      case 'LookupVal':\n        return this._getNodeName(node.target) + '[\"' +\n          this._getNodeName(node.val) + '\"]';\n      case 'Literal':\n        return node.value.toString();\n      default:\n        return '--expression--';\n    }\n  }\n\n  compileFunCall(node, frame) {\n    // Keep track of line/col info at runtime by settings\n    // variables within an expression. An expression in javascript\n    // like (x, y, z) returns the last value, and x and y can be\n    // anything\n    this._emit('(lineno = ' + node.lineno +\n      ', colno = ' + node.colno + ', ');\n\n    this._emit('runtime.callWrap(');\n    // Compile it as normal.\n    this._compileExpression(node.name, frame);\n\n    // Output the name of what we're calling so we can get friendly errors\n    // if the lookup fails.\n    this._emit(', \"' + this._getNodeName(node.name).replace(/\"/g, '\\\\\"') + '\", context, ');\n\n    this._compileAggregate(node.args, frame, '[', '])');\n\n    this._emit(')');\n  }\n\n  compileFilter(node, frame) {\n    var name = node.name;\n    this.assertType(name, nodes.Symbol);\n    this._emit('env.getFilter(\"' + name.value + '\").call(context, ');\n    this._compileAggregate(node.args, frame);\n    this._emit(')');\n  }\n\n  compileFilterAsync(node, frame) {\n    var name = node.name;\n    var symbol = node.symbol.value;\n\n    this.assertType(name, nodes.Symbol);\n\n    frame.set(symbol, symbol);\n\n    this._emit('env.getFilter(\"' + name.value + '\").call(context, ');\n    this._compileAggregate(node.args, frame);\n    this._emitLine(', ' + this._makeCallback(symbol));\n\n    this._addScopeLevel();\n  }\n\n  compileKeywordArgs(node, frame) {\n    this._emit('runtime.makeKeywordArgs(');\n    this.compileDict(node, frame);\n    this._emit(')');\n  }\n\n  compileSet(node, frame) {\n    var ids = [];\n\n    // Lookup the variable names for each identifier and create\n    // new ones if necessary\n    node.targets.forEach((target) => {\n      var name = target.value;\n      var id = frame.lookup(name);\n\n      if (id === null || id === undefined) {\n        id = this._tmpid();\n\n        // Note: This relies on js allowing scope across\n        // blocks, in case this is created inside an `if`\n        this._emitLine('var ' + id + ';');\n      }\n\n      ids.push(id);\n    });\n\n    if (node.value) {\n      this._emit(ids.join(' = ') + ' = ');\n      this._compileExpression(node.value, frame);\n      this._emitLine(';');\n    } else {\n      this._emit(ids.join(' = ') + ' = ');\n      this.compile(node.body, frame);\n      this._emitLine(';');\n    }\n\n    node.targets.forEach((target, i) => {\n      var id = ids[i];\n      var name = target.value;\n\n      // We are running this for every var, but it's very\n      // uncommon to assign to multiple vars anyway\n      this._emitLine(`frame.set(\"${name}\", ${id}, true);`);\n\n      this._emitLine('if(frame.topLevel) {');\n      this._emitLine(`context.setVariable(\"${name}\", ${id});`);\n      this._emitLine('}');\n\n      if (name.charAt(0) !== '_') {\n        this._emitLine('if(frame.topLevel) {');\n        this._emitLine(`context.addExport(\"${name}\", ${id});`);\n        this._emitLine('}');\n      }\n    });\n  }\n\n  compileSwitch(node, frame) {\n    this._emit('switch (');\n    this.compile(node.expr, frame);\n    this._emit(') {');\n    node.cases.forEach((c, i) => {\n      this._emit('case ');\n      this.compile(c.cond, frame);\n      this._emit(': ');\n      this.compile(c.body, frame);\n      // preserve fall-throughs\n      if (c.body.children.length) {\n        this._emitLine('break;');\n      }\n    });\n    if (node.default) {\n      this._emit('default:');\n      this.compile(node.default, frame);\n    }\n    this._emit('}');\n  }\n\n  compileIf(node, frame, async) {\n    this._emit('if(');\n    this._compileExpression(node.cond, frame);\n    this._emitLine(') {');\n\n    this._withScopedSyntax(() => {\n      this.compile(node.body, frame);\n\n      if (async) {\n        this._emit('cb()');\n      }\n    });\n\n    if (node.else_) {\n      this._emitLine('}\\nelse {');\n\n      this._withScopedSyntax(() => {\n        this.compile(node.else_, frame);\n\n        if (async) {\n          this._emit('cb()');\n        }\n      });\n    } else if (async) {\n      this._emitLine('}\\nelse {');\n      this._emit('cb()');\n    }\n\n    this._emitLine('}');\n  }\n\n  compileIfAsync(node, frame) {\n    this._emit('(function(cb) {');\n    this.compileIf(node, frame, true);\n    this._emit('})(' + this._makeCallback());\n    this._addScopeLevel();\n  }\n\n  _emitLoopBindings(node, arr, i, len) {\n    const bindings = [\n      {name: 'index', val: `${i} + 1`},\n      {name: 'index0', val: i},\n      {name: 'revindex', val: `${len} - ${i}`},\n      {name: 'revindex0', val: `${len} - ${i} - 1`},\n      {name: 'first', val: `${i} === 0`},\n      {name: 'last', val: `${i} === ${len} - 1`},\n      {name: 'length', val: len},\n    ];\n\n    bindings.forEach((b) => {\n      this._emitLine(`frame.set(\"loop.${b.name}\", ${b.val});`);\n    });\n  }\n\n  compileFor(node, frame) {\n    // Some of this code is ugly, but it keeps the generated code\n    // as fast as possible. ForAsync also shares some of this, but\n    // not much.\n\n    const i = this._tmpid();\n    const len = this._tmpid();\n    const arr = this._tmpid();\n    frame = frame.push();\n\n    this._emitLine('frame = frame.push();');\n\n    this._emit(`var ${arr} = `);\n    this._compileExpression(node.arr, frame);\n    this._emitLine(';');\n\n    this._emit(`if(${arr}) {`);\n    this._emitLine(arr + ' = runtime.fromIterator(' + arr + ');');\n\n    // If multiple names are passed, we need to bind them\n    // appropriately\n    if (node.name instanceof nodes.Array) {\n      this._emitLine(`var ${i};`);\n\n      // The object could be an arroy or object. Note that the\n      // body of the loop is duplicated for each condition, but\n      // we are optimizing for speed over size.\n      this._emitLine(`if(runtime.isArray(${arr})) {`);\n      this._emitLine(`var ${len} = ${arr}.length;`);\n      this._emitLine(`for(${i}=0; ${i} < ${arr}.length; ${i}++) {`);\n\n      // Bind each declared var\n      node.name.children.forEach((child, u) => {\n        var tid = this._tmpid();\n        this._emitLine(`var ${tid} = ${arr}[${i}][${u}];`);\n        this._emitLine(`frame.set(\"${child}\", ${arr}[${i}][${u}]);`);\n        frame.set(node.name.children[u].value, tid);\n      });\n\n      this._emitLoopBindings(node, arr, i, len);\n      this._withScopedSyntax(() => {\n        this.compile(node.body, frame);\n      });\n      this._emitLine('}');\n\n      this._emitLine('} else {');\n      // Iterate over the key/values of an object\n      const [key, val] = node.name.children;\n      const k = this._tmpid();\n      const v = this._tmpid();\n      frame.set(key.value, k);\n      frame.set(val.value, v);\n\n      this._emitLine(`${i} = -1;`);\n      this._emitLine(`var ${len} = runtime.keys(${arr}).length;`);\n      this._emitLine(`for(var ${k} in ${arr}) {`);\n      this._emitLine(`${i}++;`);\n      this._emitLine(`var ${v} = ${arr}[${k}];`);\n      this._emitLine(`frame.set(\"${key.value}\", ${k});`);\n      this._emitLine(`frame.set(\"${val.value}\", ${v});`);\n\n      this._emitLoopBindings(node, arr, i, len);\n      this._withScopedSyntax(() => {\n        this.compile(node.body, frame);\n      });\n      this._emitLine('}');\n\n      this._emitLine('}');\n    } else {\n      // Generate a typical array iteration\n      const v = this._tmpid();\n      frame.set(node.name.value, v);\n\n      this._emitLine(`var ${len} = ${arr}.length;`);\n      this._emitLine(`for(var ${i}=0; ${i} < ${arr}.length; ${i}++) {`);\n      this._emitLine(`var ${v} = ${arr}[${i}];`);\n      this._emitLine(`frame.set(\"${node.name.value}\", ${v});`);\n\n      this._emitLoopBindings(node, arr, i, len);\n\n      this._withScopedSyntax(() => {\n        this.compile(node.body, frame);\n      });\n\n      this._emitLine('}');\n    }\n\n    this._emitLine('}');\n    if (node.else_) {\n      this._emitLine('if (!' + len + ') {');\n      this.compile(node.else_, frame);\n      this._emitLine('}');\n    }\n\n    this._emitLine('frame = frame.pop();');\n  }\n\n  _compileAsyncLoop(node, frame, parallel) {\n    // This shares some code with the For tag, but not enough to\n    // worry about. This iterates across an object asynchronously,\n    // but not in parallel.\n\n    var i = this._tmpid();\n    var len = this._tmpid();\n    var arr = this._tmpid();\n    var asyncMethod = parallel ? 'asyncAll' : 'asyncEach';\n    frame = frame.push();\n\n    this._emitLine('frame = frame.push();');\n\n    this._emit('var ' + arr + ' = runtime.fromIterator(');\n    this._compileExpression(node.arr, frame);\n    this._emitLine(');');\n\n    if (node.name instanceof nodes.Array) {\n      const arrayLen = node.name.children.length;\n      this._emit(`runtime.${asyncMethod}(${arr}, ${arrayLen}, function(`);\n\n      node.name.children.forEach((name) => {\n        this._emit(`${name.value},`);\n      });\n\n      this._emit(i + ',' + len + ',next) {');\n\n      node.name.children.forEach((name) => {\n        const id = name.value;\n        frame.set(id, id);\n        this._emitLine(`frame.set(\"${id}\", ${id});`);\n      });\n    } else {\n      const id = node.name.value;\n      this._emitLine(`runtime.${asyncMethod}(${arr}, 1, function(${id}, ${i}, ${len},next) {`);\n      this._emitLine('frame.set(\"' + id + '\", ' + id + ');');\n      frame.set(id, id);\n    }\n\n    this._emitLoopBindings(node, arr, i, len);\n\n    this._withScopedSyntax(() => {\n      let buf;\n      if (parallel) {\n        buf = this._pushBuffer();\n      }\n\n      this.compile(node.body, frame);\n      this._emitLine('next(' + i + (buf ? ',' + buf : '') + ');');\n\n      if (parallel) {\n        this._popBuffer();\n      }\n    });\n\n    const output = this._tmpid();\n    this._emitLine('}, ' + this._makeCallback(output));\n    this._addScopeLevel();\n\n    if (parallel) {\n      this._emitLine(this.buffer + ' += ' + output + ';');\n    }\n\n    if (node.else_) {\n      this._emitLine('if (!' + arr + '.length) {');\n      this.compile(node.else_, frame);\n      this._emitLine('}');\n    }\n\n    this._emitLine('frame = frame.pop();');\n  }\n\n  compileAsyncEach(node, frame) {\n    this._compileAsyncLoop(node, frame);\n  }\n\n  compileAsyncAll(node, frame) {\n    this._compileAsyncLoop(node, frame, true);\n  }\n\n  _compileMacro(node, frame) {\n    var args = [];\n    var kwargs = null;\n    var funcId = 'macro_' + this._tmpid();\n    var keepFrame = (frame !== undefined);\n\n    // Type check the definition of the args\n    node.args.children.forEach((arg, i) => {\n      if (i === node.args.children.length - 1 && arg instanceof nodes.Dict) {\n        kwargs = arg;\n      } else {\n        this.assertType(arg, nodes.Symbol);\n        args.push(arg);\n      }\n    });\n\n    const realNames = [...args.map((n) => `l_${n.value}`), 'kwargs'];\n\n    // Quoted argument names\n    const argNames = args.map((n) => `\"${n.value}\"`);\n    const kwargNames = ((kwargs && kwargs.children) || []).map((n) => `\"${n.key.value}\"`);\n\n    // We pass a function to makeMacro which destructures the\n    // arguments so support setting positional args with keywords\n    // args and passing keyword args as positional args\n    // (essentially default values). See runtime.js.\n    let currFrame;\n    if (keepFrame) {\n      currFrame = frame.push(true);\n    } else {\n      currFrame = new Frame();\n    }\n    this._emitLines(\n      `var ${funcId} = runtime.makeMacro(`,\n      `[${argNames.join(', ')}], `,\n      `[${kwargNames.join(', ')}], `,\n      `function (${realNames.join(', ')}) {`,\n      'var callerFrame = frame;',\n      'frame = ' + ((keepFrame) ? 'frame.push(true);' : 'new runtime.Frame();'),\n      'kwargs = kwargs || {};',\n      'if (Object.prototype.hasOwnProperty.call(kwargs, \"caller\")) {',\n      'frame.set(\"caller\", kwargs.caller); }');\n\n    // Expose the arguments to the template. Don't need to use\n    // random names because the function\n    // will create a new run-time scope for us\n    args.forEach((arg) => {\n      this._emitLine(`frame.set(\"${arg.value}\", l_${arg.value});`);\n      currFrame.set(arg.value, `l_${arg.value}`);\n    });\n\n    // Expose the keyword arguments\n    if (kwargs) {\n      kwargs.children.forEach((pair) => {\n        const name = pair.key.value;\n        this._emit(`frame.set(\"${name}\", `);\n        this._emit(`Object.prototype.hasOwnProperty.call(kwargs, \"${name}\")`);\n        this._emit(` ? kwargs[\"${name}\"] : `);\n        this._compileExpression(pair.value, currFrame);\n        this._emit(');');\n      });\n    }\n\n    const bufferId = this._pushBuffer();\n\n    this._withScopedSyntax(() => {\n      this.compile(node.body, currFrame);\n    });\n\n    this._emitLine('frame = ' + ((keepFrame) ? 'frame.pop();' : 'callerFrame;'));\n    this._emitLine(`return new runtime.SafeString(${bufferId});`);\n    this._emitLine('});');\n    this._popBuffer();\n\n    return funcId;\n  }\n\n  compileMacro(node, frame) {\n    var funcId = this._compileMacro(node);\n\n    // Expose the macro to the templates\n    var name = node.name.value;\n    frame.set(name, funcId);\n\n    if (frame.parent) {\n      this._emitLine(`frame.set(\"${name}\", ${funcId});`);\n    } else {\n      if (node.name.value.charAt(0) !== '_') {\n        this._emitLine(`context.addExport(\"${name}\");`);\n      }\n      this._emitLine(`context.setVariable(\"${name}\", ${funcId});`);\n    }\n  }\n\n  compileCaller(node, frame) {\n    // basically an anonymous \"macro expression\"\n    this._emit('(function (){');\n    const funcId = this._compileMacro(node, frame);\n    this._emit(`return ${funcId};})()`);\n  }\n\n  _compileGetTemplate(node, frame, eagerCompile, ignoreMissing) {\n    const parentTemplateId = this._tmpid();\n    const parentName = this._templateName();\n    const cb = this._makeCallback(parentTemplateId);\n    const eagerCompileArg = (eagerCompile) ? 'true' : 'false';\n    const ignoreMissingArg = (ignoreMissing) ? 'true' : 'false';\n    this._emit('env.getTemplate(');\n    this._compileExpression(node.template, frame);\n    this._emitLine(`, ${eagerCompileArg}, ${parentName}, ${ignoreMissingArg}, ${cb}`);\n    return parentTemplateId;\n  }\n\n  compileImport(node, frame) {\n    const target = node.target.value;\n    const id = this._compileGetTemplate(node, frame, false, false);\n    this._addScopeLevel();\n\n    this._emitLine(id + '.getExported(' +\n      (node.withContext ? 'context.getVariables(), frame, ' : '') +\n      this._makeCallback(id));\n    this._addScopeLevel();\n\n    frame.set(target, id);\n\n    if (frame.parent) {\n      this._emitLine(`frame.set(\"${target}\", ${id});`);\n    } else {\n      this._emitLine(`context.setVariable(\"${target}\", ${id});`);\n    }\n  }\n\n  compileFromImport(node, frame) {\n    const importedId = this._compileGetTemplate(node, frame, false, false);\n    this._addScopeLevel();\n\n    this._emitLine(importedId + '.getExported(' +\n      (node.withContext ? 'context.getVariables(), frame, ' : '') +\n      this._makeCallback(importedId));\n    this._addScopeLevel();\n\n    node.names.children.forEach((nameNode) => {\n      var name;\n      var alias;\n      var id = this._tmpid();\n\n      if (nameNode instanceof nodes.Pair) {\n        name = nameNode.key.value;\n        alias = nameNode.value.value;\n      } else {\n        name = nameNode.value;\n        alias = name;\n      }\n\n      this._emitLine(`if(Object.prototype.hasOwnProperty.call(${importedId}, \"${name}\")) {`);\n      this._emitLine(`var ${id} = ${importedId}.${name};`);\n      this._emitLine('} else {');\n      this._emitLine(`cb(new Error(\"cannot import '${name}'\")); return;`);\n      this._emitLine('}');\n\n      frame.set(alias, id);\n\n      if (frame.parent) {\n        this._emitLine(`frame.set(\"${alias}\", ${id});`);\n      } else {\n        this._emitLine(`context.setVariable(\"${alias}\", ${id});`);\n      }\n    });\n  }\n\n  compileBlock(node) {\n    var id = this._tmpid();\n\n    // If we are executing outside a block (creating a top-level\n    // block), we really don't want to execute its code because it\n    // will execute twice: once when the child template runs and\n    // again when the parent template runs. Note that blocks\n    // within blocks will *always* execute immediately *and*\n    // wherever else they are invoked (like used in a parent\n    // template). This may have behavioral differences from jinja\n    // because blocks can have side effects, but it seems like a\n    // waste of performance to always execute huge top-level\n    // blocks twice\n    if (!this.inBlock) {\n      this._emit('(parentTemplate ? function(e, c, f, r, cb) { cb(\"\"); } : ');\n    }\n    this._emit(`context.getBlock(\"${node.name.value}\")`);\n    if (!this.inBlock) {\n      this._emit(')');\n    }\n    this._emitLine('(env, context, frame, runtime, ' + this._makeCallback(id));\n    this._emitLine(`${this.buffer} += ${id};`);\n    this._addScopeLevel();\n  }\n\n  compileSuper(node, frame) {\n    var name = node.blockName.value;\n    var id = node.symbol.value;\n\n    const cb = this._makeCallback(id);\n    this._emitLine(`context.getSuper(env, \"${name}\", b_${name}, frame, runtime, ${cb}`);\n    this._emitLine(`${id} = runtime.markSafe(${id});`);\n    this._addScopeLevel();\n    frame.set(id, id);\n  }\n\n  compileExtends(node, frame) {\n    var k = this._tmpid();\n\n    const parentTemplateId = this._compileGetTemplate(node, frame, true, false);\n\n    // extends is a dynamic tag and can occur within a block like\n    // `if`, so if this happens we need to capture the parent\n    // template in the top-level scope\n    this._emitLine(`parentTemplate = ${parentTemplateId}`);\n\n    this._emitLine(`for(var ${k} in parentTemplate.blocks) {`);\n    this._emitLine(`context.addBlock(${k}, parentTemplate.blocks[${k}]);`);\n    this._emitLine('}');\n\n    this._addScopeLevel();\n  }\n\n  compileInclude(node, frame) {\n    this._emitLine('var tasks = [];');\n    this._emitLine('tasks.push(');\n    this._emitLine('function(callback) {');\n    const id = this._compileGetTemplate(node, frame, false, node.ignoreMissing);\n    this._emitLine(`callback(null,${id});});`);\n    this._emitLine('});');\n\n    const id2 = this._tmpid();\n    this._emitLine('tasks.push(');\n    this._emitLine('function(template, callback){');\n    this._emitLine('template.render(context.getVariables(), frame, ' + this._makeCallback(id2));\n    this._emitLine('callback(null,' + id2 + ');});');\n    this._emitLine('});');\n\n    this._emitLine('tasks.push(');\n    this._emitLine('function(result, callback){');\n    this._emitLine(`${this.buffer} += result;`);\n    this._emitLine('callback(null);');\n    this._emitLine('});');\n    this._emitLine('env.waterfall(tasks, function(){');\n    this._addScopeLevel();\n  }\n\n  compileTemplateData(node, frame) {\n    this.compileLiteral(node, frame);\n  }\n\n  compileCapture(node, frame) {\n    // we need to temporarily override the current buffer id as 'output'\n    // so the set block writes to the capture output instead of the buffer\n    var buffer = this.buffer;\n    this.buffer = 'output';\n    this._emitLine('(function() {');\n    this._emitLine('var output = \"\";');\n    this._withScopedSyntax(() => {\n      this.compile(node.body, frame);\n    });\n    this._emitLine('return output;');\n    this._emitLine('})()');\n    // and of course, revert back to the old buffer id\n    this.buffer = buffer;\n  }\n\n  compileOutput(node, frame) {\n    const children = node.children;\n    children.forEach(child => {\n      // TemplateData is a special case because it is never\n      // autoescaped, so simply output it for optimization\n      if (child instanceof nodes.TemplateData) {\n        if (child.value) {\n          this._emit(`${this.buffer} += `);\n          this.compileLiteral(child, frame);\n          this._emitLine(';');\n        }\n      } else {\n        this._emit(`${this.buffer} += runtime.suppressValue(`);\n        if (this.throwOnUndefined) {\n          this._emit('runtime.ensureDefined(');\n        }\n        this.compile(child, frame);\n        if (this.throwOnUndefined) {\n          this._emit(`,${node.lineno},${node.colno})`);\n        }\n        this._emit(', env.opts.autoescape);\\n');\n      }\n    });\n  }\n\n  compileRoot(node, frame) {\n    if (frame) {\n      this.fail('compileRoot: root node can\\'t have frame');\n    }\n\n    frame = new Frame();\n\n    this._emitFuncBegin(node, 'root');\n    this._emitLine('var parentTemplate = null;');\n    this._compileChildren(node, frame);\n    this._emitLine('if(parentTemplate) {');\n    this._emitLine('parentTemplate.rootRenderFunc(env, context, frame, runtime, cb);');\n    this._emitLine('} else {');\n    this._emitLine(`cb(null, ${this.buffer});`);\n    this._emitLine('}');\n    this._emitFuncEnd(true);\n\n    this.inBlock = true;\n\n    const blockNames = [];\n\n    const blocks = node.findAll(nodes.Block);\n\n    blocks.forEach((block, i) => {\n      const name = block.name.value;\n\n      if (blockNames.indexOf(name) !== -1) {\n        throw new Error(`Block \"${name}\" defined more than once.`);\n      }\n      blockNames.push(name);\n\n      this._emitFuncBegin(block, `b_${name}`);\n\n      const tmpFrame = new Frame();\n      this._emitLine('var frame = frame.push(true);');\n      this.compile(block.body, tmpFrame);\n      this._emitFuncEnd();\n    });\n\n    this._emitLine('return {');\n\n    blocks.forEach((block, i) => {\n      const blockName = `b_${block.name.value}`;\n      this._emitLine(`${blockName}: ${blockName},`);\n    });\n\n    this._emitLine('root: root\\n};');\n  }\n\n  compile(node, frame) {\n    var _compile = this['compile' + node.typename];\n    if (_compile) {\n      _compile.call(this, node, frame);\n    } else {\n      this.fail(`compile: Cannot compile node: ${node.typename}`, node.lineno, node.colno);\n    }\n  }\n\n  getCode() {\n    return this.codebuf.join('');\n  }\n}\n\nmodule.exports = {\n  compile: function compile(src, asyncFilters, extensions, name, opts = {}) {\n    const c = new Compiler(name, opts.throwOnUndefined);\n\n    // Run the extension preprocessors against the source.\n    const preprocessors = (extensions || []).map(ext => ext.preprocess).filter(f => !!f);\n\n    const processedSrc = preprocessors.reduce((s, processor) => processor(s), src);\n\n    c.compile(transformer.transform(\n      parser.parse(processedSrc, extensions, opts),\n      asyncFilters,\n      name\n    ));\n    return c.getCode();\n  },\n\n  Compiler: Compiler\n};\n","'use strict';\n\nvar lexer = require('./lexer');\nvar nodes = require('./nodes');\nvar Obj = require('./object').Obj;\nvar lib = require('./lib');\n\nclass Parser extends Obj {\n  init(tokens) {\n    this.tokens = tokens;\n    this.peeked = null;\n    this.breakOnBlocks = null;\n    this.dropLeadingWhitespace = false;\n\n    this.extensions = [];\n  }\n\n  nextToken(withWhitespace) {\n    var tok;\n\n    if (this.peeked) {\n      if (!withWhitespace && this.peeked.type === lexer.TOKEN_WHITESPACE) {\n        this.peeked = null;\n      } else {\n        tok = this.peeked;\n        this.peeked = null;\n        return tok;\n      }\n    }\n\n    tok = this.tokens.nextToken();\n\n    if (!withWhitespace) {\n      while (tok && tok.type === lexer.TOKEN_WHITESPACE) {\n        tok = this.tokens.nextToken();\n      }\n    }\n\n    return tok;\n  }\n\n  peekToken() {\n    this.peeked = this.peeked || this.nextToken();\n    return this.peeked;\n  }\n\n  pushToken(tok) {\n    if (this.peeked) {\n      throw new Error('pushToken: can only push one token on between reads');\n    }\n    this.peeked = tok;\n  }\n\n  error(msg, lineno, colno) {\n    if (lineno === undefined || colno === undefined) {\n      const tok = this.peekToken() || {};\n      lineno = tok.lineno;\n      colno = tok.colno;\n    }\n    if (lineno !== undefined) {\n      lineno += 1;\n    }\n    if (colno !== undefined) {\n      colno += 1;\n    }\n    return new lib.TemplateError(msg, lineno, colno);\n  }\n\n  fail(msg, lineno, colno) {\n    throw this.error(msg, lineno, colno);\n  }\n\n  skip(type) {\n    var tok = this.nextToken();\n    if (!tok || tok.type !== type) {\n      this.pushToken(tok);\n      return false;\n    }\n    return true;\n  }\n\n  expect(type) {\n    var tok = this.nextToken();\n    if (tok.type !== type) {\n      this.fail('expected ' + type + ', got ' + tok.type,\n        tok.lineno,\n        tok.colno);\n    }\n    return tok;\n  }\n\n  skipValue(type, val) {\n    var tok = this.nextToken();\n    if (!tok || tok.type !== type || tok.value !== val) {\n      this.pushToken(tok);\n      return false;\n    }\n    return true;\n  }\n\n  skipSymbol(val) {\n    return this.skipValue(lexer.TOKEN_SYMBOL, val);\n  }\n\n  advanceAfterBlockEnd(name) {\n    var tok;\n    if (!name) {\n      tok = this.peekToken();\n\n      if (!tok) {\n        this.fail('unexpected end of file');\n      }\n\n      if (tok.type !== lexer.TOKEN_SYMBOL) {\n        this.fail('advanceAfterBlockEnd: expected symbol token or ' +\n          'explicit name to be passed');\n      }\n\n      name = this.nextToken().value;\n    }\n\n    tok = this.nextToken();\n\n    if (tok && tok.type === lexer.TOKEN_BLOCK_END) {\n      if (tok.value.charAt(0) === '-') {\n        this.dropLeadingWhitespace = true;\n      }\n    } else {\n      this.fail('expected block end in ' + name + ' statement');\n    }\n\n    return tok;\n  }\n\n  advanceAfterVariableEnd() {\n    var tok = this.nextToken();\n\n    if (tok && tok.type === lexer.TOKEN_VARIABLE_END) {\n      this.dropLeadingWhitespace = tok.value.charAt(\n        tok.value.length - this.tokens.tags.VARIABLE_END.length - 1\n      ) === '-';\n    } else {\n      this.pushToken(tok);\n      this.fail('expected variable end');\n    }\n  }\n\n  parseFor() {\n    var forTok = this.peekToken();\n    var node;\n    var endBlock;\n\n    if (this.skipSymbol('for')) {\n      node = new nodes.For(forTok.lineno, forTok.colno);\n      endBlock = 'endfor';\n    } else if (this.skipSymbol('asyncEach')) {\n      node = new nodes.AsyncEach(forTok.lineno, forTok.colno);\n      endBlock = 'endeach';\n    } else if (this.skipSymbol('asyncAll')) {\n      node = new nodes.AsyncAll(forTok.lineno, forTok.colno);\n      endBlock = 'endall';\n    } else {\n      this.fail('parseFor: expected for{Async}', forTok.lineno, forTok.colno);\n    }\n\n    node.name = this.parsePrimary();\n\n    if (!(node.name instanceof nodes.Symbol)) {\n      this.fail('parseFor: variable name expected for loop');\n    }\n\n    const type = this.peekToken().type;\n    if (type === lexer.TOKEN_COMMA) {\n      // key/value iteration\n      const key = node.name;\n      node.name = new nodes.Array(key.lineno, key.colno);\n      node.name.addChild(key);\n\n      while (this.skip(lexer.TOKEN_COMMA)) {\n        const prim = this.parsePrimary();\n        node.name.addChild(prim);\n      }\n    }\n\n    if (!this.skipSymbol('in')) {\n      this.fail('parseFor: expected \"in\" keyword for loop',\n        forTok.lineno,\n        forTok.colno);\n    }\n\n    node.arr = this.parseExpression();\n    this.advanceAfterBlockEnd(forTok.value);\n\n    node.body = this.parseUntilBlocks(endBlock, 'else');\n\n    if (this.skipSymbol('else')) {\n      this.advanceAfterBlockEnd('else');\n      node.else_ = this.parseUntilBlocks(endBlock);\n    }\n\n    this.advanceAfterBlockEnd();\n\n    return node;\n  }\n\n  parseMacro() {\n    const macroTok = this.peekToken();\n    if (!this.skipSymbol('macro')) {\n      this.fail('expected macro');\n    }\n\n    const name = this.parsePrimary(true);\n    const args = this.parseSignature();\n    const node = new nodes.Macro(macroTok.lineno, macroTok.colno, name, args);\n\n    this.advanceAfterBlockEnd(macroTok.value);\n    node.body = this.parseUntilBlocks('endmacro');\n    this.advanceAfterBlockEnd();\n\n    return node;\n  }\n\n  parseCall() {\n    // a call block is parsed as a normal FunCall, but with an added\n    // 'caller' kwarg which is a Caller node.\n    var callTok = this.peekToken();\n    if (!this.skipSymbol('call')) {\n      this.fail('expected call');\n    }\n\n    const callerArgs = this.parseSignature(true) || new nodes.NodeList();\n    const macroCall = this.parsePrimary();\n\n    this.advanceAfterBlockEnd(callTok.value);\n    const body = this.parseUntilBlocks('endcall');\n    this.advanceAfterBlockEnd();\n\n    const callerName = new nodes.Symbol(callTok.lineno,\n      callTok.colno,\n      'caller');\n    const callerNode = new nodes.Caller(callTok.lineno,\n      callTok.colno,\n      callerName,\n      callerArgs,\n      body);\n\n    // add the additional caller kwarg, adding kwargs if necessary\n    const args = macroCall.args.children;\n    if (!(args[args.length - 1] instanceof nodes.KeywordArgs)) {\n      args.push(new nodes.KeywordArgs());\n    }\n    const kwargs = args[args.length - 1];\n    kwargs.addChild(new nodes.Pair(callTok.lineno,\n      callTok.colno,\n      callerName,\n      callerNode));\n\n    return new nodes.Output(callTok.lineno,\n      callTok.colno,\n      [macroCall]);\n  }\n\n  parseWithContext() {\n    var tok = this.peekToken();\n\n    var withContext = null;\n\n    if (this.skipSymbol('with')) {\n      withContext = true;\n    } else if (this.skipSymbol('without')) {\n      withContext = false;\n    }\n\n    if (withContext !== null) {\n      if (!this.skipSymbol('context')) {\n        this.fail('parseFrom: expected context after with/without',\n          tok.lineno,\n          tok.colno);\n      }\n    }\n\n    return withContext;\n  }\n\n  parseImport() {\n    var importTok = this.peekToken();\n    if (!this.skipSymbol('import')) {\n      this.fail('parseImport: expected import',\n        importTok.lineno,\n        importTok.colno);\n    }\n\n    const template = this.parseExpression();\n\n    if (!this.skipSymbol('as')) {\n      this.fail('parseImport: expected \"as\" keyword',\n        importTok.lineno,\n        importTok.colno);\n    }\n\n    const target = this.parseExpression();\n    const withContext = this.parseWithContext();\n    const node = new nodes.Import(importTok.lineno,\n      importTok.colno,\n      template,\n      target,\n      withContext);\n\n    this.advanceAfterBlockEnd(importTok.value);\n\n    return node;\n  }\n\n  parseFrom() {\n    const fromTok = this.peekToken();\n    if (!this.skipSymbol('from')) {\n      this.fail('parseFrom: expected from');\n    }\n\n    const template = this.parseExpression();\n\n    if (!this.skipSymbol('import')) {\n      this.fail('parseFrom: expected import',\n        fromTok.lineno,\n        fromTok.colno);\n    }\n\n    const names = new nodes.NodeList();\n    let withContext;\n\n    while (1) { // eslint-disable-line no-constant-condition\n      const nextTok = this.peekToken();\n      if (nextTok.type === lexer.TOKEN_BLOCK_END) {\n        if (!names.children.length) {\n          this.fail('parseFrom: Expected at least one import name',\n            fromTok.lineno,\n            fromTok.colno);\n        }\n\n        // Since we are manually advancing past the block end,\n        // need to keep track of whitespace control (normally\n        // this is done in `advanceAfterBlockEnd`\n        if (nextTok.value.charAt(0) === '-') {\n          this.dropLeadingWhitespace = true;\n        }\n\n        this.nextToken();\n        break;\n      }\n\n      if (names.children.length > 0 && !this.skip(lexer.TOKEN_COMMA)) {\n        this.fail('parseFrom: expected comma',\n          fromTok.lineno,\n          fromTok.colno);\n      }\n\n      const name = this.parsePrimary();\n      if (name.value.charAt(0) === '_') {\n        this.fail('parseFrom: names starting with an underscore cannot be imported',\n          name.lineno,\n          name.colno);\n      }\n\n      if (this.skipSymbol('as')) {\n        const alias = this.parsePrimary();\n        names.addChild(new nodes.Pair(name.lineno,\n          name.colno,\n          name,\n          alias));\n      } else {\n        names.addChild(name);\n      }\n\n      withContext = this.parseWithContext();\n    }\n\n    return new nodes.FromImport(fromTok.lineno,\n      fromTok.colno,\n      template,\n      names,\n      withContext);\n  }\n\n  parseBlock() {\n    const tag = this.peekToken();\n    if (!this.skipSymbol('block')) {\n      this.fail('parseBlock: expected block', tag.lineno, tag.colno);\n    }\n\n    const node = new nodes.Block(tag.lineno, tag.colno);\n\n    node.name = this.parsePrimary();\n    if (!(node.name instanceof nodes.Symbol)) {\n      this.fail('parseBlock: variable name expected',\n        tag.lineno,\n        tag.colno);\n    }\n\n    this.advanceAfterBlockEnd(tag.value);\n\n    node.body = this.parseUntilBlocks('endblock');\n    this.skipSymbol('endblock');\n    this.skipSymbol(node.name.value);\n\n    const tok = this.peekToken();\n    if (!tok) {\n      this.fail('parseBlock: expected endblock, got end of file');\n    }\n\n    this.advanceAfterBlockEnd(tok.value);\n\n    return node;\n  }\n\n  parseExtends() {\n    const tagName = 'extends';\n    const tag = this.peekToken();\n    if (!this.skipSymbol(tagName)) {\n      this.fail('parseTemplateRef: expected ' + tagName);\n    }\n\n    const node = new nodes.Extends(tag.lineno, tag.colno);\n    node.template = this.parseExpression();\n\n    this.advanceAfterBlockEnd(tag.value);\n    return node;\n  }\n\n  parseInclude() {\n    const tagName = 'include';\n    const tag = this.peekToken();\n    if (!this.skipSymbol(tagName)) {\n      this.fail('parseInclude: expected ' + tagName);\n    }\n\n    const node = new nodes.Include(tag.lineno, tag.colno);\n    node.template = this.parseExpression();\n\n    if (this.skipSymbol('ignore') && this.skipSymbol('missing')) {\n      node.ignoreMissing = true;\n    }\n\n    this.advanceAfterBlockEnd(tag.value);\n    return node;\n  }\n\n  parseIf() {\n    const tag = this.peekToken();\n    let node;\n\n    if (this.skipSymbol('if') || this.skipSymbol('elif') || this.skipSymbol('elseif')) {\n      node = new nodes.If(tag.lineno, tag.colno);\n    } else if (this.skipSymbol('ifAsync')) {\n      node = new nodes.IfAsync(tag.lineno, tag.colno);\n    } else {\n      this.fail('parseIf: expected if, elif, or elseif',\n        tag.lineno,\n        tag.colno);\n    }\n\n    node.cond = this.parseExpression();\n    this.advanceAfterBlockEnd(tag.value);\n\n    node.body = this.parseUntilBlocks('elif', 'elseif', 'else', 'endif');\n    const tok = this.peekToken();\n\n    switch (tok && tok.value) {\n      case 'elseif':\n      case 'elif':\n        node.else_ = this.parseIf();\n        break;\n      case 'else':\n        this.advanceAfterBlockEnd();\n        node.else_ = this.parseUntilBlocks('endif');\n        this.advanceAfterBlockEnd();\n        break;\n      case 'endif':\n        node.else_ = null;\n        this.advanceAfterBlockEnd();\n        break;\n      default:\n        this.fail('parseIf: expected elif, else, or endif, got end of file');\n    }\n\n    return node;\n  }\n\n  parseSet() {\n    const tag = this.peekToken();\n    if (!this.skipSymbol('set')) {\n      this.fail('parseSet: expected set', tag.lineno, tag.colno);\n    }\n\n    const node = new nodes.Set(tag.lineno, tag.colno, []);\n\n    let target;\n    while ((target = this.parsePrimary())) {\n      node.targets.push(target);\n\n      if (!this.skip(lexer.TOKEN_COMMA)) {\n        break;\n      }\n    }\n\n    if (!this.skipValue(lexer.TOKEN_OPERATOR, '=')) {\n      if (!this.skip(lexer.TOKEN_BLOCK_END)) {\n        this.fail('parseSet: expected = or block end in set tag',\n          tag.lineno,\n          tag.colno);\n      } else {\n        node.body = new nodes.Capture(\n          tag.lineno,\n          tag.colno,\n          this.parseUntilBlocks('endset')\n        );\n        node.value = null;\n        this.advanceAfterBlockEnd();\n      }\n    } else {\n      node.value = this.parseExpression();\n      this.advanceAfterBlockEnd(tag.value);\n    }\n\n    return node;\n  }\n\n  parseSwitch() {\n    /*\n     * Store the tag names in variables in case someone ever wants to\n     * customize this.\n     */\n    const switchStart = 'switch';\n    const switchEnd = 'endswitch';\n    const caseStart = 'case';\n    const caseDefault = 'default';\n\n    // Get the switch tag.\n    const tag = this.peekToken();\n\n    // fail early if we get some unexpected tag.\n    if (\n      !this.skipSymbol(switchStart)\n      && !this.skipSymbol(caseStart)\n      && !this.skipSymbol(caseDefault)\n    ) {\n      this.fail('parseSwitch: expected \"switch,\" \"case\" or \"default\"', tag.lineno, tag.colno);\n    }\n\n    // parse the switch expression\n    const expr = this.parseExpression();\n\n    // advance until a start of a case, a default case or an endswitch.\n    this.advanceAfterBlockEnd(switchStart);\n    this.parseUntilBlocks(caseStart, caseDefault, switchEnd);\n\n    // this is the first case. it could also be an endswitch, we'll check.\n    let tok = this.peekToken();\n\n    // create new variables for our cases and default case.\n    const cases = [];\n    let defaultCase;\n\n    // while we're dealing with new cases nodes...\n    do {\n      // skip the start symbol and get the case expression\n      this.skipSymbol(caseStart);\n      const cond = this.parseExpression();\n      this.advanceAfterBlockEnd(switchStart);\n      // get the body of the case node and add it to the array of cases.\n      const body = this.parseUntilBlocks(caseStart, caseDefault, switchEnd);\n      cases.push(new nodes.Case(tok.line, tok.col, cond, body));\n      // get our next case\n      tok = this.peekToken();\n    } while (tok && tok.value === caseStart);\n\n    // we either have a default case or a switch end.\n    switch (tok.value) {\n      case caseDefault:\n        this.advanceAfterBlockEnd();\n        defaultCase = this.parseUntilBlocks(switchEnd);\n        this.advanceAfterBlockEnd();\n        break;\n      case switchEnd:\n        this.advanceAfterBlockEnd();\n        break;\n      default:\n        // otherwise bail because EOF\n        this.fail('parseSwitch: expected \"case,\" \"default\" or \"endswitch,\" got EOF.');\n    }\n\n    // and return the switch node.\n    return new nodes.Switch(tag.lineno, tag.colno, expr, cases, defaultCase);\n  }\n\n  parseStatement() {\n    var tok = this.peekToken();\n    var node;\n\n    if (tok.type !== lexer.TOKEN_SYMBOL) {\n      this.fail('tag name expected', tok.lineno, tok.colno);\n    }\n\n    if (this.breakOnBlocks &&\n      lib.indexOf(this.breakOnBlocks, tok.value) !== -1) {\n      return null;\n    }\n\n    switch (tok.value) {\n      case 'raw':\n        return this.parseRaw();\n      case 'verbatim':\n        return this.parseRaw('verbatim');\n      case 'if':\n      case 'ifAsync':\n        return this.parseIf();\n      case 'for':\n      case 'asyncEach':\n      case 'asyncAll':\n        return this.parseFor();\n      case 'block':\n        return this.parseBlock();\n      case 'extends':\n        return this.parseExtends();\n      case 'include':\n        return this.parseInclude();\n      case 'set':\n        return this.parseSet();\n      case 'macro':\n        return this.parseMacro();\n      case 'call':\n        return this.parseCall();\n      case 'import':\n        return this.parseImport();\n      case 'from':\n        return this.parseFrom();\n      case 'filter':\n        return this.parseFilterStatement();\n      case 'switch':\n        return this.parseSwitch();\n      default:\n        if (this.extensions.length) {\n          for (let i = 0; i < this.extensions.length; i++) {\n            const ext = this.extensions[i];\n            if (lib.indexOf(ext.tags || [], tok.value) !== -1) {\n              return ext.parse(this, nodes, lexer);\n            }\n          }\n        }\n        this.fail('unknown block tag: ' + tok.value, tok.lineno, tok.colno);\n    }\n\n    return node;\n  }\n\n  parseRaw(tagName) {\n    tagName = tagName || 'raw';\n    const endTagName = 'end' + tagName;\n    // Look for upcoming raw blocks (ignore all other kinds of blocks)\n    const rawBlockRegex = new RegExp('([\\\\s\\\\S]*?){%\\\\s*(' + tagName + '|' + endTagName + ')\\\\s*(?=%})%}');\n    let rawLevel = 1;\n    let str = '';\n    let matches = null;\n\n    // Skip opening raw token\n    // Keep this token to track line and column numbers\n    const begun = this.advanceAfterBlockEnd();\n\n    // Exit when there's nothing to match\n    // or when we've found the matching \"endraw\" block\n    while ((matches = this.tokens._extractRegex(rawBlockRegex)) && rawLevel > 0) {\n      const all = matches[0];\n      const pre = matches[1];\n      const blockName = matches[2];\n\n      // Adjust rawlevel\n      if (blockName === tagName) {\n        rawLevel += 1;\n      } else if (blockName === endTagName) {\n        rawLevel -= 1;\n      }\n\n      // Add to str\n      if (rawLevel === 0) {\n        // We want to exclude the last \"endraw\"\n        str += pre;\n        // Move tokenizer to beginning of endraw block\n        this.tokens.backN(all.length - pre.length);\n      } else {\n        str += all;\n      }\n    }\n\n    return new nodes.Output(\n      begun.lineno,\n      begun.colno,\n      [new nodes.TemplateData(begun.lineno, begun.colno, str)]\n    );\n  }\n\n  parsePostfix(node) {\n    let lookup;\n    let tok = this.peekToken();\n\n    while (tok) {\n      if (tok.type === lexer.TOKEN_LEFT_PAREN) {\n        // Function call\n        node = new nodes.FunCall(tok.lineno,\n          tok.colno,\n          node,\n          this.parseSignature());\n      } else if (tok.type === lexer.TOKEN_LEFT_BRACKET) {\n        // Reference\n        lookup = this.parseAggregate();\n        if (lookup.children.length > 1) {\n          this.fail('invalid index');\n        }\n\n        node = new nodes.LookupVal(tok.lineno,\n          tok.colno,\n          node,\n          lookup.children[0]);\n      } else if (tok.type === lexer.TOKEN_OPERATOR && tok.value === '.') {\n        // Reference\n        this.nextToken();\n        const val = this.nextToken();\n\n        if (val.type !== lexer.TOKEN_SYMBOL) {\n          this.fail('expected name as lookup value, got ' + val.value,\n            val.lineno,\n            val.colno);\n        }\n\n        // Make a literal string because it's not a variable\n        // reference\n        lookup = new nodes.Literal(val.lineno,\n          val.colno,\n          val.value);\n\n        node = new nodes.LookupVal(tok.lineno,\n          tok.colno,\n          node,\n          lookup);\n      } else {\n        break;\n      }\n\n      tok = this.peekToken();\n    }\n\n    return node;\n  }\n\n  parseExpression() {\n    var node = this.parseInlineIf();\n    return node;\n  }\n\n  parseInlineIf() {\n    let node = this.parseOr();\n    if (this.skipSymbol('if')) {\n      const condNode = this.parseOr();\n      const bodyNode = node;\n      node = new nodes.InlineIf(node.lineno, node.colno);\n      node.body = bodyNode;\n      node.cond = condNode;\n      if (this.skipSymbol('else')) {\n        node.else_ = this.parseOr();\n      } else {\n        node.else_ = null;\n      }\n    }\n\n    return node;\n  }\n\n  parseOr() {\n    let node = this.parseAnd();\n    while (this.skipSymbol('or')) {\n      const node2 = this.parseAnd();\n      node = new nodes.Or(node.lineno,\n        node.colno,\n        node,\n        node2);\n    }\n    return node;\n  }\n\n  parseAnd() {\n    let node = this.parseNot();\n    while (this.skipSymbol('and')) {\n      const node2 = this.parseNot();\n      node = new nodes.And(node.lineno,\n        node.colno,\n        node,\n        node2);\n    }\n    return node;\n  }\n\n  parseNot() {\n    const tok = this.peekToken();\n    if (this.skipSymbol('not')) {\n      return new nodes.Not(tok.lineno,\n        tok.colno,\n        this.parseNot());\n    }\n    return this.parseIn();\n  }\n\n  parseIn() {\n    let node = this.parseIs();\n    while (1) { // eslint-disable-line no-constant-condition\n      // check if the next token is 'not'\n      const tok = this.nextToken();\n      if (!tok) {\n        break;\n      }\n      const invert = tok.type === lexer.TOKEN_SYMBOL && tok.value === 'not';\n      // if it wasn't 'not', put it back\n      if (!invert) {\n        this.pushToken(tok);\n      }\n      if (this.skipSymbol('in')) {\n        const node2 = this.parseIs();\n        node = new nodes.In(node.lineno,\n          node.colno,\n          node,\n          node2);\n        if (invert) {\n          node = new nodes.Not(node.lineno,\n            node.colno,\n            node);\n        }\n      } else {\n        // if we'd found a 'not' but this wasn't an 'in', put back the 'not'\n        if (invert) {\n          this.pushToken(tok);\n        }\n        break;\n      }\n    }\n    return node;\n  }\n\n  // I put this right after \"in\" in the operator precedence stack. That can\n  // obviously be changed to be closer to Jinja.\n  parseIs() {\n    let node = this.parseCompare();\n    // look for an is\n    if (this.skipSymbol('is')) {\n      // look for a not\n      const not = this.skipSymbol('not');\n      // get the next node\n      const node2 = this.parseCompare();\n      // create an Is node using the next node and the info from our Is node.\n      node = new nodes.Is(node.lineno, node.colno, node, node2);\n      // if we have a Not, create a Not node from our Is node.\n      if (not) {\n        node = new nodes.Not(node.lineno, node.colno, node);\n      }\n    }\n    // return the node.\n    return node;\n  }\n\n  parseCompare() {\n    const compareOps = ['==', '===', '!=', '!==', '<', '>', '<=', '>='];\n    const expr = this.parseConcat();\n    const ops = [];\n\n    while (1) { // eslint-disable-line no-constant-condition\n      const tok = this.nextToken();\n\n      if (!tok) {\n        break;\n      } else if (compareOps.indexOf(tok.value) !== -1) {\n        ops.push(new nodes.CompareOperand(tok.lineno,\n          tok.colno,\n          this.parseConcat(),\n          tok.value));\n      } else {\n        this.pushToken(tok);\n        break;\n      }\n    }\n\n    if (ops.length) {\n      return new nodes.Compare(ops[0].lineno,\n        ops[0].colno,\n        expr,\n        ops);\n    } else {\n      return expr;\n    }\n  }\n\n  // finds the '~' for string concatenation\n  parseConcat() {\n    let node = this.parseAdd();\n    while (this.skipValue(lexer.TOKEN_TILDE, '~')) {\n      const node2 = this.parseAdd();\n      node = new nodes.Concat(node.lineno,\n        node.colno,\n        node,\n        node2);\n    }\n    return node;\n  }\n\n  parseAdd() {\n    let node = this.parseSub();\n    while (this.skipValue(lexer.TOKEN_OPERATOR, '+')) {\n      const node2 = this.parseSub();\n      node = new nodes.Add(node.lineno,\n        node.colno,\n        node,\n        node2);\n    }\n    return node;\n  }\n\n  parseSub() {\n    let node = this.parseMul();\n    while (this.skipValue(lexer.TOKEN_OPERATOR, '-')) {\n      const node2 = this.parseMul();\n      node = new nodes.Sub(node.lineno,\n        node.colno,\n        node,\n        node2);\n    }\n    return node;\n  }\n\n  parseMul() {\n    let node = this.parseDiv();\n    while (this.skipValue(lexer.TOKEN_OPERATOR, '*')) {\n      const node2 = this.parseDiv();\n      node = new nodes.Mul(node.lineno,\n        node.colno,\n        node,\n        node2);\n    }\n    return node;\n  }\n\n  parseDiv() {\n    let node = this.parseFloorDiv();\n    while (this.skipValue(lexer.TOKEN_OPERATOR, '/')) {\n      const node2 = this.parseFloorDiv();\n      node = new nodes.Div(node.lineno,\n        node.colno,\n        node,\n        node2);\n    }\n    return node;\n  }\n\n  parseFloorDiv() {\n    let node = this.parseMod();\n    while (this.skipValue(lexer.TOKEN_OPERATOR, '//')) {\n      const node2 = this.parseMod();\n      node = new nodes.FloorDiv(node.lineno,\n        node.colno,\n        node,\n        node2);\n    }\n    return node;\n  }\n\n  parseMod() {\n    let node = this.parsePow();\n    while (this.skipValue(lexer.TOKEN_OPERATOR, '%')) {\n      const node2 = this.parsePow();\n      node = new nodes.Mod(node.lineno,\n        node.colno,\n        node,\n        node2);\n    }\n    return node;\n  }\n\n  parsePow() {\n    let node = this.parseUnary();\n    while (this.skipValue(lexer.TOKEN_OPERATOR, '**')) {\n      const node2 = this.parseUnary();\n      node = new nodes.Pow(node.lineno,\n        node.colno,\n        node,\n        node2);\n    }\n    return node;\n  }\n\n  parseUnary(noFilters) {\n    const tok = this.peekToken();\n    let node;\n\n    if (this.skipValue(lexer.TOKEN_OPERATOR, '-')) {\n      node = new nodes.Neg(tok.lineno,\n        tok.colno,\n        this.parseUnary(true));\n    } else if (this.skipValue(lexer.TOKEN_OPERATOR, '+')) {\n      node = new nodes.Pos(tok.lineno,\n        tok.colno,\n        this.parseUnary(true));\n    } else {\n      node = this.parsePrimary();\n    }\n\n    if (!noFilters) {\n      node = this.parseFilter(node);\n    }\n\n    return node;\n  }\n\n  parsePrimary(noPostfix) {\n    const tok = this.nextToken();\n    let val;\n    let node = null;\n\n    if (!tok) {\n      this.fail('expected expression, got end of file');\n    } else if (tok.type === lexer.TOKEN_STRING) {\n      val = tok.value;\n    } else if (tok.type === lexer.TOKEN_INT) {\n      val = parseInt(tok.value, 10);\n    } else if (tok.type === lexer.TOKEN_FLOAT) {\n      val = parseFloat(tok.value);\n    } else if (tok.type === lexer.TOKEN_BOOLEAN) {\n      if (tok.value === 'true') {\n        val = true;\n      } else if (tok.value === 'false') {\n        val = false;\n      } else {\n        this.fail('invalid boolean: ' + tok.value,\n          tok.lineno,\n          tok.colno);\n      }\n    } else if (tok.type === lexer.TOKEN_NONE) {\n      val = null;\n    } else if (tok.type === lexer.TOKEN_REGEX) {\n      val = new RegExp(tok.value.body, tok.value.flags);\n    }\n\n    if (val !== undefined) {\n      node = new nodes.Literal(tok.lineno, tok.colno, val);\n    } else if (tok.type === lexer.TOKEN_SYMBOL) {\n      node = new nodes.Symbol(tok.lineno, tok.colno, tok.value);\n    } else {\n      // See if it's an aggregate type, we need to push the\n      // current delimiter token back on\n      this.pushToken(tok);\n      node = this.parseAggregate();\n    }\n\n    if (!noPostfix) {\n      node = this.parsePostfix(node);\n    }\n\n    if (node) {\n      return node;\n    } else {\n      throw this.error(`unexpected token: ${tok.value}`, tok.lineno, tok.colno);\n    }\n  }\n\n  parseFilterName() {\n    const tok = this.expect(lexer.TOKEN_SYMBOL);\n    let name = tok.value;\n\n    while (this.skipValue(lexer.TOKEN_OPERATOR, '.')) {\n      name += '.' + this.expect(lexer.TOKEN_SYMBOL).value;\n    }\n\n    return new nodes.Symbol(tok.lineno, tok.colno, name);\n  }\n\n  parseFilterArgs(node) {\n    if (this.peekToken().type === lexer.TOKEN_LEFT_PAREN) {\n      // Get a FunCall node and add the parameters to the\n      // filter\n      const call = this.parsePostfix(node);\n      return call.args.children;\n    }\n    return [];\n  }\n\n  parseFilter(node) {\n    while (this.skip(lexer.TOKEN_PIPE)) {\n      const name = this.parseFilterName();\n\n      node = new nodes.Filter(\n        name.lineno,\n        name.colno,\n        name,\n        new nodes.NodeList(\n          name.lineno,\n          name.colno,\n          [node].concat(this.parseFilterArgs(node))\n        )\n      );\n    }\n\n    return node;\n  }\n\n  parseFilterStatement() {\n    var filterTok = this.peekToken();\n    if (!this.skipSymbol('filter')) {\n      this.fail('parseFilterStatement: expected filter');\n    }\n\n    const name = this.parseFilterName();\n    const args = this.parseFilterArgs(name);\n\n    this.advanceAfterBlockEnd(filterTok.value);\n    const body = new nodes.Capture(\n      name.lineno,\n      name.colno,\n      this.parseUntilBlocks('endfilter')\n    );\n    this.advanceAfterBlockEnd();\n\n    const node = new nodes.Filter(\n      name.lineno,\n      name.colno,\n      name,\n      new nodes.NodeList(\n        name.lineno,\n        name.colno,\n        [body].concat(args)\n      )\n    );\n\n    return new nodes.Output(\n      name.lineno,\n      name.colno,\n      [node]\n    );\n  }\n\n  parseAggregate() {\n    var tok = this.nextToken();\n    var node;\n\n    switch (tok.type) {\n      case lexer.TOKEN_LEFT_PAREN:\n        node = new nodes.Group(tok.lineno, tok.colno);\n        break;\n      case lexer.TOKEN_LEFT_BRACKET:\n        node = new nodes.Array(tok.lineno, tok.colno);\n        break;\n      case lexer.TOKEN_LEFT_CURLY:\n        node = new nodes.Dict(tok.lineno, tok.colno);\n        break;\n      default:\n        return null;\n    }\n\n    while (1) { // eslint-disable-line no-constant-condition\n      const type = this.peekToken().type;\n      if (type === lexer.TOKEN_RIGHT_PAREN ||\n        type === lexer.TOKEN_RIGHT_BRACKET ||\n        type === lexer.TOKEN_RIGHT_CURLY) {\n        this.nextToken();\n        break;\n      }\n\n      if (node.children.length > 0) {\n        if (!this.skip(lexer.TOKEN_COMMA)) {\n          this.fail('parseAggregate: expected comma after expression',\n            tok.lineno,\n            tok.colno);\n        }\n      }\n\n      if (node instanceof nodes.Dict) {\n        // TODO: check for errors\n        const key = this.parsePrimary();\n\n        // We expect a key/value pair for dicts, separated by a\n        // colon\n        if (!this.skip(lexer.TOKEN_COLON)) {\n          this.fail('parseAggregate: expected colon after dict key',\n            tok.lineno,\n            tok.colno);\n        }\n\n        // TODO: check for errors\n        const value = this.parseExpression();\n        node.addChild(new nodes.Pair(key.lineno,\n          key.colno,\n          key,\n          value));\n      } else {\n        // TODO: check for errors\n        const expr = this.parseExpression();\n        node.addChild(expr);\n      }\n    }\n\n    return node;\n  }\n\n  parseSignature(tolerant, noParens) {\n    let tok = this.peekToken();\n    if (!noParens && tok.type !== lexer.TOKEN_LEFT_PAREN) {\n      if (tolerant) {\n        return null;\n      } else {\n        this.fail('expected arguments', tok.lineno, tok.colno);\n      }\n    }\n\n    if (tok.type === lexer.TOKEN_LEFT_PAREN) {\n      tok = this.nextToken();\n    }\n\n    const args = new nodes.NodeList(tok.lineno, tok.colno);\n    const kwargs = new nodes.KeywordArgs(tok.lineno, tok.colno);\n    let checkComma = false;\n\n    while (1) { // eslint-disable-line no-constant-condition\n      tok = this.peekToken();\n      if (!noParens && tok.type === lexer.TOKEN_RIGHT_PAREN) {\n        this.nextToken();\n        break;\n      } else if (noParens && tok.type === lexer.TOKEN_BLOCK_END) {\n        break;\n      }\n\n      if (checkComma && !this.skip(lexer.TOKEN_COMMA)) {\n        this.fail('parseSignature: expected comma after expression',\n          tok.lineno,\n          tok.colno);\n      } else {\n        const arg = this.parseExpression();\n\n        if (this.skipValue(lexer.TOKEN_OPERATOR, '=')) {\n          kwargs.addChild(\n            new nodes.Pair(arg.lineno,\n              arg.colno,\n              arg,\n              this.parseExpression())\n          );\n        } else {\n          args.addChild(arg);\n        }\n      }\n\n      checkComma = true;\n    }\n\n    if (kwargs.children.length) {\n      args.addChild(kwargs);\n    }\n\n    return args;\n  }\n\n  parseUntilBlocks(...blockNames) {\n    const prev = this.breakOnBlocks;\n    this.breakOnBlocks = blockNames;\n\n    const ret = this.parse();\n\n    this.breakOnBlocks = prev;\n    return ret;\n  }\n\n  parseNodes() {\n    let tok;\n    const buf = [];\n\n    while ((tok = this.nextToken())) {\n      if (tok.type === lexer.TOKEN_DATA) {\n        let data = tok.value;\n        const nextToken = this.peekToken();\n        const nextVal = nextToken && nextToken.value;\n\n        // If the last token has \"-\" we need to trim the\n        // leading whitespace of the data. This is marked with\n        // the `dropLeadingWhitespace` variable.\n        if (this.dropLeadingWhitespace) {\n          // TODO: this could be optimized (don't use regex)\n          data = data.replace(/^\\s*/, '');\n          this.dropLeadingWhitespace = false;\n        }\n\n        // Same for the succeeding block start token\n        if (nextToken &&\n          ((nextToken.type === lexer.TOKEN_BLOCK_START &&\n          nextVal.charAt(nextVal.length - 1) === '-') ||\n          (nextToken.type === lexer.TOKEN_VARIABLE_START &&\n          nextVal.charAt(this.tokens.tags.VARIABLE_START.length)\n          === '-') ||\n          (nextToken.type === lexer.TOKEN_COMMENT &&\n          nextVal.charAt(this.tokens.tags.COMMENT_START.length)\n          === '-'))) {\n          // TODO: this could be optimized (don't use regex)\n          data = data.replace(/\\s*$/, '');\n        }\n\n        buf.push(new nodes.Output(tok.lineno,\n          tok.colno,\n          [new nodes.TemplateData(tok.lineno,\n            tok.colno,\n            data)]));\n      } else if (tok.type === lexer.TOKEN_BLOCK_START) {\n        this.dropLeadingWhitespace = false;\n        const n = this.parseStatement();\n        if (!n) {\n          break;\n        }\n        buf.push(n);\n      } else if (tok.type === lexer.TOKEN_VARIABLE_START) {\n        const e = this.parseExpression();\n        this.dropLeadingWhitespace = false;\n        this.advanceAfterVariableEnd();\n        buf.push(new nodes.Output(tok.lineno, tok.colno, [e]));\n      } else if (tok.type === lexer.TOKEN_COMMENT) {\n        this.dropLeadingWhitespace = tok.value.charAt(\n          tok.value.length - this.tokens.tags.COMMENT_END.length - 1\n        ) === '-';\n      } else {\n        // Ignore comments, otherwise this should be an error\n        this.fail('Unexpected token at top-level: ' +\n          tok.type, tok.lineno, tok.colno);\n      }\n    }\n\n    return buf;\n  }\n\n  parse() {\n    return new nodes.NodeList(0, 0, this.parseNodes());\n  }\n\n  parseAsRoot() {\n    return new nodes.Root(0, 0, this.parseNodes());\n  }\n}\n\n// var util = require('util');\n\n// var l = lexer.lex('{%- if x -%}\\n hello {% endif %}');\n// var t;\n// while((t = l.nextToken())) {\n//     console.log(util.inspect(t));\n// }\n\n// var p = new Parser(lexer.lex('hello {% filter title %}' +\n//                              'Hello madam how are you' +\n//                              '{% endfilter %}'));\n// var n = p.parseAsRoot();\n// nodes.printNodes(n);\n\nmodule.exports = {\n  parse(src, extensions, opts) {\n    var p = new Parser(lexer.lex(src, opts));\n    if (extensions !== undefined) {\n      p.extensions = extensions;\n    }\n    return p.parseAsRoot();\n  },\n  Parser: Parser\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(647);\n"],"names":["root","factory","exports","module","define","amd","self","ReflectOwnKeys","R","Reflect","ReflectApply","apply","target","receiver","args","Function","prototype","call","ownKeys","Object","getOwnPropertySymbols","getOwnPropertyNames","concat","NumberIsNaN","Number","isNaN","value","EventEmitter","init","this","once","emitter","name","Promise","resolve","reject","errorListener","err","removeListener","resolver","slice","arguments","eventTargetAgnosticAddListener","handler","on","addErrorHandlerIfEventEmitter","_events","undefined","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","TypeError","_getMaxListeners","that","_addListener","type","prepend","m","events","existing","warning","create","newListener","emit","unshift","push","length","warned","w","Error","String","count","console","warn","onceWrapper","fired","wrapFn","_onceWrap","state","wrapped","bind","_listeners","unwrap","evlistener","arr","ret","Array","i","unwrapListeners","arrayClone","listenerCount","n","copy","flags","addEventListener","wrapListener","arg","removeEventListener","defineProperty","enumerable","get","set","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","error","er","message","context","len","listeners","addListener","prependListener","prependOnceListener","list","position","originalListener","shift","index","pop","spliceOne","off","removeAllListeners","key","keys","rawListeners","eventNames","lib","require","r","normalize","defaultValue","num","capitalize","str","toLowerCase","copySafeness","charAt","toUpperCase","val","isString","split","isObject","_entries","map","_ref","isArray","TemplateError","getSelectOrReject","expectedTestResult","testName","secondArg","test","env","getTest","toArray","filter","item","trim","replace","abs","Math","batch","linecount","fillWith","res","tmp","center","width","spaces","pre","repeat","post","def","bool","dictsort","caseSensitive","by","si","array","k","sort","t1","t2","a","b","dump","obj","JSON","stringify","escape","SafeString","markSafe","toString","safe","first","forceescape","groupby","attr","groupBy","opts","throwOnUndefined","indent","indentfirst","lines","sp","l","join","del","v","last","Map","Set","size","lower","nl2br","random","floor","rejectattr","select","selectattr","old","new_","maxCount","originalStr","RegExp","nextIndex","indexOf","pos","substring","reverse","round","precision","method","factor","pow","ceil","slices","sliceLength","extra","offset","start","end","currSlice","sum","reduce","makeMacro","reversed","caseSens","_this","getAttribute","getAttrGetter","x","y","string","striptags","input","preserveLinebreaks","trimmedInput","title","words","word","truncate","killwords","orig","idx","lastIndexOf","upper","urlencode","enc","encodeURIComponent","_ref2","puncRe","emailRe","httpHttpsRe","wwwRe","tldRe","urlize","nofollow","Infinity","noFollowAttr","matches","match","possibleUrl","shortUrl","substr","wordcount","float","parseFloat","intFilter","base","parseInt","int","d","default","e","executeSync","splice","executeAsync","fn","setImmediate","process","nextTick","setTimeout","_isArray","maybeArray","waterfall","tasks","callback","forceAsync","wrapIterator","iterator","next","makeCallback","makeIterator","rawAsap","freeTasks","pendingErrors","requestErrorThrow","makeRequestCallFromTimer","asap","task","rawTask","RawTask","onerror","nodes","sym","gensym","mapCOW","func","walk","ast","depthFirst","Node","astT","NodeList","children","node","typename","lineno","colno","CallExtension","contentArgs","extName","prop","props","fields","field","propsT","forEach","depthWalk","_liftFilters","asyncFilters","walked","descNode","symbol","Block","Filter","CallExtensionAsync","Symbol","FilterAsync","transform","If","For","async","child","IfAsync","AsyncEach","AsyncAll","cond","body","else_","convertStatements","blockNode","hasSuper","FunCall","Super","liftSuper","Output","liftFilters","cps","callable","defined","divisibleby","one","two","escaped","equalto","eq","sameas","even","falsy","ge","greaterthan","gt","le","lessthan","lt","ne","number","odd","truthy","iterable","mapping","orig_Compiler_assertType","orig_Parser_parseAggregate","runtime","Compiler","compiler","Parser","parser","lexer","orig_contextOrFrameLookup","contextOrFrameLookup","orig_memberLookup","memberLookup","getTokensState","tokens","assertType","parseAggregate","frame","Slice","extend","stop","step","Literal","parent","compileSlice","_emit","_compileExpression","origState","errState","rethrow","_assign","peeked","tok","peekToken","TOKEN_LEFT_BRACKET","nextToken","isSlice","skip","TOKEN_RIGHT_BRACKET","fail","TOKEN_COLON","parseExpression","sliceLookup","results","hasOwnProp","hasOwnProperty","ARRAY_MEMBERS","append","element","remove","find","insert","elem","OBJECT_MEMBERS","items","values","_values","output","has_key","popitem","setdefault","update","kwargs","iteritems","itervalues","iterkeys","autoescape","arrayFrom","from","supportsIterators","Frame","isolateWrites","variables","topLevel","_proto","resolveUp","parts","id","lookup","p","forWrite","isKeywordArgs","numArgs","writable","configurable","valueOf","argNames","kwargNames","_len","macroArgs","_key","argCount","lastArg","getKeywordArgs","makeKeywordArgs","__keywords","suppressValue","ensureDefined","_len2","_key2","callWrap","handleError","dest","asyncEach","dimen","iter","cb","asyncIter","asyncFor","asyncAll","outputArr","finished","done","inOperator","fromIterator","ArrayProto","ObjProto","escapeMap","escapeRegex","lookupEscape","ch","cause","getStack","setPrototypeOf","captureStackTrace","constructor","stackDescriptor","getOwnPropertyDescriptor","stack","firstUpdate","Update","path","msg","isFunction","attribute","_item","part","searchElement","fromIndex","keys_","_prettifyError","withInternals","result","without","contains","char_","each","obj1","obj2","fs","Environment","precompileGlobal","filename","patterns","some","pattern","precompileString","wrapper","_precompile","template","extensions","extensionsList","compile","precompile","pathStats","existsSync","statSync","precompiled","templates","isFile","readFileSync","isDirectory","addTemplates","dir","readdirSync","file","filepath","subpath","stat","exclude","include","force","_setPrototypeOf","t","__proto__","EmitterObj","_EmitterObj","Loader","o","to","dirname","isRelative","out","asFunction","PrecompiledLoader","WebLoader","_Loader","baseURL","useCache","getSource","_this2","fetch","src","content","status","noCache","url","window","ajax","XMLHttpRequest","loading","onreadystatechange","readyState","responseText","Date","getTime","open","send","whitespaceChars","delimChars","TOKEN_STRING","TOKEN_WHITESPACE","TOKEN_DATA","TOKEN_BLOCK_START","TOKEN_BLOCK_END","TOKEN_VARIABLE_START","TOKEN_VARIABLE_END","TOKEN_COMMENT","TOKEN_LEFT_PAREN","TOKEN_RIGHT_PAREN","TOKEN_LEFT_CURLY","TOKEN_RIGHT_CURLY","TOKEN_OPERATOR","TOKEN_COMMA","TOKEN_TILDE","TOKEN_PIPE","TOKEN_FLOAT","TOKEN_BOOLEAN","TOKEN_NONE","TOKEN_SYMBOL","TOKEN_REGEX","token","Tokenizer","in_code","tags","BLOCK_START","blockStart","BLOCK_END","blockEnd","VARIABLE_START","variableStart","VARIABLE_END","variableEnd","COMMENT_START","commentStart","COMMENT_END","commentEnd","trimBlocks","lstripBlocks","cur","current","isFinished","_parseString","_extract","_extractString","forward","back","forwardN","regexBody","previous","POSSIBLE_FLAGS","regexFlags","complexOps","curComplex","_extractUntil","dec","data","beginChars","inComment","_matches","lastLine","delimiter","charString","_extractMatching","breakOnMatch","_extractRegex","regex","currentStr","backN","lex","TOKEN_INT","TOKEN_SPECIAL","_require","Template","loaders","installJinjaCompat","configure","templatesPath","TemplateLoader","FileSystemLoader","watch","web","express","NodeResolveLoader","reset","eagerCompile","render","ctx","renderString","compiledTemplates","range","cycler","joiner","sep","queue","requestFlush","flush","currentIndex","scan","newLength","toggle","observer","scope","g","BrowserMutationObserver","MutationObserver","WebKitMutationObserver","timeoutHandle","handleTimer","intervalHandle","setInterval","clearTimeout","clearInterval","document","createTextNode","observe","characterData","app","NunjucksView","defaultEngine","ext","extname","_defineProperties","_toPropertyKey","_createClass","toPrimitive","_toPrimitive","_inheritsLoose","traverseAndCheck","findAll","_Obj","_arguments","iterFields","_this3","Obj","Value","_Node","_Node2","_proto2","addChild","Root","Group","ArrayNode","Pair","Dict","LookupVal","InlineIf","Macro","Caller","Import","FromImport","_Node3","names","withContext","KeywordArgs","Extends","Include","Switch","Case","Capture","TemplateData","UnaryOp","BinOp","In","Is","Or","And","Not","Add","Concat","Sub","Mul","Div","FloorDiv","Mod","Pow","Neg","Pos","Compare","CompareOperand","__name","print","inline","line","stdout","write","nl","printNodes","fieldName","filters","tests","globals","_require2","globalRuntime","expressApp","callbackAsap","noopTmplSrc","dev","nunjucksPrecompiled","_initLoaders","addFilter","addTest","loader","cache","fullname","source","invalidateCache","addExtension","extension","removeExtension","getExtension","hasExtension","addGlobal","getGlobal","getFilter","resolveTemplate","parentName","getTemplate","ignoreMissing","syncResult","tmpl","raw","handle","info","newTmpl","Context","blocks","_this4","exported","addBlock","setVariable","getVariables","block","getBlock","getSuper","blk","addExport","getExported","_this5","_Obj2","_proto3","tmplProps","tmplStr","_compile","compiled","parentFrame","_this6","didError","rootRenderFunc","_getBlocks","extendClass","cls","subclass","_cls","_EventEmitter","transformer","compareOps","templateName","codebuf","lastId","buffer","bufferStack","_scopeClosers","inBlock","_pushBuffer","_tmpid","_popBuffer","code","_emitLine","_emitLines","_emitFuncBegin","_emitFuncEnd","noReturn","_closeScopeLevels","_addScopeLevel","_withScopedSyntax","_makeCallback","_templateName","_compileChildren","_compileAggregate","startChar","endChar","types","compileCallExtension","compileCallExtensionAsync","compileNodeList","compileLiteral","compileSymbol","compileGroup","compileArray","compileDict","compilePair","compileInlineIf","compileIn","left","right","compileIs","_binOpEmitter","compileOr","compileAnd","compileAdd","compileConcat","compileSub","compileMul","compileDiv","compileMod","compileNot","compileFloorDiv","compilePow","compileNeg","compilePos","compileCompare","expr","ops","op","compileLookupVal","_getNodeName","compileFunCall","compileFilter","compileFilterAsync","compileKeywordArgs","compileSet","ids","targets","compileSwitch","_this7","cases","c","compileIf","_this8","compileIfAsync","_emitLoopBindings","_this9","compileFor","_this0","u","tid","_node$name$children","_compileAsyncLoop","parallel","_this1","asyncMethod","arrayLen","buf","compileAsyncEach","compileAsyncAll","_compileMacro","_this10","funcId","keepFrame","currFrame","realNames","pair","bufferId","compileMacro","compileCaller","_compileGetTemplate","parentTemplateId","eagerCompileArg","ignoreMissingArg","compileImport","compileFromImport","_this11","importedId","nameNode","alias","compileBlock","compileSuper","blockName","compileExtends","compileInclude","id2","compileTemplateData","compileCapture","_this12","compileOutput","_this13","compileRoot","_this14","blockNames","tmpFrame","getCode","processedSrc","preprocess","f","s","processor","parse","breakOnBlocks","dropLeadingWhitespace","withWhitespace","pushToken","expect","skipValue","skipSymbol","advanceAfterBlockEnd","advanceAfterVariableEnd","parseFor","endBlock","forTok","parsePrimary","prim","parseUntilBlocks","parseMacro","macroTok","parseSignature","parseCall","callTok","callerArgs","macroCall","callerName","callerNode","parseWithContext","parseImport","importTok","parseFrom","fromTok","nextTok","parseBlock","tag","parseExtends","tagName","parseInclude","parseIf","parseSet","parseSwitch","switchStart","switchEnd","caseStart","caseDefault","defaultCase","col","parseStatement","parseRaw","parseFilterStatement","endTagName","rawBlockRegex","rawLevel","begun","all","parsePostfix","parseInlineIf","parseOr","condNode","bodyNode","parseAnd","node2","parseNot","parseIn","parseIs","invert","parseCompare","not","parseConcat","parseAdd","parseSub","parseMul","parseDiv","parseFloorDiv","parseMod","parsePow","parseUnary","noFilters","parseFilter","noPostfix","parseFilterName","parseFilterArgs","filterTok","tolerant","noParens","checkComma","prev","parseNodes","nextVal","parseAsRoot","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","globalThis"],"ignoreList":[],"sourceRoot":""}