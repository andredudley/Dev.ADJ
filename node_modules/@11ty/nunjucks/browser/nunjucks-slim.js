/*! For license information please see nunjucks-slim.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.nunjucks=e():t.nunjucks=e()}(self,function(){return function(){var t={5:function(){},7:function(t){"use strict";var e,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};e=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var o=Number.isNaN||function(t){return t!=t};function i(){i.init.call(this)}t.exports=i,t.exports.once=function(t,e){return new Promise(function(n,r){function o(n){t.removeListener(e,i),r(n)}function i(){"function"==typeof t.removeListener&&t.removeListener("error",o),n([].slice.call(arguments))}y(t,e,i,{once:!0}),"error"!==e&&function(t,e){"function"==typeof t.on&&y(t,"error",e,{once:!0})}(t,o)})},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var s=10;function u(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function a(t){return void 0===t._maxListeners?i.defaultMaxListeners:t._maxListeners}function c(t,e,n,r){var o,i,s,c;if(u(n),void 0===(i=t._events)?(i=t._events=Object.create(null),t._eventsCount=0):(void 0!==i.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),s=i[e]),void 0===s)s=i[e]=n,++t._eventsCount;else if("function"==typeof s?s=i[e]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(o=a(t))>0&&s.length>o&&!s.warned){s.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=t,f.type=e,f.count=s.length,c=f,console&&console.warn&&console.warn(c)}return t}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},o=f.bind(r);return o.listener=n,r.wrapFn=o,o}function p(t,e,n){var r=t._events;if(void 0===r)return[];var o=r[e];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(o):v(o,o.length)}function h(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function v(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function y(t,e,n,r){if("function"==typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,function o(i){r.once&&t.removeEventListener(e,o),n(i)})}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");s=t}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},i.prototype.getMaxListeners=function(){return a(this)},i.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var o="error"===t,i=this._events;if(void 0!==i)o=o&&void 0===i.error;else if(!o)return!1;if(o){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var u=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw u.context=s,u}var a=i[t];if(void 0===a)return!1;if("function"==typeof a)r(a,this,e);else{var c=a.length,f=v(a,c);for(n=0;n<c;++n)r(f[n],this,e)}return!0},i.prototype.addListener=function(t,e){return c(this,t,e,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(t,e){return c(this,t,e,!0)},i.prototype.once=function(t,e){return u(e),this.on(t,l(this,t,e)),this},i.prototype.prependOnceListener=function(t,e){return u(e),this.prependListener(t,l(this,t,e)),this},i.prototype.removeListener=function(t,e){var n,r,o,i,s;if(u(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0===--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,i=n.length-1;i>=0;i--)if(n[i]===e||n[i].listener===e){s=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,o),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,s||e)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var o,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},i.prototype.listeners=function(t){return p(this,t,!0)},i.prototype.rawListeners=function(t){return p(this,t,!1)},i.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):h.call(t,e)},i.prototype.listenerCount=h,i.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},153:function(t,e,n){"use strict";var r=n(449),o=n(434),i=t.exports={};function s(t,e){return null==t||!1===t?e:t}function u(t){return t!=t}function a(t){var e=(t=s(t,"")).toLowerCase();return o.copySafeness(t,e.charAt(0).toUpperCase()+e.slice(1))}function c(t){if(r.isString(t))return t.split("");if(r.isObject(t))return r._entries(t||{}).map(function(t){return{key:t[0],value:t[1]}});if(r.isArray(t))return t;throw new r.TemplateError("list filter: type not iterable")}function f(t){return function(e,n,o){void 0===n&&(n="truthy");var i=this,s=i.env.getTest(n);return r.toArray(e).filter(function(e){return s.call(i,e,o)===t})}}function l(t){return o.copySafeness(t,t.replace(/^\s*|\s*$/g,""))}i.abs=Math.abs,i.batch=function(t,e,n){var r,o=[],i=[];for(r=0;r<t.length;r++)r%e===0&&i.length&&(o.push(i),i=[]),i.push(t[r]);if(i.length){if(n)for(r=i.length;r<e;r++)i.push(n);o.push(i)}return o},i.capitalize=a,i.center=function(t,e){if(e=e||80,(t=s(t,"")).length>=e)return t;var n=e-t.length,i=r.repeat(" ",n/2-n%2),u=r.repeat(" ",n/2);return o.copySafeness(t,i+t+u)},i.default=function(t,e,n){return n?t||e:void 0!==t?t:e},i.dictsort=function(t,e,n){if(!r.isObject(t))throw new r.TemplateError("dictsort filter: val must be an object");var o,i=[];for(var s in t)i.push([s,t[s]]);if(void 0===n||"key"===n)o=0;else{if("value"!==n)throw new r.TemplateError("dictsort filter: You can only sort by either key or value");o=1}return i.sort(function(t,n){var i=t[o],s=n[o];return e||(r.isString(i)&&(i=i.toUpperCase()),r.isString(s)&&(s=s.toUpperCase())),i>s?1:i===s?0:-1}),i},i.dump=function(t,e){return JSON.stringify(t,null,e)},i.escape=function(t){return t instanceof o.SafeString?t:(t=null==t?"":t,o.markSafe(r.escape(t.toString())))},i.safe=function(t){return t instanceof o.SafeString?t:(t=null==t?"":t,o.markSafe(t.toString()))},i.first=function(t){return t[0]},i.forceescape=function(t){return t=null==t?"":t,o.markSafe(r.escape(t.toString()))},i.groupby=function(t,e){return r.groupBy(t,e,this.env.opts.throwOnUndefined)},i.indent=function(t,e,n){if(""===(t=s(t,"")))return"";e=e||4;var i=t.split("\n"),u=r.repeat(" ",e),a=i.map(function(t,e){return 0!==e||n?""+u+t:t}).join("\n");return o.copySafeness(t,a)},i.join=function(t,e,n){return e=e||"",n&&(t=r.map(t,function(t){return t[n]})),t.join(e)},i.last=function(t){return t[t.length-1]},i.length=function(t){var e=s(t,"");return void 0!==e?"function"==typeof Map&&e instanceof Map||"function"==typeof Set&&e instanceof Set?e.size:!r.isObject(e)||e instanceof o.SafeString?e.length:r.keys(e).length:0},i.list=c,i.lower=function(t){return(t=s(t,"")).toLowerCase()},i.nl2br=function(t){return null==t?"":o.copySafeness(t,t.replace(/\r\n|\n/g,"<br />\n"))},i.random=function(t){return t[Math.floor(Math.random()*t.length)]},i.reject=f(!1),i.rejectattr=function(t,e){return t.filter(function(t){return!t[e]})},i.select=f(!0),i.selectattr=function(t,e){return t.filter(function(t){return!!t[e]})},i.replace=function(t,e,n,r){var i=t;if(e instanceof RegExp)return t.replace(e,n);void 0===r&&(r=-1);var s="";if("number"==typeof e)e=""+e;else if("string"!=typeof e)return t;if("number"==typeof t&&(t=""+t),"string"!=typeof t&&!(t instanceof o.SafeString))return t;if(""===e)return s=n+t.split("").join(n)+n,o.copySafeness(t,s);var u=t.indexOf(e);if(0===r||-1===u)return t;for(var a=0,c=0;u>-1&&(-1===r||c<r);)s+=t.substring(a,u)+n,a=u+e.length,c++,u=t.indexOf(e,a);return a<t.length&&(s+=t.substring(a)),o.copySafeness(i,s)},i.reverse=function(t){var e;return(e=r.isString(t)?c(t):r.map(t,function(t){return t})).reverse(),r.isString(t)?o.copySafeness(t,e.join("")):e},i.round=function(t,e,n){e=e||0;var r=Math.pow(10,e);return("ceil"===n?Math.ceil:"floor"===n?Math.floor:Math.round)(t*r)/r},i.slice=function(t,e,n){for(var r=Math.floor(t.length/e),o=t.length%e,i=[],s=0,u=0;u<e;u++){var a=s+u*r;u<o&&s++;var c=s+(u+1)*r,f=t.slice(a,c);n&&u>=o&&f.push(n),i.push(f)}return i},i.sum=function(t,e,n){return void 0===n&&(n=0),e&&(t=r.map(t,function(t){return t[e]})),n+t.reduce(function(t,e){return t+e},0)},i.sort=o.makeMacro(["value","reverse","case_sensitive","attribute"],[],function(t,e,n,o){var i=this,s=r.map(t,function(t){return t}),u=r.getAttrGetter(o);return s.sort(function(t,s){var a=o?u(t):t,c=o?u(s):s;if(i.env.opts.throwOnUndefined&&o&&(void 0===a||void 0===c))throw new TypeError('sort: attribute "'+o+'" resolved to undefined');return!n&&r.isString(a)&&r.isString(c)&&(a=a.toLowerCase(),c=c.toLowerCase()),a<c?e?1:-1:a>c?e?-1:1:0}),s}),i.string=function(t){return o.copySafeness(t,t)},i.striptags=function(t,e){var n,r=l((t=s(t,"")).replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>|<!--[\s\S]*?-->/gi,""));return n=e?r.replace(/^ +| +$/gm,"").replace(/ +/g," ").replace(/(\r\n)/g,"\n").replace(/\n\n\n+/g,"\n\n"):r.replace(/\s+/gi," "),o.copySafeness(t,n)},i.title=function(t){var e=(t=s(t,"")).split(" ").map(function(t){return a(t)});return o.copySafeness(t,e.join(" "))},i.trim=l,i.truncate=function(t,e,n,r){var i=t;if(e=e||255,(t=s(t,"")).length<=e)return t;if(n)t=t.substring(0,e);else{var u=t.lastIndexOf(" ",e);-1===u&&(u=e),t=t.substring(0,u)}return t+=null!=r?r:"...",o.copySafeness(i,t)},i.upper=function(t){return(t=s(t,"")).toUpperCase()},i.urlencode=function(t){var e=encodeURIComponent;return r.isString(t)?e(t):(r.isArray(t)?t:r._entries(t)).map(function(t){var n=t[0],r=t[1];return e(n)+"="+e(r)}).join("&")};var p=/^(?:\(|<|&lt;)?(.*?)(?:\.|,|\)|\n|&gt;)?$/,h=/^[\w.!#$%&'*+\-\/=?\^`{|}~]+@[a-z\d\-]+(\.[a-z\d\-]+)+$/i,v=/^https?:\/\/.*$/,y=/^www\./,d=/\.(?:org|net|com)(?:\:|\/|$)/;i.urlize=function(t,e,n){u(e)&&(e=1/0);var r=!0===n?' rel="nofollow"':"";return t.split(/(\s+)/).filter(function(t){return t&&t.length}).map(function(t){var n=t.match(p),o=n?n[1]:t,i=o.substr(0,e);return v.test(o)?'<a href="'+o+'"'+r+">"+i+"</a>":y.test(o)?'<a href="http://'+o+'"'+r+">"+i+"</a>":h.test(o)?'<a href="mailto:'+o+'">'+o+"</a>":d.test(o)?'<a href="http://'+o+'"'+r+">"+i+"</a>":t}).join("")},i.wordcount=function(t){var e=(t=s(t,""))?t.match(/\w+/g):null;return e?e.length:null},i.float=function(t,e){var n=parseFloat(t);return u(n)?e:n};var g=o.makeMacro(["value","default","base"],[],function(t,e,n){void 0===n&&(n=10);var r=parseInt(t,n);return u(r)?e:r});i.int=g,i.d=i.default,i.e=i.escape},211:function(t,e){var n;!function(){"use strict";var r=function(){var t=Array.prototype.slice.call(arguments);"function"==typeof t[0]&&t[0].apply(null,t.splice(1))},o=function(t){"function"==typeof setImmediate?setImmediate(t):"undefined"!=typeof process&&process.nextTick?process.nextTick(t):setTimeout(t,0)},i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},s=function(t,e,n){var s=n?o:r;if(e=e||function(){},!i(t)){var u=new Error("First argument to waterfall must be an array of functions");return e(u)}if(!t.length)return e();var a=function(t){return function(n){if(n)e.apply(null,arguments),e=function(){};else{var r=Array.prototype.slice.call(arguments,1),o=t.next();o?r.push(a(o)):r.push(e),s(function(){t.apply(null,r)})}}};a(function(t){var e=function(n){var r=function(){return t.length&&t[n].apply(null,arguments),r.next()};return r.next=function(){return n<t.length-1?e(n+1):null},r};return e(0)}(t))()};void 0===(n=function(){return s}.apply(e,[]))||(t.exports=n)}()},236:function(t,e,n){"use strict";var r=n(795),o=[],i=[],s=r.makeRequestCallFromTimer(function(){if(i.length)throw i.shift()});function u(t){var e;(e=o.length?o.pop():new a).task=t,r(e)}function a(){this.task=null}t.exports=u,a.prototype.call=function(){try{this.task.call()}catch(t){u.onerror?u.onerror(t):(i.push(t),s())}finally{this.task=null,o[o.length]=this}}},423:function(t,e,n){"use strict";var r=n(434).SafeString;e.callable=function(t){return"function"==typeof t},e.defined=function(t){return void 0!==t},e.divisibleby=function(t,e){return t%e===0},e.escaped=function(t){return t instanceof r},e.equalto=function(t,e){return t===e},e.eq=e.equalto,e.sameas=e.equalto,e.even=function(t){return t%2==0},e.falsy=function(t){return!t},e.ge=function(t,e){return t>=e},e.greaterthan=function(t,e){return t>e},e.gt=e.greaterthan,e.le=function(t,e){return t<=e},e.lessthan=function(t,e){return t<e},e.lt=e.lessthan,e.lower=function(t){return t.toLowerCase()===t},e.ne=function(t,e){return t!==e},e.null=function(t){return null===t},e.number=function(t){return"number"==typeof t},e.odd=function(t){return t%2==1},e.string=function(t){return"string"==typeof t},e.truthy=function(t){return!!t},e.undefined=function(t){return void 0===t},e.upper=function(t){return t.toUpperCase()===t},e.iterable=function(t){return"undefined"!=typeof Symbol?!!t[Symbol.iterator]:Array.isArray(t)||"string"==typeof t},e.mapping=function(t){var e=null!=t&&"object"==typeof t&&!Array.isArray(t);return Set?e&&!(t instanceof Set):e}},433:function(t){t.exports=function(){"use strict";var t,e,n=this.runtime,r=this.lib,o=this.compiler.Compiler,i=this.parser.Parser,s=(this.nodes,this.lexer,n.contextOrFrameLookup),u=n.memberLookup;function a(t,e,r,o){t=t||[],null===e&&(e=o<0?t.length-1:0),null===r?r=o<0?-1:t.length:r<0&&(r+=t.length),e<0&&(e+=t.length);for(var i=[],s=e;!(s<0||s>t.length||o>0&&s>=r||o<0&&s<=r);s+=o)i.push(n.memberLookup(t,s));return i}function c(t,e){return Object.prototype.hasOwnProperty.call(t,e)}o&&(t=o.prototype.assertType),i&&(e=i.prototype.parseAggregate),n.contextOrFrameLookup=function(t,e,n){var r=s.apply(this,arguments);if(void 0!==r)return r;switch(n){case"True":return!0;case"False":return!1;case"None":return null;default:return}};var f={pop:function(t){if(void 0===t)return this.pop();if(t>=this.length||t<0)throw new Error("KeyError");return this.splice(t,1)},append:function(t){return this.push(t)},remove:function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return this.splice(e,1);throw new Error("ValueError")},count:function(t){for(var e=0,n=0;n<this.length;n++)this[n]===t&&e++;return e},index:function(t){var e;if(-1===(e=this.indexOf(t)))throw new Error("ValueError");return e},find:function(t){return this.indexOf(t)},insert:function(t,e){return this.splice(t,0,e)}},l={items:function(){return r._entries(this)},values:function(){return r._values(this)},keys:function(){return r.keys(this)},get:function(t,e){var n=this[t];return void 0===n&&(n=e),n},has_key:function(t){return c(this,t)},pop:function(t,e){var n=this[t];if(void 0===n&&void 0!==e)n=e;else{if(void 0===n)throw new Error("KeyError");delete this[t]}return n},popitem:function(){var t=r.keys(this);if(!t.length)throw new Error("KeyError");var e=t[0],n=this[e];return delete this[e],[e,n]},setdefault:function(t,e){return void 0===e&&(e=null),t in this||(this[t]=e),this[t]},update:function(t){return r._assign(this,t),null}};return l.iteritems=l.items,l.itervalues=l.values,l.iterkeys=l.keys,n.memberLookup=function(t,e,n){return 4===arguments.length?a.apply(this,arguments):(t=t||{},r.isArray(t)&&c(f,e)?f[e].bind(t):r.isObject(t)&&c(l,e)?l[e].bind(t):u.apply(this,arguments))},function(){n.contextOrFrameLookup=s,n.memberLookup=u,o&&(o.prototype.assertType=t),i&&(i.prototype.parseAggregate=e)}}},434:function(t,e,n){"use strict";var r=n(449),o=Array.from,i="function"==typeof Symbol&&Symbol.iterator&&"function"==typeof o,s=function(){function t(t,e){this.variables=Object.create(null),this.parent=t,this.topLevel=!1,this.isolateWrites=e}var e=t.prototype;return e.set=function(t,e,n){var r=t.split("."),o=this.variables,i=this;if(n&&(i=this.resolve(r[0],!0)))i.set(t,e);else{for(var s=0;s<r.length-1;s++){var u=r[s];o[u]||(o[u]={}),o=o[u]}o[r[r.length-1]]=e}},e.get=function(t){var e=this.variables[t];return void 0!==e?e:null},e.lookup=function(t){var e=this.parent,n=this.variables[t];return void 0!==n?n:e&&e.lookup(t)},e.resolve=function(t,e){var n=e&&this.isolateWrites?void 0:this.parent;return void 0!==this.variables[t]?this:n&&n.resolve(t)},e.push=function(e){return new t(this,e)},e.pop=function(){return this.parent},t}();function u(t){return t&&Object.prototype.hasOwnProperty.call(t,"__keywords")}function a(t){var e=t.length;return 0===e?0:u(t[e-1])?e-1:e}function c(t){if("string"!=typeof t)return t;this.val=t,this.length=t.length}c.prototype=Object.create(String.prototype,{length:{writable:!0,configurable:!0,value:0}}),c.prototype.valueOf=function(){return this.val},c.prototype.toString=function(){return this.val},t.exports={Frame:s,makeMacro:function(t,e,n){return function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];var s,c=a(o),f=function(t){var e=t.length;if(e){var n=t[e-1];if(u(n))return n}return{}}(o);if(c>t.length)s=o.slice(0,t.length),o.slice(s.length,c).forEach(function(t,n){n<e.length&&(f[e[n]]=t)}),s.push(f);else if(c<t.length){s=o.slice(0,c);for(var l=c;l<t.length;l++){var p=t[l];s.push(f[p]),delete f[p]}s.push(f)}else s=o;return n.apply(this,s)}},makeKeywordArgs:function(t){return t.__keywords=!0,t},numArgs:a,suppressValue:function(t,e){return t=null!=t?t:"",!e||t instanceof c||(t=r.escape(t.toString())),t},ensureDefined:function(t,e,n){if(null==t)throw new r.TemplateError("attempted to output null or undefined value",e+1,n+1);return t},memberLookup:function(t,e){if(null!=t)return"function"==typeof t[e]?function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t[e].apply(t,r)}:t[e]},contextOrFrameLookup:function(t,e,n){var r=e.lookup(n);return void 0!==r?r:t.lookup(n)},callWrap:function(t,e,n,r){if(!t)throw new Error("Unable to call `"+e+"`, which is undefined or falsey");if("function"!=typeof t)throw new Error("Unable to call `"+e+"`, which is not a function");return t.apply(n,r)},handleError:function(t,e,n){return t.lineno?t:new r.TemplateError(t,e,n)},isArray:r.isArray,keys:r.keys,SafeString:c,copySafeness:function(t,e){return t instanceof c?new c(e):e.toString()},markSafe:function(t){var e=typeof t;return"string"===e?new c(t):"function"!==e?t:function(e){var n=t.apply(this,arguments);return"string"==typeof n?new c(n):n}},asyncEach:function(t,e,n,o){if(r.isArray(t)){var i=t.length;r.asyncIter(t,function(t,r,o){switch(e){case 1:n(t,r,i,o);break;case 2:n(t[0],t[1],r,i,o);break;case 3:n(t[0],t[1],t[2],r,i,o);break;default:t.push(r,i,o),n.apply(this,t)}},o)}else r.asyncFor(t,function(t,e,r,o,i){n(t,e,r,o,i)},o)},asyncAll:function(t,e,n,o){var i,s,u=0;function a(t,e){u++,s[t]=e,u===i&&o(null,s.join(""))}if(r.isArray(t))if(i=t.length,s=new Array(i),0===i)o(null,"");else for(var c=0;c<t.length;c++){var f=t[c];switch(e){case 1:n(f,c,i,a);break;case 2:n(f[0],f[1],c,i,a);break;case 3:n(f[0],f[1],f[2],c,i,a);break;default:f.push(c,i,a),n.apply(this,f)}}else{var l=r.keys(t||{});if(i=l.length,s=new Array(i),0===i)o(null,"");else for(var p=0;p<l.length;p++){var h=l[p];n(h,t[h],p,i,a)}}},inOperator:r.inOperator,fromIterator:function(t){return"object"!=typeof t||null===t||r.isArray(t)?t:i&&Symbol.iterator in t?o(t):t}}},449:function(t){"use strict";var e=Array.prototype,n=Object.prototype,r={"&":"&amp;",'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","\\":"&#92;"},o=/[&"'<>\\]/g,i=t.exports={};function s(t,e){return n.hasOwnProperty.call(t,e)}function u(t){return r[t]}function a(t,e,n){var r,o,i;if(t instanceof Error&&(t=(o=t).name+": "+o.message),Object.setPrototypeOf?(r=new Error(t),Object.setPrototypeOf(r,a.prototype)):(r=this,Object.defineProperty(r,"message",{enumerable:!1,writable:!0,value:t})),Object.defineProperty(r,"name",{value:"Template render error"}),Error.captureStackTrace&&Error.captureStackTrace(r,this.constructor),o){var s=Object.getOwnPropertyDescriptor(o,"stack");(i=s&&(s.get||function(){return s.value}))||(i=function(){return o.stack})}else{var u=new Error(t).stack;i=function(){return u}}return Object.defineProperty(r,"stack",{get:function(){return i.call(r)}}),Object.defineProperty(r,"cause",{value:o}),r.lineno=e,r.colno=n,r.firstUpdate=!0,r.Update=function(t){var e="("+(t||"unknown path")+")";return this.firstUpdate&&(this.lineno&&this.colno?e+=" [Line "+this.lineno+", Column "+this.colno+"]":this.lineno&&(e+=" [Line "+this.lineno+"]")),e+="\n ",this.firstUpdate&&(e+=" "),this.message=e+(this.message||""),this.firstUpdate=!1,this},r}function c(t){return"[object Function]"===n.toString.call(t)}function f(t){return"[object Array]"===n.toString.call(t)}function l(t){return"[object String]"===n.toString.call(t)}function p(t){return"[object Object]"===n.toString.call(t)}function h(t){var e,n=(e=t)?"string"==typeof e?e.split("."):[e]:[];return function(t){for(var e=t,r=0;r<n.length;r++){var o=n[r];if(!s(e,o))return;e=e[o]}return e}}function v(t){return Array.prototype.slice.call(t)}function y(t,e,n){return Array.prototype.indexOf.call(t||[],e,n)}function d(t){var e=[];for(var n in t)s(t,n)&&e.push(n);return e}i.hasOwnProp=s,i._prettifyError=function(t,e,n){if(n.Update||(n=new i.TemplateError(n)),n.Update(t),!e){var r=n;(n=new Error(r.message)).name=r.name}return n},Object.setPrototypeOf?Object.setPrototypeOf(a.prototype,Error.prototype):a.prototype=Object.create(Error.prototype,{constructor:{value:a}}),i.TemplateError=a,i.escape=function(t){return t.replace(o,u)},i.isFunction=c,i.isArray=f,i.isString=l,i.isObject=p,i.getAttrGetter=h,i.groupBy=function(t,e,n){for(var r={},o=c(e)?e:h(e),i=0;i<t.length;i++){var s=t[i],u=o(s,i);if(void 0===u&&!0===n)throw new TypeError('groupby: attribute "'+e+'" resolved to undefined');(r[u]||(r[u]=[])).push(s)}return r},i.toArray=v,i.without=function(t){var e=[];if(!t)return e;for(var n=t.length,r=v(arguments).slice(1),o=-1;++o<n;)-1===y(r,t[o])&&e.push(t[o]);return e},i.repeat=function(t,e){for(var n="",r=0;r<e;r++)n+=t;return n},i.each=function(t,n,r){if(null!=t)if(e.forEach&&t.forEach===e.forEach)t.forEach(n,r);else if(t.length===+t.length)for(var o=0,i=t.length;o<i;o++)n.call(r,t[o],o,t)},i.map=function(t,n){var r=[];if(null==t)return r;if(e.map&&t.map===e.map)return t.map(n);for(var o=0;o<t.length;o++)r[r.length]=n(t[o],o);return t.length===+t.length&&(r.length=t.length),r},i.asyncIter=function(t,e,n){var r=-1;!function o(){++r<t.length?e(t[r],r,o,n):n()}()},i.asyncFor=function(t,e,n){var r=d(t||{}),o=r.length,i=-1;!function s(){i++;var u=r[i];i<o?e(u,t[u],i,o,s):n()}()},i.indexOf=y,i.keys=d,i._entries=function(t){return d(t).map(function(e){return[e,t[e]]})},i._values=function(t){return d(t).map(function(e){return t[e]})},i._assign=i.extend=function(t,e){return t=t||{},d(e).forEach(function(n){t[n]=e[n]}),t},i.inOperator=function(t,e){if(f(e)||l(e))return-1!==e.indexOf(t);if(p(e))return t in e;throw new Error('Cannot use "in" operator to search for "'+t+'" in unexpected types.')}},491:function(t,e,n){"use strict";function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}var o=n(5),i=n(891).EmitterObj;t.exports=function(t){function e(){return t.apply(this,arguments)||this}var n,i;i=t,(n=e).prototype=Object.create(i.prototype),n.prototype.constructor=n,r(n,i);var s=e.prototype;return s.resolve=function(t,e){return o.resolve(o.dirname(t),e)},s.isRelative=function(t){return 0===t.indexOf("./")||0===t.indexOf("../")},e}(i)},647:function(t,e,n){"use strict";var r,o=n(449),i=n(887),s=i.Environment,u=i.Template,a=n(491),c=n(742),f=n(5),l=n(5),p=n(5),h=n(5),v=n(434),y=n(5),d=n(433);function g(t,e){var n;return e=e||{},o.isObject(t)&&(e=t,t=null),c.FileSystemLoader?n=new c.FileSystemLoader(t,{watch:e.watch,noCache:e.noCache}):c.WebLoader&&(n=new c.WebLoader(t,{useCache:e.web&&e.web.useCache,async:e.web&&e.web.async})),r=new s(n,e),e&&e.express&&r.express(e.express),r}t.exports={Environment:s,Template:u,Loader:a,FileSystemLoader:c.FileSystemLoader,NodeResolveLoader:c.NodeResolveLoader,PrecompiledLoader:c.PrecompiledLoader,WebLoader:c.WebLoader,compiler:l,parser:p,lexer:h,runtime:v,lib:o,nodes:y,installJinjaCompat:d,configure:g,reset:function(){r=void 0},compile:function(t,e,n,o){return r||g(),new u(t,e,n,o)},render:function(t,e,n){return r||g(),r.render(t,e,n)},renderString:function(t,e,n){return r||g(),r.renderString(t,e,n)},precompile:f?f.precompile:void 0,precompileString:f?f.precompileString:void 0}},742:function(t,e,n){"use strict";function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}var o=function(t){function e(e){var n;return(n=t.call(this)||this).precompiled=e||{},n}var n,o;return o=t,(n=e).prototype=Object.create(o.prototype),n.prototype.constructor=n,r(n,o),e.prototype.getSource=function(t){return this.precompiled[t]?{src:{type:"code",obj:this.precompiled[t]},path:t}:null},e}(n(491));t.exports={PrecompiledLoader:o}},790:function(t){"use strict";t.exports=function(){return{range:function(t,e,n){void 0===e?(e=t,t=0,n=1):n||(n=1);var r=[];if(n>0)for(var o=t;o<e;o+=n)r.push(o);else for(var i=t;i>e;i+=n)r.push(i);return r},cycler:function(){return t=Array.prototype.slice.call(arguments),e=-1,{current:null,reset:function(){e=-1,this.current=null},next:function(){return++e>=t.length&&(e=0),this.current=t[e],this.current}};var t,e},joiner:function(t){return function(t){t=t||",";var e=!0;return function(){var n=e?"":t;return e=!1,n}}(t)}}}},795:function(t,e,n){"use strict";function r(t){i.length||o(),i[i.length]=t}t.exports=r;var o,i=[],s=0;function u(){for(;s<i.length;){var t=s;if(s+=1,i[t].call(),s>1024){for(var e=0,n=i.length-s;e<n;e++)i[e]=i[e+s];i.length-=s,s=0}}i.length=0,s=0}var a,c,f,l=void 0!==n.g?n.g:self,p=l.MutationObserver||l.WebKitMutationObserver;function h(t){return function(){var e=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(e),clearInterval(n),t()}}}"function"==typeof p?(a=1,c=new p(u),f=document.createTextNode(""),c.observe(f,{characterData:!0}),o=function(){a=-a,f.data=a}):o=h(u),r.requestFlush=o,r.makeRequestCallFromTimer=h},804:function(t,e,n){var r=n(5);t.exports=function(t,e){function n(t,e){if(this.name=t,this.path=t,this.defaultEngine=e.defaultEngine,this.ext=r.extname(t),!this.ext&&!this.defaultEngine)throw new Error("No default engine was specified and no extension was provided.");this.ext||(this.name+=this.ext=("."!==this.defaultEngine[0]?".":"")+this.defaultEngine)}return n.prototype.render=function(e,n){t.render(this.name,e,n)},e.set("view",n),e.set("nunjucksEnv",t),t}},887:function(t,e,n){"use strict";function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,o(t,e)}function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}var i=n(236),s=n(211),u=n(449),a=n(5),c=n(153),f=n(742),l=f.FileSystemLoader,p=f.WebLoader,h=f.PrecompiledLoader,v=n(423),y=n(790),d=n(891),g=d.Obj,m=d.EmitterObj,b=n(434),w=b.handleError,x=b.Frame,O=n(804);function E(t,e,n){i(function(){t(e,n)})}var k={type:"code",obj:{root:function(t,e,n,r,o){try{o(null,"")}catch(t){o(w(t,null,null))}}}},j=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.init=function(t,e){var n=this;e=this.opts=e||{},this.opts.dev=!!e.dev,this.opts.autoescape=null==e.autoescape||e.autoescape,this.opts.throwOnUndefined=!!e.throwOnUndefined,this.opts.trimBlocks=!!e.trimBlocks,this.opts.lstripBlocks=!!e.lstripBlocks,this.loaders=[],t?this.loaders=u.isArray(t)?t:[t]:l?this.loaders=[new l("views")]:p&&(this.loaders=[new p("/views")]),"undefined"!=typeof window&&window.nunjucksPrecompiled&&this.loaders.unshift(new h(window.nunjucksPrecompiled)),this._initLoaders(),this.globals=y(),this.filters={},this.tests={},this.asyncFilters=[],this.extensions={},this.extensionsList=[],u._entries(c).forEach(function(t){var e=t[0],r=t[1];return n.addFilter(e,r)}),u._entries(v).forEach(function(t){var e=t[0],r=t[1];return n.addTest(e,r)})},n._initLoaders=function(){var t=this;this.loaders.forEach(function(e){e.cache={},"function"==typeof e.on&&(e.on("update",function(n,r){e.cache[n]=null,t.emit("update",n,r,e)}),e.on("load",function(n,r){t.emit("load",n,r,e)}))})},n.invalidateCache=function(){this.loaders.forEach(function(t){t.cache={}})},n.addExtension=function(t,e){return e.__name=t,this.extensions[t]=e,this.extensionsList.push(e),this},n.removeExtension=function(t){var e=this.getExtension(t);e&&(this.extensionsList=u.without(this.extensionsList,e),delete this.extensions[t])},n.getExtension=function(t){return this.extensions[t]},n.hasExtension=function(t){return!!this.extensions[t]},n.addGlobal=function(t,e){return this.globals[t]=e,this},n.getGlobal=function(t){if(void 0===this.globals[t])throw new Error("global not found: "+t);return this.globals[t]},n.addFilter=function(t,e,n){var r=e;return n&&this.asyncFilters.push(t),this.filters[t]=r,this},n.getFilter=function(t){if(!this.filters[t])throw new Error("filter not found: "+t);return this.filters[t]},n.addTest=function(t,e){return this.tests[t]=e,this},n.getTest=function(t){if(!this.tests[t])throw new Error("test not found: "+t);return this.tests[t]},n.resolveTemplate=function(t,e,n){return t.isRelative&&e&&t.isRelative(n)&&t.resolve?t.resolve(e,n):n},n.getTemplate=function(t,e,n,r,o){var i,s=this,a=this,c=null;if(t&&t.raw&&(t=t.raw),u.isFunction(n)&&(o=n,n=null,e=e||!1),u.isFunction(e)&&(o=e,e=!1),t instanceof L)c=t;else{if("string"!=typeof t)throw new Error("template names must be a string: "+t);for(var f=0;f<this.loaders.length;f++){var l=this.loaders[f];if(c=l.cache[this.resolveTemplate(l,n,t)])break}}return c?(e&&c.compile(),o?void o(null,c):c):(u.asyncIter(this.loaders,function(e,r,o,i){function s(t,n){t?i(t):n?(n.loader=e,i(null,n)):o()}t=a.resolveTemplate(e,n,t),e.async?e.getSource(t,s):s(null,e.getSource(t))},function(n,u){if(u||n||r||(n=new Error("template not found: "+t)),n){if(o)return void o(n);throw n}var a;u?(a=new L(u.src,s,u.path,e),u.noCache||(u.loader.cache[t]=a)):a=new L(k,s,"",e),o?o(null,a):i=a}),i)},n.express=function(t){return O(this,t)},n.render=function(t,e,n){u.isFunction(e)&&(n=e,e=null);var r=null;return this.getTemplate(t,function(t,o){if(t&&n)E(n,t);else{if(t)throw t;r=o.render(e,n)}}),r},n.renderString=function(t,e,n,r){return u.isFunction(n)&&(r=n,n={}),new L(t,this,(n=n||{}).path).render(e,r)},n.waterfall=function(t,e,n){return s(t,e,n)},e}(m),S=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.init=function(t,e,n){var r=this;this.env=n||new j,this.ctx=u.extend({},t),this.blocks={},this.exported=[],u.keys(e).forEach(function(t){r.addBlock(t,e[t])})},n.lookup=function(t){return t in this.env.globals&&!(t in this.ctx)?this.env.globals[t]:this.ctx[t]},n.setVariable=function(t,e){this.ctx[t]=e},n.getVariables=function(){return this.ctx},n.addBlock=function(t,e){return this.blocks[t]=this.blocks[t]||[],this.blocks[t].push(e),this},n.getBlock=function(t){if(!this.blocks[t])throw new Error('unknown block "'+t+'"');return this.blocks[t][0]},n.getSuper=function(t,e,n,r,o,i){var s=u.indexOf(this.blocks[e]||[],n),a=this.blocks[e][s+1];if(-1===s||!a)throw new Error('no super block available for "'+e+'"');a(t,this,r,o,i)},n.addExport=function(t){this.exported.push(t)},n.getExported=function(){var t=this,e={};return this.exported.forEach(function(n){e[n]=t.ctx[n]}),e},e}(g),L=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.init=function(t,e,n,r){if(this.env=e||new j,u.isObject(t))switch(t.type){case"code":this.tmplProps=t.obj;break;case"string":this.tmplStr=t.obj;break;default:throw new Error("Unexpected template object type "+t.type+"; expected 'code', or 'string'")}else{if(!u.isString(t))throw new Error("src must be a string or an object describing the source");this.tmplStr=t}if(this.path=n,r)try{this._compile()}catch(t){throw u._prettifyError(this.path,this.env.opts.dev,t)}else this.compiled=!1},n.render=function(t,e,n){var r=this;"function"==typeof t?(n=t,t={}):"function"==typeof e&&(n=e,e=null);var o=!e;try{this.compile()}catch(t){var i=u._prettifyError(this.path,this.env.opts.dev,t);if(n)return E(n,i);throw i}var s=new S(t||{},this.blocks,this.env),a=e?e.push(!0):new x;a.topLevel=!0;var c=null,f=!1;return this.rootRenderFunc(this.env,s,a,b,function(t,e){if(!f||!n||void 0===e)if(t&&(t=u._prettifyError(r.path,r.env.opts.dev,t),f=!0),n)o?E(n,t,e):n(t,e);else{if(t)throw t;c=e}}),c},n.getExported=function(t,e,n){"function"==typeof t&&(n=t,t={}),"function"==typeof e&&(n=e,e=null);try{this.compile()}catch(t){if(n)return n(t);throw t}var r=e?e.push():new x;r.topLevel=!0;var o=new S(t||{},this.blocks,this.env);this.rootRenderFunc(this.env,o,r,b,function(t){t?n(t,null):n(null,o.getExported())})},n.compile=function(){this.compiled||this._compile()},n._compile=function(){var t;if(this.tmplProps)t=this.tmplProps;else{var e=a.compile(this.tmplStr,this.env.asyncFilters,this.env.extensionsList,this.path,this.env.opts);t=new Function(e)()}this.blocks=this._getBlocks(t),this.rootRenderFunc=t.root,this.compiled=!0},n._getBlocks=function(t){var e={};return u.keys(t).forEach(function(n){"b_"===n.slice(0,2)&&(e[n.slice(2)]=t[n])}),e},e}(g);t.exports={Environment:j,Template:L}},891:function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i(r.key),r)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(t){var e=function(t){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}function s(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,u(t,e)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}var a=n(7),c=n(449);function f(t,e,n){n=n||{},c.keys(n).forEach(function(e){var r,o;n[e]=(r=t.prototype[e],o=n[e],"function"!=typeof r||"function"!=typeof o?o:function(){var t=this.parent;this.parent=r;var e=o.apply(this,arguments);return this.parent=t,e})});var r=function(t){function n(){return t.apply(this,arguments)||this}return s(n,t),o(n,[{key:"typename",get:function(){return e}}])}(t);return c._assign(r.prototype,n),r}var l=function(){function t(){this.init.apply(this,arguments)}return t.prototype.init=function(){},t.extend=function(t,e){return"object"==typeof t&&(e=t,t="anonymous"),f(this,t,e)},o(t,[{key:"typename",get:function(){return this.constructor.name}}])}(),p=function(t){function e(){var e,n;return(e=n=t.call(this)||this).init.apply(e,arguments),n}return s(e,t),e.prototype.init=function(){},e.extend=function(t,e){return"object"==typeof t&&(e=t,t="anonymous"),f(this,t,e)},o(e,[{key:"typename",get:function(){return this.constructor.name}}])}(a);t.exports={Obj:l,EmitterObj:p}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}return n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n(647)}()});
//# sourceMappingURL=nunjucks-slim.js.map